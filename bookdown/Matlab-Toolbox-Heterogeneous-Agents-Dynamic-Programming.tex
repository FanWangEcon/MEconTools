% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames*,x11names*}{xcolor}
%
\documentclass[
]{book}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Matlab Toolbox Heterogeneous Agents Dynamic Programming},
  pdfauthor={Fan Wang},
  colorlinks=true,
  linkcolor=Maroon,
  filecolor=Maroon,
  citecolor=Blue,
  urlcolor=blue,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage{longtable,booktabs}
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{bbm}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
% \floatplacement{figure}{H}
\usepackage[labelformat = empty]{caption}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}
\usepackage{geometry}
\geometry{
	a4paper,
	left=1.0in,
	right=1.0in,
	top=1.0in,
	bottom=1.0in,
}
\setcounter{secnumdepth}{5}
\setcounter{tocdepth}{5}
\usepackage[]{natbib}
\bibliographystyle{apalike}

\title{Matlab Toolbox Heterogeneous Agents Dynamic Programming}
\author{Fan Wang}
\date{2020-07-01}

\begin{document}
\maketitle

{
\hypersetup{linkcolor=}
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{preface}{%
\chapter*{Preface}\label{preface}}
\addcontentsline{toc}{chapter}{Preface}

This is a work-in-progress Matlab package consisting of functions that facilitate Dynamic Programming and Related Tasks. Materials gathered from various \href{https://fanwangecon.github.io/research}{projects} in which Matlab code is used. Some of the solutions/algorithms are research outputs developed for specific research \href{https://fanwangecon.github.io/research}{papers}, other algorithms and methods are commonly-used. Files are the \href{https://github.com/FanWangEcon/MEconTools}{MEconTools} repository. Matlab files are linked below by section with livescript files. Tested with \href{https://www.mathworks.com/products/matlab.html}{Matlab} 2019a \citep{matlab}.

\begin{quote}
Download and install the Matlab toolbox: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools.mltbx}{MEconTools.mltbx}
\end{quote}

This bookdown file is a collection of mlx based vignettes for functions that are available from \href{https://github.com/FanWangEcon/MEconTools}{MEconTools}. Each Vignette file contains various examples for invoking each function. The goal of this repository is to make it easier to find/re-use codes produced for various projects.

From other repositories: For dynamic borrowing and savings problems, see \href{https://fanwangecon.github.io/CodeDynaAsset/}{Dynamic Asset Repository}; For code examples, see also \href{https://fanwangecon.github.io/R4Econ/}{R Example Code}, \href{https://fanwangecon.github.io/M4Econ/}{Matlab Example Code}, and \href{https://fanwangecon.github.io/Stata4Econ/}{Stata Example Code}; For intro stat with R, see \href{https://fanwangecon.github.io/Stat4Econ/}{Intro Statistics for Undergraduates}, and intro Math with Matlab, see \href{https://fanwangecon.github.io/Math4Econ/}{Intro Mathematics for Economists}. See \href{https://github.com/FanWangEcon}{here} for all of \href{https://fanwangecon.github.io/}{Fan}'s public repositories.

The site is built using \href{https://bookdown.org/}{Bookdown} \citep{R-bookdown}.

Please contact \href{https://fanwangecon.github.io/}{FanWangEcon} for issues or problems.

\hypertarget{savings-dynamic-programming}{%
\chapter{Savings Dynamic Programming}\label{savings-dynamic-programming}}

\hypertarget{ff_vfi_az_loop-dynamic-savings-problem-loop-common-grid}{%
\section{FF\_VFI\_AZ\_LOOP Dynamic Savings Problem Loop Common Grid}\label{ff_vfi_az_loop-dynamic-savings-problem-loop-common-grid}}

\begin{quote}
Go back to \href{http://fanwangecon.github.io/}{fan}'s \href{https://fanwangecon.github.io/MEconTools/}{MEconTools} Toolbox (\href{https://fanwangecon.github.io/MEconTools/bookdown}{bookdown}), \href{https://fanwangecon.github.io/M4Econ/}{Matlab Code Examples} Repository (\href{https://fanwangecon.github.io/M4Econ/bookdown}{bookdown}), or \href{https://fanwangecon.github.io/Math4Econ/}{Math for Econ with Matlab} Repository (\href{https://fanwangecon.github.io/Math4Econ/bookdown}{bookdown}).
\end{quote}

This is the example vignette for function:
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_loop.m}{\textbf{ff\_vfi\_az\_loop}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} This function
solves the dynamic programming problem for a (a,z) model. Households can
save a, and face AR(1) shock z. The problem is solved over the infinite
horizon. This is the looped code, it is slow for larger state-space
problems. The code uses common grid, with the same state space and
choice space grids.

\textbf{Links to Four Code:}

Four Core Savings/Borrowing Dynamic Programming Solution Functions that
are functions in the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} :

\begin{itemize}
\item
  Common Choice and States Grid :
  \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_loop.m}{\textbf{ff\_vfi\_az\_loop}},
  slow should use for testing new models
\item
  Common Choice and States Grid :
  \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_vec.m}{\textbf{ff\_vfi\_az\_vec}},
  fast good for many purposes
\item
  States Grid + Continuous Exact Savings as Share of Cash-on-Hand :\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_loop.m}{\textbf{ff\_vfi\_az\_bisec\_loop}},
  high precision even with small grid
\item
  States Grid + Continuous Exact Savings as Share of Cash-on-Hand :
  \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_vec.m}{\textbf{ff\_vfi\_az\_bisec\_vec}},
  precision and speed
\end{itemize}

The four sample codes are written for the standard dynamic savings
problem with AR(1) shock that is one of the core problems introduced in
first sessions of graduate Economics courses. The code can be easily
adapted to accomand multiple assets, savings and borrowing, discrete and
continuous choice, etc. A large proportion of dynamic economic models
are based on the underlying structure of solving a model with endogenous
states and exogenous shocks, and that is what the (a,z) model does. In
general, one should write looped code first to make sure the economics
is correct, then vectorized code can be adopted to increase speed.

\hypertarget{test-ff_vfi_az_loop-defaults}{%
\subsection{Test FF\_VFI\_AZ\_LOOP Defaults}\label{test-ff_vfi_az_loop-defaults}}

Call the function with defaults. By default, shows the asset policy
function summary. Model parameters can be changed by the mp\_params.

\begin{verbatim}
%mp_params
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('fl_crra') = 1.5;
mp_params('fl_beta') = 0.94;
% call function
ff_vfi_az_loop(mp_params);

Elapsed time is 1.291175 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
          i    idx    ndim    numel    rowN    colN     sum      mean      std     coefvari    min    max
          _    ___    ____    _____    ____    ____    _____    ______    _____    ________    ___    ___

    ap    1     1      2       700     100      7      16864    24.091    14.08    0.58446      0     50 

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7  
            _______    _______    _______    _______    _______    _______    ______

    r1            0          0          0          0          0    0.50505    2.0202
    r2            0          0          0    0.50505    0.50505     1.0101    2.5253
    r3      0.50505    0.50505    0.50505    0.50505     1.0101     1.5152    3.0303
    r4       1.0101     1.0101     1.0101     1.0101     1.5152     2.0202    3.5354
    r5       1.5152     1.5152     1.5152     1.5152     2.0202     2.5253    4.0404
    r96      45.455     45.455      45.96      45.96      45.96      46.97    48.485
    r97       45.96      45.96      45.96     46.465     46.465     47.475     48.99
    r98      46.465     46.465     46.465      46.97      46.97      47.98     48.99
    r99       46.97      46.97      46.97     47.475     47.475     48.485    49.495
    r100     47.475     47.475     47.475      47.98      47.98      48.99        50
\end{verbatim}

\hypertarget{test-ff_vfi_az_loop-speed-tests}{%
\subsection{Test FF\_VFI\_AZ\_LOOP Speed Tests}\label{test-ff_vfi_az_loop-speed-tests}}

Call the function with different a and z grid size, print out speed:

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_timer') = true;
mp_support('ls_ffcmd') = {};
\end{verbatim}

A grid 50, shock grid 5:

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 50;
mp_params('it_z_n') = 5;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.223217 seconds.
\end{verbatim}

A grid 100, shock grid 7:

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 100;
mp_params('it_z_n') = 7;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 1.284511 seconds.
\end{verbatim}

A grid 200, shock grid 9:

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 200;
mp_params('it_z_n') = 9;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 6.325330 seconds.
\end{verbatim}

\hypertarget{test-ff_vfi_az_loop-control-outputs}{%
\subsection{Test FF\_VFI\_AZ\_LOOP Control Outputs}\label{test-ff_vfi_az_loop-control-outputs}}

Run the function first without any outputs;

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 50;
mp_params('it_z_n') = 5;
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_timer') = false;
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
\end{verbatim}

Run the function and show policy function for savings choice. For
ls\_ffcmd, ls\_ffsna, ls\_ffgrh, can include these: `v', `ap', `c', `y',
`coh', `savefraccoh'. These are value, aprime savings choice,
consumption, income, cash on hand, and savings fraction as cash-on-hand.

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
% ls_ffcmd: summary print which outcomes
mp_support('ls_ffcmd') = {};
% ls_ffsna: detail print which outcomes
mp_support('ls_ffsna') = {'ap'};
% ls_ffgrh: graphical print which outcomes
mp_support('ls_ffgrh') = {'ap'};
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.313830 seconds.
xxx  ff_vfi_az_vec, outcome=ap  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group      a       mean_z_0_54195    mean_z_0_66401    mean_z_0_88162    mean_z_1_3095    mean_z_2_2745
    _____    ______    ______________    ______________    ______________    _____________    _____________

      1           0             0                 0                 0                0           1.0204    
      2      1.0204             0                 0            1.0204           1.0204           2.0408    
      3      2.0408        1.0204            1.0204            2.0408           2.0408           3.0612    
      4      3.0612        2.0408            2.0408            2.0408           3.0612           4.0816    
      5      4.0816        3.0612            3.0612            3.0612           4.0816            5.102    
      6       5.102        4.0816            4.0816            4.0816            5.102           6.1224    
      7      6.1224         5.102             5.102             5.102           6.1224           7.1429    
      8      7.1429        6.1224            6.1224            6.1224           7.1429           8.1633    
      9      8.1633        7.1429            7.1429            7.1429           8.1633           9.1837    
     10      9.1837        8.1633            8.1633            8.1633           9.1837           10.204    
     11      10.204        9.1837            9.1837            9.1837           10.204           11.224    
     12      11.224        10.204            10.204            10.204           11.224           12.245    
     13      12.245        11.224            11.224            11.224           12.245           13.265    
     14      13.265        12.245            12.245            12.245           12.245           14.286    
     15      14.286        13.265            13.265            13.265           13.265           15.306    
     16      15.306        14.286            14.286            14.286           14.286           15.306    
     17      16.327        15.306            15.306            15.306           15.306           16.327    
     18      17.347        16.327            16.327            16.327           16.327           17.347    
     19      18.367        17.347            17.347            17.347           17.347           18.367    
     20      19.388        18.367            18.367            18.367           18.367           19.388    
     21      20.408        19.388            19.388            19.388           19.388           20.408    
     22      21.429        19.388            20.408            20.408           20.408           21.429    
     23      22.449        20.408            21.429            21.429           21.429           22.449    
     24      23.469        21.429            22.449            22.449           22.449           23.469    
     25       24.49        22.449            22.449            23.469           23.469            24.49    
     26       25.51        23.469            23.469             24.49            24.49            25.51    
     27      26.531         24.49             24.49             25.51            25.51           26.531    
     28      27.551         25.51             25.51            26.531           26.531           27.551    
     29      28.571        26.531            26.531            27.551           27.551           28.571    
     30      29.592        27.551            27.551            28.571           28.571           29.592    
     31      30.612        28.571            28.571            28.571           29.592           30.612    
     32      31.633        29.592            29.592            29.592           30.612           31.633    
     33      32.653        30.612            30.612            30.612           31.633           32.653    
     34      33.673        31.633            31.633            31.633           32.653           33.673    
     35      34.694        32.653            32.653            32.653           33.673           34.694    
     36      35.714        33.673            33.673            33.673           34.694           35.714    
     37      36.735        34.694            34.694            34.694           35.714           36.735    
     38      37.755        35.714            35.714            35.714           36.735           37.755    
     39      38.776        36.735            36.735            36.735           37.755           38.776    
     40      39.796        37.755            37.755            37.755           38.776           39.796    
     41      40.816        38.776            38.776            38.776           39.796           40.816    
     42      41.837        39.796            39.796            39.796           40.816           41.837    
     43      42.857        40.816            40.816            40.816           41.837           42.857    
     44      43.878        41.837            41.837            41.837           41.837           42.857    
     45      44.898        42.857            42.857            42.857           42.857           43.878    
     46      45.918        43.878            43.878            43.878           43.878           44.898    
     47      46.939        44.898            44.898            44.898           44.898           45.918    
     48      47.959        45.918            45.918            45.918           45.918           46.939    
     49       48.98        46.939            46.939            46.939           46.939           47.959    
     50          50        47.959            47.959            47.959           47.959            48.98    
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_loop_images/figure_0.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_loop_images/figure_1.png}

Run the function and show summaries for savings and fraction of coh
saved:

\begin{verbatim}
mp_params('it_a_n') = 100;
mp_params('it_z_n') = 9;
mp_support('ls_ffcmd') = {'ap', 'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {};
mp_support('bl_vfi_store_all') = true; % store c(a,z), y(a,z)
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 1.867278 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    ap             1     1      2       900     100      9       21825      24.25     14.089      0.581      0          50
    savefraccoh    2     2      2       900     100      9      752.38    0.83597    0.13497    0.16145      0     0.91812

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7         c8        c9  
            _______    _______    _______    _______    _______    _______    _______    ______    ______

    r1            0          0          0          0          0          0    0.50505    1.5152    3.0303
    r2            0          0          0          0    0.50505    0.50505     1.0101    1.5152    3.5354
    r3      0.50505    0.50505    0.50505    0.50505    0.50505     1.0101     1.5152    2.0202    4.0404
    r4       1.0101     1.0101     1.0101     1.0101     1.0101     1.5152     2.0202    2.5253    4.5455
    r5       1.5152     1.5152     1.5152     1.5152     1.5152     2.0202     2.5253    3.0303    5.0505
    r96      45.455     45.455     45.455      45.96      45.96      45.96     46.465    47.475    49.495
    r97       45.96      45.96      45.96     46.465     46.465     46.465      46.97     47.98    49.495
    r98      46.465     46.465     46.465     46.465      46.97      46.97     47.475    48.485        50
    r99       46.97      46.97      46.97      46.97     47.475     47.475      47.98     48.99        50
    r100     47.475     47.475     47.475     47.475      47.98      47.98     48.485    49.495        50

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7         c8         c9   
            _______    _______    _______    _______    _______    _______    _______    _______    _______

    r1            0          0          0          0          0          0    0.24587    0.48182    0.56208
    r2            0          0          0          0     0.3075    0.25444    0.39276    0.41371    0.59831
    r3      0.30679    0.29486    0.27938    0.25939     0.2338    0.40362    0.49043     0.4833     0.6287
    r4       0.4668    0.45285    0.43438    0.40981    0.37721    0.50166    0.56006    0.53755    0.65456
    r5      0.56502    0.55132    0.53293    0.50802    0.47415    0.57101    0.61221    0.58103    0.67683
    r96     0.91292     0.9117    0.90997    0.91752    0.91364    0.90746    0.90692    0.90732    0.90699
    r97     0.91357    0.91236    0.91064    0.91812    0.91427    0.90815    0.90761    0.90799    0.89847
    r98      0.9142      0.913     0.9113    0.90882    0.91489    0.90882    0.90828    0.90865    0.89919
    r99     0.91482    0.91363    0.91195    0.90949    0.91549    0.90949    0.90894    0.90929    0.89089
    r100    0.91543    0.91425    0.91258    0.91014    0.91609    0.91013    0.90959    0.90992    0.88275
\end{verbatim}

\hypertarget{test-ff_vfi_az_loop-change-interest-rate-and-discount}{%
\subsection{Test FF\_VFI\_AZ\_LOOP Change Interest Rate and Discount}\label{test-ff_vfi_az_loop-change-interest-rate-and-discount}}

Show only save fraction of cash on hand:

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
mp_support('ls_ffcmd') = {'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {};
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 50;
mp_params('it_z_n') = 5;
mp_params('fl_a_max') = 50;
mp_params('st_grid_type') = 'grid_powerspace';
\end{verbatim}

Solve the model with several different interest rates and discount
factor:

\begin{verbatim}
% Lower Savings Incentives
mp_params('fl_beta') = 0.80;
mp_params('fl_r') = 0.01;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.113265 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean       std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    ______    ________    ___    _______

    savefraccoh    1     1      2       250      50      5      118.68    0.47472    0.2843    0.59887      0     0.80805

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
             c1         c2         c3         c4         c5   
           _______    _______    _______    _______    _______

    r1           0          0          0          0    0.10642
    r2           0          0          0          0     0.1064
    r3           0          0          0          0    0.10629
    r4           0          0          0          0      0.106
    r5           0          0          0          0    0.10543
    r46    0.79096    0.78787    0.78241    0.77191    0.74922
    r47    0.79553    0.79262    0.78747    0.77755    0.75606
    r48     0.7999    0.79715    0.79229     0.7829    0.76254
    r49    0.80407    0.80147    0.79687    0.78799    0.76868
    r50    0.80805    0.80559    0.80125    0.79284     0.7745

% Higher Savings Incentives
mp_params('fl_beta') = 0.95;
mp_params('fl_r') = 0.04;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.327279 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       250      50      5      160.99    0.64394    0.29947    0.46506      0     0.94888

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
             c1         c2          c3         c4         c5   
           _______    _______    ________    _______    _______

    r1           0          0    0.024103    0.18484    0.40057
    r2           0          0    0.024094     0.1848    0.40051
    r3           0          0    0.024028    0.18446    0.40008
    r4           0          0    0.046583    0.18354    0.39894
    r5           0          0    0.045925    0.24935    0.39672
    r46    0.94526    0.94167     0.93533    0.92312    0.89672
    r47    0.94628    0.94291     0.93696    0.92548    0.90059
    r48    0.94722    0.94405     0.93846    0.92766    0.90418
    r49    0.94808    0.94511     0.93984    0.92966    0.90749
    r50    0.94888    0.94608     0.94111    0.93151    0.91056
\end{verbatim}

\hypertarget{test-ff_vfi_az_loop-changing-risk-aversion}{%
\subsection{Test FF\_VFI\_AZ\_LOOP Changing Risk Aversion}\label{test-ff_vfi_az_loop-changing-risk-aversion}}

Here, again, show fraction of coh saved in summary tabular form, but
also show it graphically.

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
mp_support('ls_ffcmd') = {'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {'savefraccoh'};
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 100;
mp_params('it_z_n') = 5;
mp_params('fl_a_max') = 50;
mp_params('st_grid_type') = 'grid_powerspace';
\end{verbatim}

Solve the model with different risk aversion levels, higher preferences
for risk:

\begin{verbatim}
% Lower Risk Aversion
mp_params('fl_crra') = 0.5;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.581794 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       500     100      5      268.82    0.53764    0.29852    0.55524      0     0.86141

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3          c4         c5   
            _______    _______    _______    ________    _______

    r1            0          0          0    0.015741    0.18847
    r2            0          0          0     0.01574    0.18847
    r3            0          0          0    0.015737    0.18844
    r4            0          0          0    0.015728    0.18838
    r5            0          0          0    0.022367    0.18825
    r96     0.84455    0.84169    0.83664     0.85445    0.83255
    r97     0.84611    0.84333    0.83842     0.85626    0.83496
    r98     0.84763    0.84493    0.84016     0.85803    0.83729
    r99     0.84911    0.84648    0.84185     0.85974    0.83956
    r100    0.85055      0.848    0.84349     0.86141    0.84176
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_loop_images/figure_2.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_loop_images/figure_3.png}

When risk aversion increases, at every state-space point, the household
wants to save more.

\begin{verbatim}
% Higher Risk Aversion
mp_params('fl_crra') = 5;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.937495 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min     max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    ______

    savefraccoh    1     1      2       500     100      5      335.64    0.67129    0.28688    0.42735      0     0.9488

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2          c3         c4         c5   
            _______    _______    ________    _______    _______

    r1            0          0    0.078907    0.28472    0.52731
    r2            0          0    0.078904    0.28471     0.5273
    r3            0          0    0.078878    0.28465    0.52723
    r4            0          0    0.078808    0.28448    0.52705
    r5            0          0    0.078672    0.28415    0.52669
    r96     0.93086    0.92771     0.92215    0.94079    0.94593
    r97     0.93161    0.92855     0.92315    0.94183    0.94739
    r98     0.93233    0.92936     0.92411    0.94283     0.9488
    r99     0.93303    0.93015     0.92505    0.94379    0.92164
    r100    0.93371    0.93091     0.92595    0.94471    0.92317
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_loop_images/figure_4.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_loop_images/figure_5.png}

\hypertarget{test-ff_vfi_az_loop-with-higher-uncertainty}{%
\subsection{Test FF\_VFI\_AZ\_LOOP with Higher Uncertainty}\label{test-ff_vfi_az_loop-with-higher-uncertainty}}

Increase the standard deviation of the Shock.

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
mp_support('ls_ffcmd') = {'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {};
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 100;
mp_params('it_z_n') = 5;
mp_params('fl_a_max') = 50;
mp_params('st_grid_type') = 'grid_powerspace';
\end{verbatim}

Lower standard deviation of shock:

\begin{verbatim}
% Lower Risk Aversion
mp_params('fl_shk_std') = 0.10;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.957457 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum      mean       std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    _____    ______    _______    ________    ___    _______

    savefraccoh    1     1      2       500     100      5      294.1    0.5882    0.32083    0.54544      0     0.92392

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3          c4         c5   
            _______    _______    _______    ________    _______

    r1            0          0          0    0.034556    0.11424
    r2            0          0          0    0.034555    0.11424
    r3            0          0          0    0.034546    0.11422
    r4            0          0          0    0.034523    0.11416
    r5            0          0          0    0.034478    0.11404
    r96     0.89673    0.89421    0.91986     0.91499    0.90808
    r97     0.89789    0.89545    0.92093      0.9162    0.90948
    r98     0.89903    0.89665    0.92196     0.91737    0.91084
    r99     0.90013    0.89782    0.92295      0.9185    0.91215
    r100    0.90119    0.89896    0.92392     0.91959    0.91342
\end{verbatim}

Higher shock standard deviation: low shock high asset save more, high
shock more asset save less, high shock low asset save more:

\begin{verbatim}
% Higher Risk Aversion
mp_params('fl_shk_std') = 0.40;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.923630 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       500     100      5      350.37    0.70073    0.26741    0.38162      0     0.93257

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2          c3         c4         c5   
            _______    _______    ________    _______    _______

    r1            0          0    0.030722    0.36969    0.77072
    r2            0          0     0.03072    0.36967    0.77071
    r3            0          0      0.0307    0.36958    0.77068
    r4            0          0    0.030646    0.36933     0.7706
    r5            0          0    0.030543    0.36885    0.77044
    r96     0.90975    0.90819      0.9038    0.91513    0.88687
    r97     0.91053    0.90902     0.90476    0.91633    0.89076
    r98     0.91129    0.90982     0.90569     0.9175    0.86794
    r99     0.91204    0.91061      0.9066    0.91862    0.84583
    r100    0.91276    0.91138     0.90748    0.91971    0.82439
\end{verbatim}

\hypertarget{ff_vfi_az_vec-dynamic-savings-problem-vectorized-common-grid}{%
\section{FF\_VFI\_AZ\_VEC Dynamic Savings Problem Vectorized Common Grid}\label{ff_vfi_az_vec-dynamic-savings-problem-vectorized-common-grid}}

\begin{quote}
Go back to \href{http://fanwangecon.github.io/}{fan}'s \href{https://fanwangecon.github.io/MEconTools/}{MEconTools} Toolbox (\href{https://fanwangecon.github.io/MEconTools/bookdown}{bookdown}), \href{https://fanwangecon.github.io/M4Econ/}{Matlab Code Examples} Repository (\href{https://fanwangecon.github.io/M4Econ/bookdown}{bookdown}), or \href{https://fanwangecon.github.io/Math4Econ/}{Math for Econ with Matlab} Repository (\href{https://fanwangecon.github.io/Math4Econ/bookdown}{bookdown}).
\end{quote}

This is the example vignette for function:
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_vec.m}{\textbf{ff\_vfi\_az\_vec}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} This function
solves (vectorized) the dynamic programming problem for a (a,z) model.
Households can save a, and face AR(1) shock z. The problem is solved
over the infinite horizon.

The code uses common grid, with the same state space and choice space
grids.
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_vec.m}{\textbf{ff\_vfi\_az\_bisec\_vec}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}} solves the same
problem but using continuous exact percentage asset choices, which is
more precise than the solution here, and perhaps a little bit slower.

This is the vectorized code, its speed is much faster than the looped
code. The function is designed to have small memory footprint and
requires low computing resources, yet is fast.

\textbf{Links to Four Code:}

Four Core Savings/Borrowing Dynamic Programming Solution Functions that
are functions in the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} :

\begin{itemize}
\item
  Common Choice and States Grid :
  \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_loop.m}{\textbf{ff\_vfi\_az\_loop}},
  slow should use for testing new models
\item
  Common Choice and States Grid :
  \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_vec.m}{\textbf{ff\_vfi\_az\_vec}},
  fast good for many purposes
\item
  States Grid + Continuous Exact Savings as Share of Cash-on-Hand :\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_loop.m}{\textbf{ff\_vfi\_az\_bisec\_loop}},
  high precision even with small grid
\item
  States Grid + Continuous Exact Savings as Share of Cash-on-Hand :
  \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_vec.m}{\textbf{ff\_vfi\_az\_bisec\_vec}},
  precision and speed
\end{itemize}

\hypertarget{test-ff_vfi_az_vec-defaults}{%
\subsection{Test FF\_VFI\_AZ\_VEC Defaults}\label{test-ff_vfi_az_vec-defaults}}

Call the function with defaults. By default, shows the asset policy
function summary. Model parameters can be changed by the mp\_params.

\begin{verbatim}
%mp_params
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('fl_crra') = 1.5;
mp_params('fl_beta') = 0.94;
ff_vfi_az_vec(mp_params);

Elapsed time is 0.128918 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
          i    idx    ndim    numel    rowN    colN     sum      mean      std     coefvari    min    max
          _    ___    ____    _____    ____    ____    _____    ______    _____    ________    ___    ___

    ap    1     1      2       700     100      7      16864    24.091    14.08    0.58446      0     50 

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7  
            _______    _______    _______    _______    _______    _______    ______

    r1            0          0          0          0          0    0.50505    2.0202
    r2            0          0          0    0.50505    0.50505     1.0101    2.5253
    r3      0.50505    0.50505    0.50505    0.50505     1.0101     1.5152    3.0303
    r4       1.0101     1.0101     1.0101     1.0101     1.5152     2.0202    3.5354
    r5       1.5152     1.5152     1.5152     1.5152     2.0202     2.5253    4.0404
    r96      45.455     45.455      45.96      45.96      45.96      46.97    48.485
    r97       45.96      45.96      45.96     46.465     46.465     47.475     48.99
    r98      46.465     46.465     46.465      46.97      46.97      47.98     48.99
    r99       46.97      46.97      46.97     47.475     47.475     48.485    49.495
    r100     47.475     47.475     47.475      47.98      47.98      48.99        50
\end{verbatim}

\hypertarget{test-ff_vfi_az_bisec_vec-speed-tests}{%
\subsection{Test FF\_VFI\_AZ\_BISEC\_VEC Speed Tests}\label{test-ff_vfi_az_bisec_vec-speed-tests}}

Call the function with different a and z grid size, print out speed:

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_timer') = true;
mp_support('ls_ffcmd') = {};
\end{verbatim}

A grid 200, shock grid 9:

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 200;
mp_params('it_z_n') = 9;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 0.220867 seconds.
\end{verbatim}

A grid 750, shock grid 15:

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 750;
mp_params('it_z_n') = 15;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 3.573648 seconds.
\end{verbatim}

A grid 600, shock grid 45:

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 600;
mp_params('it_z_n') = 45;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 8.398580 seconds.
\end{verbatim}

\hypertarget{test-ff_vfi_az_vec-control-outputs}{%
\subsection{Test FF\_VFI\_AZ\_VEC Control Outputs}\label{test-ff_vfi_az_vec-control-outputs}}

Run the function first without any outputs;

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 50;
mp_params('it_z_n') = 5;
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_timer') = false;
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
\end{verbatim}

Run the function and show policy function for savings choice. For
ls\_ffcmd, ls\_ffsna, ls\_ffgrh, can include these: `v', `ap', `c', `y',
`coh', `savefraccoh'. These are value, aprime savings choice,
consumption, income, cash on hand, and savings fraction as cash-on-hand.

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
% ls_ffcmd: summary print which outcomes
mp_support('ls_ffcmd') = {};
% ls_ffsna: detail print which outcomes
mp_support('ls_ffsna') = {'savefraccoh'};
% ls_ffgrh: graphical print which outcomes
mp_support('ls_ffgrh') = {'savefraccoh'};
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 0.014484 seconds.
xxx  ff_vfi_az_vec, outcome=savefraccoh  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group      a       mean_z_0_54195    mean_z_0_66401    mean_z_0_88162    mean_z_1_3095    mean_z_2_2745
    _____    ______    ______________    ______________    ______________    _____________    _____________

      1           0             0                 0                 0                 0           0.3505   
      2      1.0204             0                 0           0.46928           0.37487          0.51572   
      3      2.0408       0.36632           0.34687           0.63373           0.54163          0.61186   
      4      3.0612       0.53265           0.51178           0.47837           0.63592          0.67476   
      5      4.0816       0.62764           0.60816           0.57627           0.69655          0.71911   
      6       5.102       0.68908           0.67137           0.64196           0.73882          0.75206   
      7      6.1224       0.73208           0.71603           0.68909           0.76996          0.77751   
      8      7.1429       0.76386           0.74926           0.72456           0.79387          0.79776   
      9      8.1633        0.7883           0.77494           0.75221           0.81279          0.81425   
     10      9.1837       0.80769           0.79539           0.77438           0.82815          0.82795   
     11      10.204       0.82343           0.81206           0.79254           0.84086           0.8395   
     12      11.224       0.83648           0.82591            0.8077           0.85155          0.84937   
     13      12.245       0.84747           0.83759           0.82053           0.86067          0.85791   
     14      13.265       0.85685           0.84758           0.83155           0.80173          0.86537   
     15      14.286       0.86495           0.85622            0.8411           0.81288          0.87194   
     16      15.306       0.87201           0.86377           0.84947           0.82268          0.82291   
     17      16.327       0.87823           0.87043           0.85685           0.83137          0.83104   
     18      17.347       0.88374           0.87633           0.86342           0.83912          0.83834   
     19      18.367       0.88866           0.88161            0.8693           0.84608          0.84495   
     20      19.388       0.89309           0.88635            0.8746           0.85237          0.85095   
     21      20.408       0.89708           0.89064           0.87939           0.85807          0.85642   
     22      21.429       0.85567           0.89454           0.88375           0.86327          0.86143   
     23      22.449       0.86096           0.89809           0.88773           0.86803          0.86604   
     24      23.469       0.86581           0.90135           0.89138           0.87241          0.87029   
     25       24.49       0.87026           0.86502           0.89474           0.87644          0.87422   
     26       25.51       0.87436            0.8693           0.89784           0.88017          0.87787   
     27      26.531       0.87816           0.87327           0.90071           0.88362          0.88126   
     28      27.551       0.88168           0.87695           0.90338           0.88684          0.88443   
     29      28.571       0.88496           0.88037           0.90586           0.88984          0.88739   
     30      29.592       0.88802           0.88357           0.90818           0.89264          0.89017   
     31      30.612       0.89087           0.88655           0.87896           0.89527          0.89278   
     32      31.633       0.89355           0.88935           0.88197           0.89773          0.89523   
     33      32.653       0.89606           0.89198            0.8848           0.90005          0.89754   
     34      33.673       0.89843           0.89446           0.88747           0.90223          0.89972   
     35      34.694       0.90065           0.89679           0.88998           0.90429          0.90178   
     36      35.714       0.90275           0.89899           0.89235           0.90624          0.90374   
     37      36.735       0.90474           0.90107            0.8946           0.90809          0.90559   
     38      37.755       0.90662           0.90304           0.89673           0.90984          0.90735   
     39      38.776       0.90841           0.90491           0.89874            0.9115          0.90902   
     40      39.796        0.9101           0.90669           0.90066           0.91308          0.91062   
     41      40.816       0.91171           0.90838           0.90249           0.91458          0.91214   
     42      41.837       0.91325           0.90998           0.90422           0.91601          0.91359   
     43      42.857       0.91471           0.91152           0.90588           0.91738          0.91497   
     44      43.878        0.9161           0.91298           0.90746           0.89681          0.89499   
     45      44.898       0.91743           0.91438           0.90897           0.89854          0.89671   
     46      45.918       0.91871           0.91571           0.91042           0.90019          0.89836   
     47      46.939       0.91993           0.91699           0.91181           0.90178          0.89994   
     48      47.959        0.9211           0.91822           0.91313            0.9033          0.90146   
     49       48.98       0.92222           0.91939           0.91441           0.90475          0.90292   
     50          50       0.92329           0.92052           0.91563           0.90615          0.90433   
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_vec_images/figure_0.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_vec_images/figure_1.png}

Run the function and show summaries for savings and fraction of coh
saved:

\begin{verbatim}
mp_params('it_a_n') = 100;
mp_params('it_z_n') = 9;
mp_support('ls_ffcmd') = {'ap', 'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {};
mp_support('bl_vfi_store_all') = true; % store c(a,z), y(a,z)
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 0.127807 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    ap             1     1      2       900     100      9       21825      24.25     14.089      0.581      0          50
    savefraccoh    2     2      2       900     100      9      752.38    0.83597    0.13497    0.16145      0     0.91812

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7         c8        c9  
            _______    _______    _______    _______    _______    _______    _______    ______    ______

    r1            0          0          0          0          0          0    0.50505    1.5152    3.0303
    r2            0          0          0          0    0.50505    0.50505     1.0101    1.5152    3.5354
    r3      0.50505    0.50505    0.50505    0.50505    0.50505     1.0101     1.5152    2.0202    4.0404
    r4       1.0101     1.0101     1.0101     1.0101     1.0101     1.5152     2.0202    2.5253    4.5455
    r5       1.5152     1.5152     1.5152     1.5152     1.5152     2.0202     2.5253    3.0303    5.0505
    r96      45.455     45.455     45.455      45.96      45.96      45.96     46.465    47.475    49.495
    r97       45.96      45.96      45.96     46.465     46.465     46.465      46.97     47.98    49.495
    r98      46.465     46.465     46.465     46.465      46.97      46.97     47.475    48.485        50
    r99       46.97      46.97      46.97      46.97     47.475     47.475      47.98     48.99        50
    r100     47.475     47.475     47.475     47.475      47.98      47.98     48.485    49.495        50

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7         c8         c9   
            _______    _______    _______    _______    _______    _______    _______    _______    _______

    r1            0          0          0          0          0          0    0.24587    0.48182    0.56208
    r2            0          0          0          0     0.3075    0.25444    0.39276    0.41371    0.59831
    r3      0.30679    0.29486    0.27938    0.25939     0.2338    0.40362    0.49043     0.4833     0.6287
    r4       0.4668    0.45285    0.43438    0.40981    0.37721    0.50166    0.56006    0.53755    0.65456
    r5      0.56502    0.55132    0.53293    0.50802    0.47415    0.57101    0.61221    0.58103    0.67683
    r96     0.91292     0.9117    0.90997    0.91752    0.91364    0.90746    0.90692    0.90732    0.90699
    r97     0.91357    0.91236    0.91064    0.91812    0.91427    0.90815    0.90761    0.90799    0.89847
    r98      0.9142      0.913     0.9113    0.90882    0.91489    0.90882    0.90828    0.90865    0.89919
    r99     0.91482    0.91363    0.91195    0.90949    0.91549    0.90949    0.90894    0.90929    0.89089
    r100    0.91543    0.91425    0.91258    0.91014    0.91609    0.91013    0.90959    0.90992    0.88275
\end{verbatim}

\hypertarget{test-ff_vfi_az_vec-change-interest-rate-and-discount}{%
\subsection{Test FF\_VFI\_AZ\_VEC Change Interest Rate and Discount}\label{test-ff_vfi_az_vec-change-interest-rate-and-discount}}

Show only save fraction of cash on hand:

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
mp_support('ls_ffcmd') = {'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {};
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 750;
mp_params('it_z_n') = 9;
mp_params('fl_a_max') = 50;
mp_params('st_grid_type') = 'grid_powerspace';
\end{verbatim}

Solve the model with several different interest rates and discount
factor:

\begin{verbatim}
% Lower Savings Incentives
mp_params('fl_beta') = 0.80;
mp_params('fl_r') = 0.01;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 0.771613 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      3318.8    0.49167    0.27768    0.56477      0     0.80542

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6          c7         c8         c9   
            _______    _______    _______    _______    _______    _______    ________    _______    _______

    r1            0          0          0          0          0          0    0.023475    0.13289    0.29755
    r2            0          0          0          0          0          0    0.023475    0.13289    0.29755
    r3            0          0          0          0          0          0    0.023475    0.13289    0.29755
    r4            0          0          0          0          0          0    0.023475    0.13289    0.29755
    r5            0          0          0          0          0          0    0.023475    0.13289    0.29755
    r746     0.8044    0.80333    0.80182    0.79961    0.79626    0.79093      0.7887     0.7824    0.77641
    r747    0.80465    0.80359    0.80209    0.79989    0.79655    0.79124     0.78903    0.78277    0.77686
    r748    0.80491    0.80385    0.80235    0.80016    0.79683    0.79154     0.78936    0.78315    0.77731
    r749    0.80517    0.80411    0.80262    0.80043    0.79712    0.79185     0.78969    0.78352    0.77776
    r750    0.80542    0.80437    0.80288    0.80071     0.7974    0.79215     0.79002    0.78389    0.77821

% Higher Savings Incentives
mp_params('fl_beta') = 0.95;
mp_params('fl_r') = 0.04;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 2.484993 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      4491.9    0.66547    0.28771    0.43234      0     0.93029

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4          c5         c6         c7         c8         c9   
            _______    _______    _______    _______    ________    _______    _______    _______    _______

    r1            0          0          0          0    0.031818    0.14726    0.31047    0.48484    0.64489
    r2            0          0          0          0    0.031818    0.14726    0.31047    0.48484    0.64489
    r3            0          0          0          0    0.031818    0.14726    0.31047    0.48484    0.64489
    r4            0          0          0          0    0.031818    0.14726    0.31047    0.48484    0.64489
    r5            0          0          0          0    0.031818    0.14726    0.31047    0.48484    0.64489
    r746    0.92742       0.93     0.9283    0.92581     0.92578    0.92349    0.92443    0.91686    0.88398
    r747     0.9275    0.93007    0.92838     0.9259     0.92588    0.92361    0.92457    0.91706    0.88076
    r748    0.92757    0.93014    0.92846    0.92599     0.92598    0.92373    0.92472    0.91359    0.87757
    r749    0.92764    0.93022    0.92854    0.92608     0.92608    0.92384    0.92115    0.91014    0.87438
    r750    0.92772    0.93029    0.92862    0.92617     0.92618    0.92396     0.9213    0.90671    0.87121
\end{verbatim}

\hypertarget{test-ff_vfi_az_vec-changing-risk-aversion}{%
\subsection{Test FF\_VFI\_AZ\_VEC Changing Risk Aversion}\label{test-ff_vfi_az_vec-changing-risk-aversion}}

Here, again, show fraction of coh saved in summary tabular form, but
also show it graphically.

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
mp_support('ls_ffcmd') = {'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {'savefraccoh'};
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 750;
mp_params('it_z_n') = 9;
mp_params('fl_a_max') = 50;
mp_params('st_grid_type') = 'grid_powerspace';
\end{verbatim}

Solve the model with different risk aversion levels, higher preferences
for risk:

\begin{verbatim}
% Lower Risk Aversion
mp_params('fl_crra') = 0.5;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 1.991475 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean       std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    ______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      3735.9    0.55347    0.2897    0.52343      0     0.85998

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6          c7         c8         c9   
            _______    _______    _______    _______    _______    _______    ________    _______    _______

    r1            0          0          0          0          0          0    0.075021    0.22812    0.41075
    r2            0          0          0          0          0          0    0.075021    0.22812    0.41075
    r3            0          0          0          0          0          0    0.075021    0.22812    0.41075
    r4            0          0          0          0          0          0    0.075021    0.22812    0.41075
    r5            0          0          0          0          0          0    0.075021    0.22812    0.41075
    r746    0.85928    0.85816    0.85657    0.85425    0.85428     0.8522     0.84972    0.84635    0.84292
    r747    0.85946    0.85834    0.85676    0.85444    0.85449    0.85242     0.84997    0.84665     0.8433
    r748    0.85963    0.85852    0.85694    0.85464    0.85469    0.85264     0.85021    0.84694    0.84368
    r749    0.85981     0.8587    0.85713    0.85483    0.85489    0.85286     0.85046    0.84723    0.84405
    r750    0.85998    0.85888    0.85731    0.85502    0.85509    0.85307      0.8507    0.84752    0.84442
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_vec_images/figure_2.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_vec_images/figure_3.png}

When risk aversion increases, at every state-space point, the household
wants to save more.

\begin{verbatim}
% Higher Risk Aversion
mp_params('fl_crra') = 5;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 2.026442 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean       std      coefvari    min     max 
                   _    ___    ____    _____    ____    ____    ______    ______    _______    ________    ___    _____

    savefraccoh    1     1      2      6750     750      9      4639.3    0.6873    0.28204    0.41036      0     0.942

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3          c4           c5         c6         c7         c8         c9   
            _______    _______    _______    _________    ________    _______    _______    _______    _______

    r1            0          0          0     0.008995    0.085095    0.21314    0.37277    0.53628    0.68332
    r2            0          0          0     0.008995    0.085095    0.21314    0.37277    0.53628    0.68332
    r3            0          0          0     0.008995    0.085095    0.21314    0.37277    0.53628    0.68332
    r4            0          0          0     0.008995    0.085095    0.21314    0.37277    0.53628    0.68332
    r5            0          0          0    0.0089949    0.085094    0.21314    0.37277    0.53628    0.68332
    r746    0.94083     0.9396    0.94168      0.93912     0.93904    0.94041    0.93743    0.92949    0.89566
    r747    0.94091    0.93969    0.94176      0.93921     0.93914    0.93674    0.93758    0.92969    0.89241
    r748    0.94098    0.93977    0.94184      0.93931     0.93924    0.93686    0.93772    0.92618    0.88918
    r749    0.94106    0.93985    0.94192       0.9394     0.93934    0.93699    0.93787    0.92269    0.88596
    r750    0.94113    0.93993      0.942      0.93949     0.93944    0.93711    0.93801    0.91921    0.88275
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_vec_images/figure_4.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_vec_images/figure_5.png}

\hypertarget{test-ff_vfi_az_vec-with-higher-uncertainty}{%
\subsection{Test FF\_VFI\_AZ\_VEC with Higher Uncertainty}\label{test-ff_vfi_az_vec-with-higher-uncertainty}}

Increase the standard deviation of the Shock.

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
mp_support('ls_ffcmd') = {'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {};
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 750;
mp_params('it_z_n') = 9;
mp_params('fl_a_max') = 50;
mp_params('st_grid_type') = 'grid_powerspace';
\end{verbatim}

Lower standard deviation of shock:

\begin{verbatim}
% Lower Risk Aversion
mp_params('fl_shk_std') = 0.10;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 2.065989 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN    sum      mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ____    _______    _______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      4026    0.59644    0.31533    0.52869      0     0.91423

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5          c6          c7         c8         c9   
            _______    _______    _______    _______    _______    ________    ________    _______    _______

    r1            0          0          0          0          0    0.012569    0.062884    0.13754    0.22274
    r2            0          0          0          0          0    0.012569    0.062884    0.13754    0.22274
    r3            0          0          0          0          0    0.012569    0.062884    0.13754    0.22274
    r4            0          0          0          0          0    0.012569    0.062884    0.13754    0.22274
    r5            0          0          0          0          0    0.012569    0.062884    0.13754    0.22274
    r746    0.91375    0.91251    0.91101    0.91289    0.91057     0.91138     0.91136    0.91021     0.9075
    r747    0.91387    0.91264    0.91114    0.91302    0.91072     0.91153     0.91152    0.91039    0.90769
    r748    0.91399    0.91277    0.91127    0.91315    0.91086     0.91168     0.91168    0.91056    0.90788
    r749    0.91411    0.91289     0.9114    0.91329      0.911     0.91183     0.91183    0.91073    0.90807
    r750    0.91423    0.91302    0.91153    0.91342    0.91114     0.91197     0.91199     0.9109    0.90826
\end{verbatim}

Higher shock standard deviation: low shock high asset save more, high
shock more asset save less, high shock low asset save more:

\begin{verbatim}
% Higher Risk Aversion
mp_params('fl_shk_std') = 0.40;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 2.184888 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min     max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    ______

    savefraccoh    1     1      2      6750     750      9      4687.4    0.69442    0.27109    0.39038      0     0.9339

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4          c5         c6         c7         c8         c9   
            _______    _______    _______    _______    ________    _______    _______    _______    _______

    r1            0          0          0          0    0.030619    0.24561    0.55369    0.80189    0.46265
    r2            0          0          0          0    0.030619    0.24561    0.55369    0.80189    0.46265
    r3            0          0          0          0    0.030619     0.2456    0.55369    0.80189    0.46265
    r4            0          0          0          0    0.030619     0.2456    0.55369    0.80189    0.46265
    r5            0          0          0          0    0.030618     0.2456    0.55369    0.80189    0.46265
    r746    0.93365    0.93335     0.9328    0.93173     0.92941    0.92713    0.92079     0.8402    0.31544
    r747    0.93371    0.93341    0.93286     0.9318     0.92949    0.92723    0.92095    0.83734    0.31504
    r748    0.93378    0.93348    0.93293    0.93187     0.92957    0.92733    0.92111    0.83449    0.31463
    r749    0.93384    0.93354      0.933    0.93194     0.92965    0.92743    0.92127    0.83166    0.31423
    r750     0.9339     0.9336    0.93306    0.93201     0.92973    0.92753    0.92143    0.82883    0.31383
\end{verbatim}

\hypertarget{ff_vfi_az_bisec_loop-dynamic-savings-problem-loop-continuous-choice}{%
\section{FF\_VFI\_AZ\_BISEC\_LOOP Dynamic Savings Problem Loop Continuous Choice}\label{ff_vfi_az_bisec_loop-dynamic-savings-problem-loop-continuous-choice}}

\begin{quote}
Go back to \href{http://fanwangecon.github.io/}{fan}'s \href{https://fanwangecon.github.io/MEconTools/}{MEconTools} Toolbox (\href{https://fanwangecon.github.io/MEconTools/bookdown}{bookdown}), \href{https://fanwangecon.github.io/M4Econ/}{Matlab Code Examples} Repository (\href{https://fanwangecon.github.io/M4Econ/bookdown}{bookdown}), or \href{https://fanwangecon.github.io/Math4Econ/}{Math for Econ with Matlab} Repository (\href{https://fanwangecon.github.io/Math4Econ/bookdown}{bookdown}).
\end{quote}

This is the example vignette for function:\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_loop.m}{\textbf{ff\_vfi\_az\_bisec\_loop}}from
the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} This function
solves the dynamic programming problem for a (a,z) model. Households can
save a, and face AR(1) shock z. The problem is solved over the infinite
horizon. This is the looped code, it is slow for larger state-space
problems. The code uses continuous choices, solved with bisection. The
state-space is on a grid, but choice grids are in terms of percentage of
resources to save and solved exactly.

\textbf{Links to Four Code:}

Four Core Savings/Borrowing Dynamic Programming Solution Functions that
are functions in the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} :

\begin{itemize}
\item
  Common Choice and States Grid :
  \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_loop.m}{\textbf{ff\_vfi\_az\_loop}},
  slow should use for testing new models
\item
  Common Choice and States Grid :
  \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_vec.m}{\textbf{ff\_vfi\_az\_vec}},
  fast good for many purposes
\item
  States Grid + Continuous Exact Savings as Share of Cash-on-Hand :\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_loop.m}{\textbf{ff\_vfi\_az\_bisec\_loop}},
  high precision even with small grid
\item
  States Grid + Continuous Exact Savings as Share of Cash-on-Hand :
  \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_vec.m}{\textbf{ff\_vfi\_az\_bisec\_vec}},
  precision and speed
\end{itemize}

\hypertarget{test-ff_vfi_az_bisec_loop-defaults}{%
\subsection{Test FF\_VFI\_AZ\_BISEC\_LOOP Defaults}\label{test-ff_vfi_az_bisec_loop-defaults}}

Call the function with defaults. By default, shows the asset policy
function summary. Model parameters can be changed by the mp\_params.

\begin{verbatim}
%mp_params
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('fl_crra') = 1.5;
mp_params('fl_beta') = 0.94;
% call function
ff_vfi_az_bisec_loop(mp_params);

Elapsed time is 13.575906 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
          i    idx    ndim    numel    rowN    colN     sum      mean      std      coefvari    min     max  
          _    ___    ____    _____    ____    ____    _____    ______    ______    ________    ___    ______

    ap    1     1      2       700     100      7      15835    22.621    13.367    0.59091      0     47.273

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7  
            _______    _______    _______    _______    _______    _______    ______

    r1            0          0          0          0          0    0.38021    1.4609
    r2      0.19477    0.18872    0.19731    0.24709    0.41492    0.79311    1.8893
    r3      0.54595    0.54109    0.55664    0.62239    0.81173     1.2132    2.3195
    r4       1.0101     1.0101     1.0101     1.0189     1.2217     1.6363    2.7464
    r5       1.4388     1.4362      1.459     1.5151     1.6354     2.0602    3.1804
    r96      43.225     43.246       43.3     43.422     43.632     44.155    45.413
    r97       43.69      43.71     43.765     43.887     44.096     44.618    45.879
    r98      44.154     44.174     44.228     44.352     44.559     45.083    46.344
    r99      44.618     44.638     44.693     44.815     45.024     45.548    46.809
    r100      45.08     45.101     45.156      45.28     45.487     46.012    47.273
\end{verbatim}

\hypertarget{test-ff_vfi_az_bisec_loop-speed-tests}{%
\subsection{Test FF\_VFI\_AZ\_BISEC\_LOOP Speed Tests}\label{test-ff_vfi_az_bisec_loop-speed-tests}}

Call the function with different a and z grid size, print out speed:

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_timer') = true;
mp_support('ls_ffcmd') = {};
\end{verbatim}

A grid 50, shock grid 5:

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 50;
mp_params('it_z_n') = 5;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 4.733351 seconds.
\end{verbatim}

A grid 100, shock grid 7:

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 100;
mp_params('it_z_n') = 7;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 13.889250 seconds.
\end{verbatim}

A grid 200, shock grid 9:

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 200;
mp_params('it_z_n') = 9;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 38.195963 seconds.
\end{verbatim}

\hypertarget{test-ff_vfi_az_bisec_loop-control-outputs}{%
\subsection{Test FF\_VFI\_AZ\_BISEC\_LOOP Control Outputs}\label{test-ff_vfi_az_bisec_loop-control-outputs}}

Run the function first without any outputs;

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 50;
mp_params('it_z_n') = 5;
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_timer') = false;
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
\end{verbatim}

Run the function and show policy function for savings choice. For
ls\_ffcmd, ls\_ffsna, ls\_ffgrh, can include these: `v', `ap', `c', `y',
`coh', `savefraccoh'. These are value, aprime savings choice,
consumption, income, cash on hand, and savings fraction as cash-on-hand.

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
% ls_ffcmd: summary print which outcomes
mp_support('ls_ffcmd') = {};
% ls_ffsna: detail print which outcomes
mp_support('ls_ffsna') = {'ap'};
% ls_ffgrh: graphical print which outcomes
mp_support('ls_ffgrh') = {'ap'};
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 4.728102 seconds.
xxx  ff_vfi_az_vec, outcome=ap  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group      a       mean_z_0_54195    mean_z_0_66401    mean_z_0_88162    mean_z_1_3095    mean_z_2_2745
    _____    ______    ______________    ______________    ______________    _____________    _____________

      1           0             0                 0                 0                 0          0.70914   
      2      1.0204       0.58666            0.5889           0.64782           0.89696           1.5821   
      3      2.0408        1.3824            1.3926            1.4723            1.7501           2.4674   
      4      3.0612        2.2189            2.2357            2.3281            2.6228           3.3608   
      5      4.0816        3.0774            3.0995            3.2007            3.5069           4.2595   
      6       5.102        4.0815            4.0816            4.0833            4.3986           5.1595   
      7      6.1224        4.9896            5.0184            5.1021            5.2928           6.1223   
      8      7.1429        5.8564            5.8902            6.0116            6.1873           7.0951   
      9      8.1633        6.7406            6.7749            6.8956            7.1428           7.9989   
     10      9.1837        7.6346            7.6706            7.7922            8.1324           8.9028   
     11      10.204        8.5353             8.572            8.6944            9.0301           9.8113   
     12      11.224        9.4411            9.4787            9.6014            9.9343           10.726   
     13      12.245         10.35            10.389            10.512            10.845           11.644   
     14      13.265        11.263            11.302            11.427            11.761           12.565   
     15      14.286        12.245            12.245            12.344             12.68           13.488   
     16      15.306        13.224            13.264            13.265              13.6           14.413   
     17      16.327        14.141            14.182            14.286            14.523           15.339   
     18      17.347        15.052            15.097            15.228            15.446           16.327   
     19      18.367        15.971            16.014            16.147             16.37           17.311   
     20      19.388        16.889            16.933            17.065            17.347           18.233   
     21      20.408        17.811            17.856            17.989             18.34           19.157   
     22      21.429        18.735            18.779            18.912            19.265           20.083   
     23      22.449         19.66            19.705            19.838            20.187            21.01   
     24      23.469        20.586            20.632            20.765            21.113           21.938   
     25       24.49        21.513            21.559            21.693            22.041           22.869   
     26       25.51        22.449            22.488            22.622             22.97             23.8   
     27      26.531        23.469             23.47            23.551              23.9           24.732   
     28      27.551        24.418            24.464             24.49            24.831           25.665   
     29      28.571        25.348            25.394             25.51            25.763           26.599   
     30      29.592        26.276            26.325             26.46            26.696           27.551   
     31      30.612        27.203            27.252            27.392            27.629           28.572   
     32      31.633        28.135            28.182            28.321            28.571           29.514   
     33      32.653        29.067            29.115            29.251            29.592           30.446   
     34      33.673        29.998            30.047            30.185            30.542           31.379   
     35      34.694        30.931            30.979            31.118            31.476           32.312   
     36      35.714        31.866            31.913             32.05            32.407           33.246   
     37      36.735        32.799            32.848            32.985             33.34           34.182   
     38      37.755        33.733            33.782            33.921            34.276           35.118   
     39      38.776        34.694            34.718            34.856            35.211           36.054   
     40      39.796        35.714            35.714            35.792            36.145            36.99   
     41      40.816        36.651              36.7            36.735            37.082           37.929   
     42      41.837        37.587            37.636            37.755             38.02           38.865   
     43      42.857        38.523            38.573            38.712            38.957           39.805   
     44      43.878        39.457            39.508            39.648            39.894           40.816   
     45      44.898        40.391            40.441            40.585            40.832           41.788   
     46      45.918        41.328            41.379            41.519            41.836           42.727   
     47      46.939        42.266            42.316            42.455            42.816           43.665   
     48      47.959        43.204            43.254            43.393            43.754           44.601   
     49       48.98         44.14            44.191            44.332            44.693           45.539   
     50          50        45.077            45.128            45.269            45.631           46.478   
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_bisec_loop_images/figure_0.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_bisec_loop_images/figure_1.png}

Run the function and show summaries for savings and fraction of coh
saved:

\begin{verbatim}
mp_params('it_a_n') = 100;
mp_params('it_z_n') = 9;
mp_support('ls_ffcmd') = {'ap', 'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {};
mp_support('bl_vfi_store_all') = true; % store c(a,z), y(a,z)
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 18.110812 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    ap             1     1      2       900     100      9       20493      22.77     13.386     0.5879      0      48.391
    savefraccoh    2     2      2       900     100      9      701.94    0.77994    0.13136    0.16842      0     0.86927

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4        c5         c6         c7         c8         c9  
            _______    _______    _______    ______    _______    _______    _______    _______    ______

    r1            0          0          0         0          0          0    0.20716    0.89208    2.4759
    r2      0.19971    0.19144    0.18896    0.2007    0.24755    0.38215    0.61592     1.3126    2.9098
    r3      0.55145    0.54262    0.54255    0.5618    0.62321    0.77699     1.0303     1.7326    3.3477
    r4       1.0101     1.0101     1.0101    1.0101     1.0198     1.1844     1.5151     2.1613    3.7899
    r5       1.4445      1.436     1.4393    1.4657     1.5152     1.5944     1.9615     2.5895    4.2337
    r96      43.226     43.233     43.257    43.313     43.424     43.584     43.951     44.764    46.479
    r97       43.69     43.697     43.722    43.776     43.888     44.048     44.444     45.227     46.97
    r98      44.155     44.161     44.186    44.241     44.352     44.512     44.933     45.692    47.461
    r99      44.619     44.626      44.65    44.707     44.817     44.976     45.398     46.156    47.927
    r100     45.081     45.088     45.114    45.169      45.28     45.454     45.861     46.621    48.391

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7         c8         c9   
            _______    _______    _______    _______    _______    _______    _______    _______    _______

    r1            0          0          0          0          0          0    0.10085    0.28368    0.45924
    r2      0.17696    0.16018    0.14648     0.1404    0.15072    0.19253    0.23949    0.35842    0.49245
    r3      0.33498    0.31679    0.30013    0.28853     0.2885    0.31047    0.33348    0.41451    0.52092
    r4      0.46678    0.45284    0.43437    0.40981    0.38082    0.39214    0.42003    0.46007    0.54576
    r5      0.53868    0.52254    0.50624    0.49144    0.47417    0.45067    0.47554    0.49651    0.56737
    r96     0.86817    0.86713    0.86597    0.86469    0.86323    0.86054    0.85786    0.85551    0.85172
    r97     0.86845    0.86744    0.86631      0.865    0.86356    0.86091     0.8588     0.8559    0.85264
    r98     0.86875    0.86774    0.86662    0.86533     0.8639    0.86128    0.85966     0.8563    0.85352
    r99     0.86903    0.86805    0.86692    0.86567    0.86424    0.86161    0.86002     0.8567    0.85395
    r100    0.86927    0.86829     0.8672    0.86594    0.86454    0.86222    0.86036    0.85709    0.85435
\end{verbatim}

\hypertarget{test-ff_vfi_az_bisec_loop-change-interest-rate-and-discount}{%
\subsection{Test FF\_VFI\_AZ\_BISEC\_LOOP Change Interest Rate and Discount}\label{test-ff_vfi_az_bisec_loop-change-interest-rate-and-discount}}

Show only save fraction of cash on hand:

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
mp_support('ls_ffcmd') = {'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {};
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 50;
mp_params('it_z_n') = 5;
mp_params('fl_a_max') = 50;
mp_params('st_grid_type') = 'grid_powerspace';
\end{verbatim}

Solve the model with several different interest rates and discount
factor:

\begin{verbatim}
% Lower Savings Incentives
mp_params('fl_beta') = 0.80;
mp_params('fl_r') = 0.01;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 1.421696 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       250      50      5      94.272    0.37709    0.25552    0.67761      0     0.68364

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
             c1         c2         c3         c4           c5    
           _______    _______    _______    _______    __________

    r1           0          0          0          0    0.00014733
    r2           0          0          0          0    0.00014733
    r3           0          0          0          0     0.0011239
    r4           0          0          0          0     0.0011544
    r5           0          0          0          0     0.0039009
    r46    0.67805    0.67137    0.66298     0.6526       0.64094
    r47    0.67964    0.67329    0.66536     0.6555       0.64439
    r48     0.6811    0.67506    0.66752    0.65818        0.6476
    r49    0.68242    0.67671     0.6696    0.66075       0.65059
    r50    0.68364    0.67826    0.67158    0.66319       0.65336

% Higher Savings Incentives
mp_params('fl_beta') = 0.95;
mp_params('fl_r') = 0.04;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 5.579251 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       250      50      5      146.44    0.58575    0.29994    0.51206      0     0.88761

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
             c1         c2           c3           c4         c5   
           _______    _______    __________    ________    _______

    r1           0          0             0    0.086968     0.3134
    r2           0          0             0    0.086938     0.3135
    r3           0          0             0    0.086877    0.31423
    r4           0          0             0    0.091393    0.31621
    r5           0          0    0.00036095     0.10012    0.31765
    r46    0.87894     0.8773       0.87437     0.86796    0.86643
    r47    0.88136     0.8798       0.87717     0.87083    0.86933
    r48    0.88358    0.88215       0.87983     0.87348    0.87202
    r49    0.88566    0.88432        0.8823     0.87595    0.87455
    r50    0.88761    0.88633       0.88465     0.87827    0.87687
\end{verbatim}

\hypertarget{test-ff_vfi_az_bisec_loop-changing-risk-aversion}{%
\subsection{Test FF\_VFI\_AZ\_BISEC\_LOOP Changing Risk Aversion}\label{test-ff_vfi_az_bisec_loop-changing-risk-aversion}}

Here, again, show fraction of coh saved in summary tabular form, but
also show it graphically.

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
mp_support('ls_ffcmd') = {'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {'savefraccoh'};
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 100;
mp_params('it_z_n') = 5;
mp_params('fl_a_max') = 50;
mp_params('st_grid_type') = 'grid_powerspace';
\end{verbatim}

Solve the model with different risk aversion levels, higher preferences
for risk:

\begin{verbatim}
% Lower Risk Aversion
mp_params('fl_crra') = 0.5;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 9.991698 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       500     100      5      214.05    0.42811    0.27486    0.64204      0     0.74757

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4          c5   
            _______    _______    _______    _______    ________

    r1            0          0          0          0    0.023554
    r2            0          0          0          0    0.023554
    r3            0          0          0          0    0.023554
    r4            0          0          0          0    0.023615
    r5            0          0          0          0    0.024256
    r96      0.7393    0.73551    0.73109    0.72261     0.71525
    r97     0.74049    0.73805    0.73374    0.72544     0.71702
    r98      0.7429    0.74052    0.73634    0.72825      0.7187
    r99     0.74525    0.74296    0.73887      0.731     0.72032
    r100    0.74757    0.74534    0.74113    0.73371     0.72187
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_bisec_loop_images/figure_2.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_bisec_loop_images/figure_3.png}

When risk aversion increases, at every state-space point, the household
wants to save more.

\begin{verbatim}
% Higher Risk Aversion
mp_params('fl_crra') = 5;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 8.955693 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       500     100      5      323.21    0.64642    0.28954    0.44792      0     0.92356

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2          c3         c4         c5   
            _______    _______    ________    _______    _______

    r1            0          0    0.053308    0.22219    0.44872
    r2            0          0    0.053338    0.22222    0.44875
    r3            0          0    0.053644     0.2224    0.44881
    r4            0          0    0.054498    0.22286    0.44899
    r5            0          0    0.056115    0.22378    0.44936
    r96     0.91981    0.91901     0.91813    0.91575    0.91523
    r97     0.92081    0.92002     0.91914    0.91682     0.9163
    r98     0.92176      0.921     0.92014    0.91785     0.9173
    r99     0.92268    0.92194     0.92112    0.91883    0.91831
    r100    0.92356    0.92286     0.92203    0.91981    0.91926
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_bisec_loop_images/figure_4.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_bisec_loop_images/figure_5.png}

\hypertarget{test-ff_vfi_az_bisec_loop-with-higher-uncertainty}{%
\subsection{Test FF\_VFI\_AZ\_BISEC\_LOOP with Higher Uncertainty}\label{test-ff_vfi_az_bisec_loop-with-higher-uncertainty}}

Increase the standard deviation of the Shock.

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
mp_support('ls_ffcmd') = {'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {};
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 100;
mp_params('it_z_n') = 5;
mp_params('fl_a_max') = 50;
mp_params('st_grid_type') = 'grid_powerspace';
\end{verbatim}

Lower standard deviation of shock:

\begin{verbatim}
% Lower Risk Aversion
mp_params('fl_shk_std') = 0.10;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 10.016136 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       500     100      5      266.09    0.53217    0.31606    0.59389      0     0.86448

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4          c5   
            _______    _______    _______    _______    ________

    r1            0          0          0          0    0.027887
    r2            0          0          0          0    0.027887
    r3            0          0          0          0    0.027887
    r4            0          0          0          0    0.027857
    r5            0          0          0          0    0.027826
    r96     0.85941    0.85841    0.85734    0.85621     0.85218
    r97     0.86076    0.85978    0.85871    0.85764     0.85368
    r98     0.86204    0.86109    0.86008    0.85902     0.85511
    r99     0.86329    0.86234    0.86137    0.86036     0.85688
    r100    0.86448    0.86359    0.86262    0.86164     0.85862
\end{verbatim}

Higher shock standard deviation: low shock high asset save more, high
shock more asset save less, high shock low asset save more:

\begin{verbatim}
% Higher Risk Aversion
mp_params('fl_shk_std') = 0.40;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 10.186494 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       500     100      5      324.66    0.64932    0.26596    0.40959      0     0.88483

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5   
            _______    _______    _______    _______    _______

    r1            0          0          0    0.26564    0.67546
    r2            0          0          0    0.26568    0.67549
    r3            0          0          0    0.26586    0.67549
    r4            0          0          0    0.26635    0.67552
    r5            0          0          0    0.26732    0.67558
    r96     0.88071    0.87922    0.87495    0.86723    0.85859
    r97     0.88178    0.88032     0.8762    0.86826    0.86085
    r98     0.88282    0.88139    0.87739    0.86927    0.86317
    r99     0.88383    0.88212    0.87855    0.87028    0.86668
    r100    0.88483    0.88279    0.87937    0.87128    0.87003
\end{verbatim}

\hypertarget{ff_vfi_az_bisec_vec-dynamic-savings-problem-vectorized-continuous-exact}{%
\section{FF\_VFI\_AZ\_BISEC\_VEC Dynamic Savings Problem Vectorized Continuous Exact}\label{ff_vfi_az_bisec_vec-dynamic-savings-problem-vectorized-continuous-exact}}

\begin{quote}
Go back to \href{http://fanwangecon.github.io/}{fan}'s \href{https://fanwangecon.github.io/MEconTools/}{MEconTools} Toolbox (\href{https://fanwangecon.github.io/MEconTools/bookdown}{bookdown}), \href{https://fanwangecon.github.io/M4Econ/}{Matlab Code Examples} Repository (\href{https://fanwangecon.github.io/M4Econ/bookdown}{bookdown}), or \href{https://fanwangecon.github.io/Math4Econ/}{Math for Econ with Matlab} Repository (\href{https://fanwangecon.github.io/Math4Econ/bookdown}{bookdown}).
\end{quote}

This is the example vignette for function:
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_vec.m}{\textbf{ff\_vfi\_az\_bisec\_vec}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} This function
solves the dynamic programming problem for a (a,z) model. Households can
save a, and face AR(1) shock z. The problem is solved over the infinite
horizon. This is a vectorized code, it is much faster for larger
state-space problems then looped code.

The code uses continuous choices, solved with bi(multi)section. The
state-space is on a grid, but choice grids are in terms of percentage of
resources available, which is individual specific, to save and solved
exactly up to ((1/(2)\^{}16)*100=0.001525878) percentage of cash on hand.
THe
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_vec.m}{\textbf{ff\_vfi\_az\_vec}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}} solves the same
problem using vectorized common grid code where the choice set and state
space share the same grid.

This is the vectorized code, its speed is much faster than the looped
code. The function is designed to have small memory footprint and
requires low computing resources, yet is fast.

\textbf{Links to Four Code:}

Four Core Savings/Borrowing Dynamic Programming Solution Functions that
are functions in the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} :

\begin{itemize}
\item
  Common Choice and States Grid :
  \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_loop.m}{\textbf{ff\_vfi\_az\_loop}},
  slow should use for testing new models
\item
  Common Choice and States Grid :
  \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_vec.m}{\textbf{ff\_vfi\_az\_vec}},
  fast good for many purposes
\item
  States Grid + Continuous Exact Savings as Share of Cash-on-Hand :\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_loop.m}{\textbf{ff\_vfi\_az\_bisec\_loop}},
  high precision even with small grid
\item
  States Grid + Continuous Exact Savings as Share of Cash-on-Hand :
  \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_vec.m}{\textbf{ff\_vfi\_az\_bisec\_vec}},
  precision and speed
\end{itemize}

\hypertarget{test-ff_vfi_az_bisec_vec-defaults}{%
\subsection{Test FF\_VFI\_AZ\_BISEC\_VEC Defaults}\label{test-ff_vfi_az_bisec_vec-defaults}}

Call the function with defaults. By default, shows the asset policy
function summary. Model parameters can be changed by the mp\_params.

\begin{verbatim}
%mp_params
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('fl_crra') = 1.5;
mp_params('fl_beta') = 0.94;
% call function
ff_vfi_az_bisec_vec(mp_params);

Elapsed time is 0.341348 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
          i    idx    ndim    numel    rowN    colN     sum      mean      std      coefvari    min     max  
          _    ___    ____    _____    ____    ____    _____    ______    ______    ________    ___    ______

    ap    1     1      2       700     100      7      15835    22.621    13.367    0.59091      0     47.273

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7  
            _______    _______    _______    _______    _______    _______    ______

    r1            0          0          0          0          0    0.38021    1.4609
    r2      0.19477    0.18872    0.19731    0.24709    0.41492    0.79311    1.8893
    r3      0.54595    0.54109    0.55664    0.62239    0.81173     1.2132    2.3195
    r4       1.0101     1.0101     1.0101     1.0189     1.2217     1.6363    2.7464
    r5       1.4388     1.4362      1.459     1.5151     1.6354     2.0602    3.1804
    r96      43.225     43.246       43.3     43.422     43.632     44.155    45.413
    r97       43.69      43.71     43.765     43.887     44.096     44.618    45.879
    r98      44.154     44.174     44.228     44.352     44.559     45.083    46.344
    r99      44.618     44.638     44.693     44.815     45.024     45.548    46.809
    r100      45.08     45.101     45.156      45.28     45.487     46.012    47.273
\end{verbatim}

\hypertarget{test-ff_vfi_az_bisec_vec-speed-tests-1}{%
\subsection{Test FF\_VFI\_AZ\_BISEC\_VEC Speed Tests}\label{test-ff_vfi_az_bisec_vec-speed-tests-1}}

Call the function with defaults. By default, shows the asset policy
function summary. Model parameters can be changed by the mp\_params.

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_timer') = true;
mp_support('ls_ffcmd') = {};
\end{verbatim}

A grid 50, shock grid 5:

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 50;
mp_params('it_z_n') = 5;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 0.188450 seconds.
\end{verbatim}

A grid 750, shock grid 15:

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 750;
mp_params('it_z_n') = 15;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 12.017243 seconds.
\end{verbatim}

A grid 600, shock grid 45:

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 600;
mp_params('it_z_n') = 45;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 22.719622 seconds.
\end{verbatim}

\hypertarget{test-ff_vfi_az_bisec_vec-control-outputs}{%
\subsection{Test FF\_VFI\_AZ\_BISEC\_VEC Control Outputs}\label{test-ff_vfi_az_bisec_vec-control-outputs}}

Run the function first without any outputs;

\begin{verbatim}
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 50;
mp_params('it_z_n') = 5;
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_timer') = false;
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
\end{verbatim}

Run the function and show policy function for savings choice. For
ls\_ffcmd, ls\_ffsna, ls\_ffgrh, can include these: `v', `ap', `c', `y',
`coh', `savefraccoh'. These are value, aprime savings choice,
consumption, income, cash on hand, and savings fraction as cash-on-hand.

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
% ls_ffcmd: summary print which outcomes
mp_support('ls_ffcmd') = {};
% ls_ffsna: detail print which outcomes
mp_support('ls_ffsna') = {'savefraccoh'};
% ls_ffgrh: graphical print which outcomes
mp_support('ls_ffgrh') = {'savefraccoh'};
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 0.160923 seconds.
xxx  ff_vfi_az_vec, outcome=savefraccoh  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group      a       mean_z_0_54195    mean_z_0_66401    mean_z_0_88162    mean_z_1_3095    mean_z_2_2745
    _____    ______    ______________    ______________    ______________    _____________    _____________

      1           0             0                 0                 0                 0          0.24358   
      2      1.0204       0.33724           0.31063           0.29793           0.32952           0.3998   
      3      2.0408       0.49626           0.47337            0.4572           0.46446          0.49318   
      4      3.0612       0.57912           0.56065            0.5457           0.54484          0.55559   
      5      4.0816       0.63096           0.61577           0.60252           0.59846          0.60036   
      6       5.102       0.68907           0.67137           0.64222           0.63694          0.63377   
      7      6.1224       0.71595            0.7043            0.6891           0.66563          0.66642   
      8      7.1429       0.73066           0.72084           0.71144           0.68766          0.69337   
      9      8.1633       0.74391           0.73503           0.72618           0.71119          0.70921   
     10      9.1837       0.75538           0.74739           0.73918           0.73335          0.72236   
     11      10.204        0.7653           0.75798           0.75032           0.74412          0.73381   
     12      11.224       0.77394           0.76719           0.75999           0.75367          0.74403   
     13      12.245       0.78147           0.77525           0.76847           0.76231          0.75306   
     14      13.265       0.78816           0.78233           0.77598           0.77006          0.76115   
     15      14.286       0.79841           0.79035           0.78266           0.77699          0.76838   
     16      15.306       0.80723           0.80201            0.7888           0.78321          0.77488   
     17      16.327       0.81135            0.8065           0.79972           0.78883          0.78077   
     18      17.347       0.81474           0.81031           0.80534           0.79386          0.78904   
     19      18.367       0.81815           0.81388           0.80918           0.79841          0.79634   
     20      19.388       0.82121           0.81715            0.8126             0.805          0.80027   
     21      20.408       0.82414           0.82026           0.81596           0.81172          0.80393   
     22      21.429       0.82685           0.82313           0.81898           0.81492          0.80732   
     23      22.449       0.82938           0.82584           0.82182           0.81776          0.81053   
     24      23.469       0.83177           0.82838            0.8245            0.8205          0.81352   
     25       24.49       0.83399           0.83073             0.827            0.8231          0.81635   
     26       25.51       0.83634           0.83296           0.82935           0.82554          0.81901   
     27      26.531       0.84156           0.83689           0.83155           0.82786          0.82151   
     28      27.551       0.84394           0.84098            0.8339           0.83003          0.82389   
     29      28.571       0.84553           0.84266           0.83875            0.8321          0.82612   
     30      29.592       0.84693           0.84425           0.84107           0.83405          0.82877   
     31      30.612       0.84821           0.84562           0.84266           0.83589          0.83326   
     32      31.633       0.84956           0.84699           0.84409           0.83787          0.83527   
     33      32.653       0.85084           0.84837           0.84547           0.84199          0.83686   
     34      33.673         0.852           0.84962           0.84684           0.84391          0.83842   
     35      34.694       0.85316           0.85081           0.84815           0.84528          0.83988   
     36      35.714       0.85429             0.852           0.84934            0.8465          0.84129   
     37      36.735       0.85532           0.85313           0.85053           0.84773          0.84266   
     38      37.755       0.85633            0.8542           0.85169           0.84895          0.84397   
     39      38.776       0.85795           0.85523           0.85279           0.85008          0.84522   
     40      39.796       0.86091           0.85767           0.85383           0.85114          0.84641   
     41      40.816       0.86176           0.85975           0.85499           0.85221           0.8476   
     42      41.837       0.86256            0.8606           0.85786           0.85325           0.8487   
     43      42.857       0.86332           0.86143           0.85917           0.85423           0.8498   
     44      43.878       0.86399           0.86216           0.85999           0.85517          0.85236   
     45      44.898       0.86463           0.86283           0.86079           0.85609          0.85401   
     46      45.918       0.86533           0.86356           0.86149           0.85831          0.85493   
     47      46.939       0.86601           0.86427           0.86219           0.85996          0.85578   
     48      47.959       0.86665           0.86494           0.86292           0.86073          0.85658   
     49       48.98       0.86723           0.86558           0.86362           0.86146          0.85737   
     50          50       0.86781           0.86619           0.86427           0.86216          0.85813   
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_bisec_vec_images/figure_0.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_bisec_vec_images/figure_1.png}

Run the function and show summaries for savings and fraction of coh
saved:

\begin{verbatim}
mp_params('it_a_n') = 100;
mp_params('it_z_n') = 9;
mp_support('ls_ffcmd') = {'ap', 'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {};
mp_support('bl_vfi_store_all') = true; % store c(a,z), y(a,z)
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 0.443544 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    ap             1     1      2       900     100      9       20493      22.77     13.386     0.5879      0      48.391
    savefraccoh    2     2      2       900     100      9      701.94    0.77994    0.13136    0.16842      0     0.86927

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4        c5         c6         c7         c8         c9  
            _______    _______    _______    ______    _______    _______    _______    _______    ______

    r1            0          0          0         0          0          0    0.20716    0.89208    2.4759
    r2      0.19971    0.19144    0.18896    0.2007    0.24755    0.38215    0.61592     1.3126    2.9098
    r3      0.55145    0.54262    0.54255    0.5618    0.62321    0.77699     1.0303     1.7326    3.3477
    r4       1.0101     1.0101     1.0101    1.0101     1.0198     1.1844     1.5151     2.1613    3.7899
    r5       1.4445      1.436     1.4393    1.4657     1.5152     1.5944     1.9615     2.5895    4.2337
    r96      43.226     43.233     43.257    43.313     43.424     43.584     43.951     44.764    46.479
    r97       43.69     43.697     43.722    43.776     43.888     44.048     44.444     45.227     46.97
    r98      44.155     44.161     44.186    44.241     44.352     44.512     44.933     45.692    47.461
    r99      44.619     44.626      44.65    44.707     44.817     44.976     45.398     46.156    47.927
    r100     45.081     45.088     45.114    45.169      45.28     45.454     45.861     46.621    48.391

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7         c8         c9   
            _______    _______    _______    _______    _______    _______    _______    _______    _______

    r1            0          0          0          0          0          0    0.10085    0.28368    0.45924
    r2      0.17696    0.16018    0.14648     0.1404    0.15072    0.19253    0.23949    0.35842    0.49245
    r3      0.33498    0.31679    0.30013    0.28853     0.2885    0.31047    0.33348    0.41451    0.52092
    r4      0.46678    0.45284    0.43437    0.40981    0.38082    0.39214    0.42003    0.46007    0.54576
    r5      0.53868    0.52254    0.50624    0.49144    0.47417    0.45067    0.47554    0.49651    0.56737
    r96     0.86817    0.86713    0.86597    0.86469    0.86323    0.86054    0.85786    0.85551    0.85172
    r97     0.86845    0.86744    0.86631      0.865    0.86356    0.86091     0.8588     0.8559    0.85264
    r98     0.86875    0.86774    0.86662    0.86533     0.8639    0.86128    0.85966     0.8563    0.85352
    r99     0.86903    0.86805    0.86692    0.86567    0.86424    0.86161    0.86002     0.8567    0.85395
    r100    0.86927    0.86829     0.8672    0.86594    0.86454    0.86222    0.86036    0.85709    0.85435
\end{verbatim}

\hypertarget{test-ff_vfi_az_bisec_vec-change-interest-rate-and-discount}{%
\subsection{Test FF\_VFI\_AZ\_BISEC\_VEC Change Interest Rate and Discount}\label{test-ff_vfi_az_bisec_vec-change-interest-rate-and-discount}}

Show only save fraction of cash on hand:

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
mp_support('ls_ffcmd') = {'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {};
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 750;
mp_params('it_z_n') = 9;
mp_params('fl_a_max') = 50;
mp_params('st_grid_type') = 'grid_powerspace';
\end{verbatim}

Solve the model with several different interest rates and discount
factor:

\begin{verbatim}
% Lower Savings Incentives
mp_params('fl_beta') = 0.80;
mp_params('fl_r') = 0.01;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 2.064615 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min     max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    ______

    savefraccoh    1     1      2      6750     750      9      2573.6    0.38127    0.24694    0.64767      0     0.6869

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7          c8         c9   
            _______    _______    _______    _______    _______    _______    _______    ________    _______

    r1            0          0          0          0          0          0          0    0.014734    0.11626
    r2            0          0          0          0          0          0          0    0.014734    0.11626
    r3            0          0          0          0          0          0          0    0.014734    0.11626
    r4            0          0          0          0          0          0          0    0.014734    0.11626
    r5            0          0          0          0          0          0          0    0.014734    0.11626
    r746    0.68623    0.68354    0.68095    0.67686    0.67308    0.66722    0.66044     0.65098    0.63987
    r747    0.68663    0.68364    0.68119    0.67698     0.6732    0.66734    0.66063     0.65117    0.64009
    r748    0.68675     0.6837    0.68129    0.67711    0.67332    0.66749    0.66078     0.65138    0.64027
    r749    0.68681    0.68379    0.68141     0.6772    0.67344    0.66764    0.66096     0.65184    0.64048
    r750     0.6869    0.68385     0.6815    0.67759    0.67357    0.66777    0.66111     0.65233     0.6407

% Higher Savings Incentives
mp_params('fl_beta') = 0.95;
mp_params('fl_r') = 0.04;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 8.355503 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      4047.5    0.59963    0.28766    0.47974      0     0.88682

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5          c6         c7         c8         c9   
            _______    _______    _______    _______    _______    ________    _______    _______    _______

    r1            0          0          0          0          0    0.046381    0.17205    0.33791    0.51164
    r2            0          0          0          0          0    0.046381    0.17205    0.33791    0.51164
    r3            0          0          0          0          0    0.046381    0.17205    0.33791    0.51164
    r4            0          0          0          0          0    0.046381    0.17205    0.33791    0.51164
    r5            0          0          0          0          0    0.046381    0.17205    0.33791    0.51164
    r746    0.88633    0.88548    0.88435    0.88337    0.88194     0.88041    0.87852    0.87629    0.87345
    r747    0.88645     0.8856    0.88447    0.88349    0.88206     0.88053    0.87867    0.87644    0.87373
    r748    0.88657    0.88575    0.88459    0.88361    0.88221     0.88068    0.87882    0.87659    0.87406
    r749     0.8867    0.88587    0.88474    0.88377    0.88233     0.88084    0.87897    0.87675    0.87437
    r750    0.88682    0.88599    0.88486    0.88389    0.88248     0.88096     0.8791     0.8769    0.87482
\end{verbatim}

\hypertarget{test-ff_vfi_az_bisec_vec-changing-risk-aversion}{%
\subsection{Test FF\_VFI\_AZ\_BISEC\_VEC Changing Risk Aversion}\label{test-ff_vfi_az_bisec_vec-changing-risk-aversion}}

Here, again, show fraction of coh saved in summary tabular form, but
also show it graphically.

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
mp_support('ls_ffcmd') = {'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {'savefraccoh'};
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 750;
mp_params('it_z_n') = 9;
mp_params('fl_a_max') = 50;
mp_params('st_grid_type') = 'grid_powerspace';
\end{verbatim}

Solve the model with different risk aversion levels, higher preferences
for risk:

\begin{verbatim}
% Lower Risk Aversion
mp_params('fl_crra') = 0.5;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 6.947134 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      2940.8    0.43567    0.26675    0.61228      0     0.74983

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7          c8         c9   
            _______    _______    _______    _______    _______    _______    _______    ________    _______

    r1            0          0          0          0          0          0          0    0.040155    0.17657
    r2            0          0          0          0          0          0          0    0.040155    0.17657
    r3            0          0          0          0          0          0          0    0.040155    0.17657
    r4            0          0          0          0          0          0          0    0.040155    0.17657
    r5            0          0          0          0          0          0          0    0.040155    0.17657
    r746    0.74928    0.74699    0.74427    0.74165    0.73826    0.73371    0.72828     0.72074    0.71244
    r747    0.74949    0.74711     0.7444    0.74195    0.73844    0.73405    0.72847     0.72096    0.71266
    r748    0.74958    0.74723    0.74452    0.74226     0.7386    0.73432    0.72865     0.72117    0.71287
    r749    0.74971    0.74736    0.74467    0.74241    0.73875    0.73451    0.72883     0.72139    0.71308
    r750    0.74983    0.74748    0.74491    0.74253     0.7389    0.73466    0.72905     0.72178     0.7133
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_bisec_vec_images/figure_2.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_bisec_vec_images/figure_3.png}

When risk aversion increases, at every state-space point, the household
wants to save more.

\begin{verbatim}
% Higher Risk Aversion
mp_params('fl_crra') = 5;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 6.425400 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN    sum      mean       std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ____    _______    ______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      4449    0.65911    0.2826    0.42876      0     0.92387

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7         c8         c9   
            _______    _______    _______    _______    _______    _______    _______    _______    _______

    r1            0          0          0          0    0.05282    0.16466    0.31347    0.47728    0.63304
    r2            0          0          0          0    0.05282    0.16466    0.31347    0.47728    0.63304
    r3            0          0          0          0    0.05282    0.16466    0.31347    0.47728    0.63304
    r4            0          0          0          0    0.05282    0.16466    0.31347    0.47728    0.63304
    r5            0          0          0          0    0.05282    0.16466    0.31347    0.47728    0.63304
    r746    0.92341    0.92298    0.92249    0.92176    0.92097     0.9202     0.9191    0.91825    0.91926
    r747    0.92353     0.9231    0.92261    0.92188    0.92109    0.92033    0.91923     0.9184    0.91956
    r748    0.92365    0.92319    0.92271      0.922    0.92121    0.92045    0.91935    0.91852    0.91987
    r749    0.92377    0.92332    0.92283    0.92213    0.92133    0.92057     0.9195    0.91868    0.92014
    r750    0.92387    0.92344    0.92295    0.92225    0.92145    0.92069    0.91962     0.9188    0.92045
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_bisec_vec_images/figure_4.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_vfi_az_bisec_vec_images/figure_5.png}

\hypertarget{test-ff_vfi_az_bisec_vec-with-higher-uncertainty}{%
\subsection{Test FF\_VFI\_AZ\_BISEC\_VEC with Higher Uncertainty}\label{test-ff_vfi_az_bisec_vec-with-higher-uncertainty}}

Increase the standard deviation of the Shock.

\begin{verbatim}
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_print_params') = false;
mp_support('bl_print_iterinfo') = false;
mp_support('ls_ffcmd') = {'savefraccoh'};
mp_support('ls_ffsna') = {};
mp_support('ls_ffgrh') = {};
mp_params = containers.Map('KeyType','char', 'ValueType','any');
mp_params('it_a_n') = 750;
mp_params('it_z_n') = 9;
mp_params('fl_a_max') = 50;
mp_params('st_grid_type') = 'grid_powerspace';
\end{verbatim}

Lower standard deviation of shock:

\begin{verbatim}
% Lower Risk Aversion
mp_params('fl_shk_std') = 0.10;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 6.784360 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      3617.7    0.53596    0.31083    0.57996      0     0.86482

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7          c8          c9   
            _______    _______    _______    _______    _______    _______    _______    ________    ________

    r1            0          0          0          0          0          0          0    0.034876    0.095147
    r2            0          0          0          0          0          0          0    0.034876    0.095147
    r3            0          0          0          0          0          0          0    0.034876    0.095147
    r4            0          0          0          0          0          0          0    0.034876    0.095147
    r5            0          0          0          0          0          0          0    0.034876    0.095147
    r746     0.8642    0.86359    0.86295    0.86192    0.86124     0.8603    0.85944     0.85835     0.85694
    r747    0.86436    0.86375    0.86314     0.8621     0.8614    0.86048     0.8596     0.85853     0.85712
    r748    0.86451     0.8639    0.86329    0.86225    0.86158     0.8607    0.85978     0.85871     0.85731
    r749    0.86466    0.86408    0.86344    0.86243    0.86173    0.86091    0.85996     0.85886     0.85755
    r750    0.86482    0.86424    0.86359    0.86259    0.86192    0.86112    0.86012     0.85905     0.85783
\end{verbatim}

Higher shock standard deviation: low shock high asset save more, high
shock more asset save less, high shock low asset save more:

\begin{verbatim}
% Higher Risk Aversion
mp_params('fl_shk_std') = 0.40;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 7.804664 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean       std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    ______    _______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      4755.4    0.7045    0.26237    0.37241      0     0.95142

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7         c8         c9   
            _______    _______    _______    _______    _______    _______    _______    _______    _______

    r1            0          0          0          0          0      0.152    0.44643    0.71928    0.92841
    r2            0          0          0          0          0      0.152    0.44643    0.71928    0.92841
    r3            0          0          0          0          0      0.152    0.44643    0.71928    0.92841
    r4            0          0          0          0          0      0.152    0.44643    0.71928    0.92841
    r5            0          0          0          0          0      0.152    0.44643    0.71928    0.92841
    r746     0.8914    0.89054    0.88944    0.88798    0.88599    0.88279    0.87788    0.87836    0.95118
    r747    0.89146     0.8906     0.8895    0.88807    0.88609    0.88288      0.878    0.87879    0.95124
    r748    0.89152    0.89066    0.88956    0.88813    0.88615    0.88297    0.87812    0.87919     0.9513
    r749    0.89158    0.89072    0.88963    0.88819    0.88624    0.88306    0.87824    0.87962    0.95136
    r750    0.89164    0.89079    0.88972    0.88828     0.8863    0.88316    0.87833    0.88001    0.95142
\end{verbatim}

\hypertarget{summarize-policy-and-value}{%
\chapter{Summarize Policy and Value}\label{summarize-policy-and-value}}

\hypertarget{ff_summ_nd_array-examples}{%
\section{FF\_SUMM\_ND\_ARRAY Examples}\label{ff_summ_nd_array-examples}}

\begin{quote}
Go back to \href{http://fanwangecon.github.io/}{fan}'s \href{https://fanwangecon.github.io/MEconTools/}{MEconTools} Toolbox (\href{https://fanwangecon.github.io/MEconTools/bookdown}{bookdown}), \href{https://fanwangecon.github.io/M4Econ/}{Matlab Code Examples} Repository (\href{https://fanwangecon.github.io/M4Econ/bookdown}{bookdown}), or \href{https://fanwangecon.github.io/Math4Econ/}{Math for Econ with Matlab} Repository (\href{https://fanwangecon.github.io/Math4Econ/bookdown}{bookdown}).
\end{quote}

This is the example vignette for function:
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/summ/ff_summ_nd_array.m}{\textbf{ff\_summ\_nd\_array}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} This function
summarizes policy and value functions over states.

\hypertarget{test-ff_summ_nd_array-defaults}{%
\subsection{Test FF\_SUMM\_ND\_ARRAY Defaults}\label{test-ff_summ_nd_array-defaults}}

Call the function with defaults.

\begin{verbatim}
ff_summ_nd_array();

xxx  Summ over (a,z), condi age as cols, kids/marriage as rows  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    marry    kids    mean_age_18    mean_age_19    mean_age_20    mean_age_21
    _____    _____    ____    ___________    ___________    ___________    ___________

      1        0       1        0.52456        0.51689        0.48412        0.54526  
      2        1       1        0.49355        0.52906         0.5583        0.47342  
      3        0       2        0.49085        0.51315        0.45158        0.43201  
      4        1       2        0.58096        0.50596        0.47985        0.58791  
      5        0       3        0.57811         0.6068        0.55221        0.50677  
      6        1       3        0.53023        0.49258        0.48728        0.43352  
      7        0       4        0.50339        0.48449        0.53618        0.45993  
      8        1       4        0.44418         0.5223        0.55657        0.48583  
\end{verbatim}

\hypertarget{test-ff_summ_nd_array-with-random-2-dimensional-matrix}{%
\subsection{Test FF\_SUMM\_ND\_ARRAY with Random 2 Dimensional Matrix}\label{test-ff_summ_nd_array-with-random-2-dimensional-matrix}}

Summarize over 6 dimensional array, iteratively change how many
dimensions to group over.

First, generate matrix:

\begin{verbatim}
st_title = "Random 2D dimensional Array Testing Summarizing";
rng(123)
mn_polval = rand(5,4);
bl_print_table = true;
ar_st_stats = ["mean"];
cl_mp_datasetdesc = {};
cl_mp_datasetdesc{1} = containers.Map({'name', 'labval'}, ...
    {'a', linspace(0,1,size(mn_polval,1))});
cl_mp_datasetdesc{2} = containers.Map({'name', 'labval'}, ...
    {'z', linspace(-1,1,size(mn_polval,2))});
disp(mn_polval);

    0.6965    0.4231    0.3432    0.7380
    0.2861    0.9808    0.7290    0.1825
    0.2269    0.6848    0.4386    0.1755
    0.5513    0.4809    0.0597    0.5316
    0.7195    0.3921    0.3980    0.5318
\end{verbatim}

Second, show the entire matrix (no labels):

\begin{verbatim}
it_aggd = 0; 
bl_row = 1; 
ff_summ_nd_array(st_title, mn_polval, bl_print_table, ar_st_stats, it_aggd, bl_row);

xxx  Random 2D dimensional Array Testing Summarizing  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    vardim2    mean_vardim1_1    mean_vardim1_2    mean_vardim1_3    mean_vardim1_4    mean_vardim1_5
    _____    _______    ______________    ______________    ______________    ______________    ______________

      1         1          0.69647           0.28614           0.22685            0.55131          0.71947    
      2         2          0.42311           0.98076           0.68483            0.48093          0.39212    
      3         3          0.34318           0.72905           0.43857           0.059678          0.39804    
      4         4            0.738           0.18249           0.17545            0.53155          0.53183    
\end{verbatim}

Third, rotate row and column, and now with labels:

\begin{verbatim}
it_aggd = 0; 
bl_row = 1; 
ar_permute = [2,1];
ff_summ_nd_array(st_title, mn_polval, bl_print_table, ar_st_stats, it_aggd, bl_row, ...
    cl_mp_datasetdesc, ar_permute);

xxx  Random 2D dimensional Array Testing Summarizing  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     a      mean_z__1    mean_z__0_33333    mean_z_0_33333    mean_z_1
    _____    ____    _________    _______________    ______________    ________

      1         0     0.69647         0.42311            0.34318         0.738 
      2      0.25     0.28614         0.98076            0.72905       0.18249 
      3       0.5     0.22685         0.68483            0.43857       0.17545 
      4      0.75     0.55131         0.48093           0.059678       0.53155 
      5         1     0.71947         0.39212            0.39804       0.53183 
\end{verbatim}

Fourth, dimension one as columns, average over dim 2:

\begin{verbatim}
it_aggd = 1; 
bl_row = 1; 
ff_summ_nd_array(st_title, mn_polval, bl_print_table, ar_st_stats, it_aggd, bl_row, ...
    cl_mp_datasetdesc);

xxx  Random 2D dimensional Array Testing Summarizing  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    x    mean_z__1    mean_z__0_33333    mean_z_0_33333    mean_z_1
    _____    _    _________    _______________    ______________    ________

      1      1     0.49605         0.59235            0.3937        0.43186 
\end{verbatim}

Fifth, dimension one as rows, average over dim 2:

\begin{verbatim}
it_aggd = 1; 
bl_row = 0; 
ff_summ_nd_array(st_title, mn_polval, bl_print_table, ar_st_stats, it_aggd, bl_row, ...
    cl_mp_datasetdesc);

xxx  Random 2D dimensional Array Testing Summarizing  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group       z         sum       mean        std      coefvari      min         max  
    _____    ________    ______    _______    _______    ________    ________    _______

      1            -1    2.4802    0.49605    0.22895     2.1666      0.22685    0.71947
      2      -0.33333    2.9617    0.59235    0.24524     2.4154      0.39212    0.98076
      3       0.33333    1.9685     0.3937    0.23907     1.6468     0.059678    0.72905
      4             1    2.1593    0.43186    0.24575     1.7573      0.17545      0.738
\end{verbatim}

Sixth, dimension two as rows, average over dim 1:

\begin{verbatim}
ar_permute = [2,1];
it_aggd = 1; 
bl_row = 0; 
ff_summ_nd_array(st_title, mn_polval, bl_print_table, ar_st_stats, it_aggd, bl_row, ...
    cl_mp_datasetdesc, ar_permute);

xxx  Random 2D dimensional Array Testing Summarizing  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     a       sum       mean        std      coefvari      min         max  
    _____    ____    ______    _______    _______    ________    ________    _______

      1         0    2.2007    0.55019    0.19636     2.8019      0.34318      0.738
      2      0.25    2.1784    0.54461    0.37514     1.4518      0.18249    0.98076
      3       0.5    1.5257    0.38143    0.23212     1.6432      0.17545    0.68483
      4      0.75    1.6235    0.40587    0.23269     1.7443     0.059678    0.55131
      5         1    2.0415    0.51036    0.15361     3.3226      0.39212    0.71947
\end{verbatim}

\hypertarget{test-ff_summ_nd_array-with-random-6-dimensional-matrix}{%
\subsection{Test FF\_SUMM\_ND\_ARRAY with Random 6 Dimensional Matrix}\label{test-ff_summ_nd_array-with-random-6-dimensional-matrix}}

Summarize over 6 dimensional array, iteratively change how many
dimensions to group over.

First, generate matrix:

\begin{verbatim}
st_title = "Random ND dimensional Array Testing Summarizing";
rng(123)
mn_polval = rand(8,7,6,5,4,3);
bl_print_table = true;
ar_st_stats = ["mean"];
\end{verbatim}

Second, summarize over the first four dimensions, row group others:

\begin{verbatim}
it_aggd = 4; 
bl_row = 0; 
ff_summ_nd_array(st_title, mn_polval, bl_print_table, ar_st_stats, it_aggd, bl_row);

xxx  Random ND dimensional Array Testing Summarizing  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    vardim5    vardim6     sum       mean        std      coefvari       min          max  
    _____    _______    _______    ______    _______    _______    ________    __________    _______

      1         1          1       836.78    0.49808    0.29255     1.7026     8.1888e-05    0.99964
      2         2          1       842.15    0.50128    0.28968     1.7305     6.7838e-05    0.99936
      3         3          1       831.45    0.49491    0.28851     1.7154     0.00091373    0.99989
      4         4          1        843.9    0.50232    0.28154     1.7842     0.00012471    0.99731
      5         1          2       838.99     0.4994     0.2911     1.7156     0.00029749    0.99938
      6         2          2       830.81    0.49453    0.28634     1.7271     0.00027113     0.9992
      7         3          2       832.59    0.49559    0.28682     1.7279     0.00035994    0.99936
      8         4          2       820.42    0.48835    0.29032     1.6821     0.00096259    0.99896
      9         1          3       870.56    0.51819    0.29111     1.7801      0.0010616    0.99951
     10         2          3       854.68    0.50874    0.28458     1.7877       0.001884    0.99965
     11         3          3       838.29    0.49898     0.2891      1.726      0.0019192    0.99945
     12         4          3       842.83    0.50169     0.2877     1.7438     0.00016871    0.99963
\end{verbatim}

Third, summarize over the first four dimensions, column group 5th, and
row group others:

\begin{verbatim}
it_aggd = 4; 
bl_row = 1; 
ff_summ_nd_array(st_title, mn_polval, bl_print_table, ["sum"], it_aggd, bl_row);

xxx  Random ND dimensional Array Testing Summarizing  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    vardim6    sum_vardim5_1    sum_vardim5_2    sum_vardim5_3    sum_vardim5_4
    _____    _______    _____________    _____________    _____________    _____________

      1         1          836.78           842.15           831.45            843.9    
      2         2          838.99           830.81           832.59           820.42    
      3         3          870.56           854.68           838.29           842.83    
\end{verbatim}

Fourth, summarize over the first five dimensions, column group 6th, no
row groups:

\begin{verbatim}
it_aggd = 5;
bl_row = 1; 
ff_summ_nd_array(st_title, mn_polval, bl_print_table, ["mean", "std"], it_aggd, bl_row);

xxx  Random ND dimensional Array Testing Summarizing  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    x    mean_vardim6_1    mean_vardim6_2    mean_vardim6_3    std_vardim6_1    std_vardim6_2    std_vardim6_3
    _____    _    ______________    ______________    ______________    _____________    _____________    _____________

      1      1       0.49915           0.49447            0.5069           0.28805          0.28862          0.28816   
\end{verbatim}

Fifth, summarize over all six dimensions, summary statistics over the
entire dataframe:

\begin{verbatim}
it_aggd = 6;
bl_row = 0; 
ff_summ_nd_array(st_title, mn_polval, bl_print_table, ar_st_stats, it_aggd, bl_row);

xxx  Random ND dimensional Array Testing Summarizing  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    x     sum      mean        std      coefvari       min          max  
    _____    _    _____    _______    _______    ________    __________    _______

      1      1    10083    0.50017    0.28831     1.7349     6.7838e-05    0.99989
\end{verbatim}

\hypertarget{test-ff_summ_nd_array-with-random-7-dimensional-matrix-with-all-parameters}{%
\subsection{Test FF\_SUMM\_ND\_ARRAY with Random 7 Dimensional Matrix with All Parameters}\label{test-ff_summ_nd_array-with-random-7-dimensional-matrix-with-all-parameters}}

Given a random seven dimensional matrix, average over the 2nd, 4th and
5th dimensionals. Show as row groups the 3, 6 and 7th dimensions, and
row groups the 1st dimension. Show Coefficient of Variation only.

\begin{verbatim}
st_title = "avg VALUE 2+4+5th dims. groups 3+6+7th dims, and row groups the 1st dim.";
rng(123)
mn_polval = rand(3,10,2,10,10,2,3);
ar_permute = [2,4,5,1,3,6,7];
bl_print_table = true;
ar_st_stats = ["coefvari"];
it_aggd = 3; % mean over 3 dims
bl_row = 1; % one var for row group
cl_mp_datasetdesc = {};
cl_mp_datasetdesc{1} = containers.Map({'name', 'labval'}, ...
    {'age', [18, 19, 20]});
cl_mp_datasetdesc{2} = containers.Map({'name', 'labval'}, ...
    {'savings', linspace(0,1,10)});
cl_mp_datasetdesc{3} = containers.Map({'name', 'labval'}, ...
    {'borrsave', [-1,+1]});
cl_mp_datasetdesc{4} = containers.Map({'name', 'labval'}, ...
    {'shocka', linspace(-5,5,10)});
cl_mp_datasetdesc{5} = containers.Map({'name', 'labval'}, ...
    {'shockb', linspace(-5,5,10)});
cl_mp_datasetdesc{6} = containers.Map({'name', 'labval'}, ...
    {'marry', [0,1]});
cl_mp_datasetdesc{7} = containers.Map({'name', 'labval'}, ...
    {'region', [1,2,3]});
% call function
ff_summ_nd_array(st_title, mn_polval, bl_print_table, ar_st_stats, it_aggd, bl_row, cl_mp_datasetdesc, ar_permute);

xxx  avg VALUE 2+4+5th dims. groups 3+6+7th dims, and row groups the 1st dim.  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    borrsave    marry    region    cv_age_18    cv_age_19    cv_age_20
    _____    ________    _____    ______    _________    _________    _________

      1         -1         0        1        1.7607       1.7534       1.7065  
      2          1         0        1        1.6566       1.7501       1.7042  
      3         -1         1        1        1.6608       1.7658       1.7291  
      4          1         1        1         1.756       1.7479       1.7606  
      5         -1         0        2        1.7314       1.7506        1.786  
      6          1         0        2        1.7347        1.728        1.738  
      7         -1         1        2        1.7811        1.755       1.7568  
      8          1         1        2        1.7445       1.7398       1.7746  
      9         -1         0        3        1.7025       1.7286         1.69  
     10          1         0        3          1.74       1.7549       1.7356  
     11         -1         1        3        1.7147       1.7287       1.7341  
     12          1         1        3        1.7919       1.7313       1.7452  
\end{verbatim}

\vspace{1em}

\hypertarget{distributional-analysis}{%
\chapter{Distributional Analysis}\label{distributional-analysis}}

\hypertarget{ff_simu_stats-examples}{%
\section{FF\_SIMU\_STATS Examples}\label{ff_simu_stats-examples}}

\begin{quote}
Go back to \href{http://fanwangecon.github.io/}{fan}'s \href{https://fanwangecon.github.io/MEconTools/}{MEconTools} Toolbox (\href{https://fanwangecon.github.io/MEconTools/bookdown}{bookdown}), \href{https://fanwangecon.github.io/M4Econ/}{Matlab Code Examples} Repository (\href{https://fanwangecon.github.io/M4Econ/bookdown}{bookdown}), or \href{https://fanwangecon.github.io/Math4Econ/}{Math for Econ with Matlab} Repository (\href{https://fanwangecon.github.io/Math4Econ/bookdown}{bookdown}).
\end{quote}

This is the example vignette for function:
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/stats/ff_simu_stats.m}{\textbf{ff\_simu\_stats}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} This is a
gate-way function that computes mean, percentiles, covariance etc
between several variables.

\hypertarget{test-ff_simu_stats-defaults}{%
\subsection{Test FF\_SIMU\_STATS Defaults}\label{test-ff_simu_stats-defaults}}

Call the function with defaults.

\begin{verbatim}
ff_simu_stats();

xxx tb_outcomes: all stats xxx
    OriginalVariableNames     cl_mt_pol_a    cl_mt_pol_c
    ______________________    ___________    ___________

    {'mean'              }     -0.11081          8.8423 
    {'sd'                }       4.1239          6.5845 
    {'coefofvar'         }      -37.215         0.74466 
    {'min'               }           -7         -6.3772 
    {'max'               }            9          21.786 
    {'pYis0'             }     0.064259               0 
    {'pYls0'             }      0.54867        0.027329 
    {'pYgr0'             }      0.38707         0.97267 
    {'pYisMINY'          }     0.051764        0.015232 
    {'pYisMAXY'          }     0.027329        0.046484 
    {'p1'                }           -7         -6.3772 
    {'p10'               }           -6         0.27238 
    {'p25'               }           -3          5.2138 
    {'p50'               }           -1          6.5321 
    {'p75'               }            3          13.799 
    {'p90'               }            5          16.887 
    {'p99'               }            9          21.786 
    {'fl_cov_cl_mt_pol_a'}       17.007         -22.084 
    {'fl_cor_cl_mt_pol_a'}            1        -0.81327 
    {'fl_cov_cl_mt_pol_c'}      -22.084          43.356 
    {'fl_cor_cl_mt_pol_c'}     -0.81327               1 
    {'fracByP1'          }       3.2699       -0.010985 
    {'fracByP10'         }       5.9889       -0.013362 
    {'fracByP25'         }       14.165        0.041007 
    {'fracByP50'         }       16.208          0.1893 
    {'fracByP75'         }       12.702         0.59539 
    {'fracByP90'         }       6.6611          0.8307 
    {'fracByP99'         }            1               1 
\end{verbatim}

\hypertarget{test-ff_simu_stats-four-states-points-matrix}{%
\subsection{Test FF\_SIMU\_STATS Four States-Points Matrix}\label{test-ff_simu_stats-four-states-points-matrix}}

Over some (a,z) states that is 3 by 3, c matrix, generate all stats

\begin{verbatim}
% Set Parameters
mt_x_of_s = [1, 2,  3.0;...
             3, 1,  1.5;...
             4, 3,  2.0];
mt_y_of_s = [2, -10, 9.0;...
             5, 1.1,3.0;...
             1, 3,  -1.5];
mt_z_of_s = [1.1, 2,3.3;...
             2.3, 1,1.5;...
             4, 2.5,2.0];
mp_cl_mt_xyz_of_s = containers.Map('KeyType','char', 'ValueType','any');
mp_cl_mt_xyz_of_s('cl_mt_x_of_s') = {mt_x_of_s, zeros(1)};
mp_cl_mt_xyz_of_s('cl_mt_y_of_s') = {mt_y_of_s, zeros(1)};
mp_cl_mt_xyz_of_s('cl_mt_z_of_s') = {mt_z_of_s, zeros(1)};
mp_cl_mt_xyz_of_s('ar_st_y_name') = ["cl_mt_x_of_s", "cl_mt_y_of_s", "cl_mt_z_of_s"];
% Mass
rng(123);
mt_f_of_s = rand(size(mt_x_of_s));
mt_f_of_s = mt_f_of_s/sum(mt_f_of_s, 'all');
% Call Function
mp_cl_mt_xyz_of_s_out = ff_simu_stats(mt_f_of_s, mp_cl_mt_xyz_of_s);

xxx tb_outcomes: all stats xxx
     OriginalVariableNames     cl_mt_x_of_s    cl_mt_y_of_s    cl_mt_z_of_s
    _______________________    ____________    ____________    ____________

    {'mean'               }        2.0763          1.9323          2.0668  
    {'sd'                 }        0.9071          5.2239          0.9042  
    {'coefofvar'          }       0.43688          2.7034         0.43749  
    {'min'                }             1             -10               1  
    {'max'                }             4               9               4  
    {'pYis0'              }             0               0               0  
    {'pYls0'              }             0         0.20441               0  
    {'pYgr0'              }             1         0.79559               1  
    {'pYisMINY'           }       0.28039         0.10917         0.14247  
    {'pYisMAXY'           }      0.044922         0.19422        0.044922  
    {'p1'                 }             1             -10               1  
    {'p10'                }             1             -10               1  
    {'p25'                }             1             1.1             1.1  
    {'p50'                }             2               2               2  
    {'p75'                }             3               5             2.5  
    {'p90'                }             3               9             3.3  
    {'p99'                }             4               9               4  
    {'fl_cov_cl_mt_x_of_s'}       0.82282           1.589         0.78646  
    {'fl_cor_cl_mt_x_of_s'}             1         0.33534         0.95887  
    {'fl_cov_cl_mt_y_of_s'}         1.589          27.289          1.8353  
    {'fl_cor_cl_mt_y_of_s'}       0.33534               1         0.38856  
    {'fl_cov_cl_mt_z_of_s'}       0.78646          1.8353         0.81758  
    {'fl_cor_cl_mt_z_of_s'}       0.95887         0.38856               1  
    {'fracByP1'           }       0.13504        -0.56498        0.068934  
    {'fracByP10'          }       0.13504        -0.56498        0.068934  
    {'fracByP25'          }       0.13504        -0.53456         0.14234  
    {'fracByP50'          }       0.42991        -0.39181         0.43856  
    {'fracByP75'          }       0.91346        0.095425         0.60296  
    {'fracByP90'          }       0.91346               1         0.91306  
    {'fracByP99'          }             1               1               1  
\end{verbatim}

\hypertarget{test-ff_simu_stats-four-states-points-matrix-single-column-inputs}{%
\subsection{Test FF\_SIMU\_STATS Four States-Points Matrix Single Column Inputs}\label{test-ff_simu_stats-four-states-points-matrix-single-column-inputs}}

Same as before, but now inputs are single column, should have identical
results:

\begin{verbatim}
% Array Inputs
mp_cl_ar_xyz_of_s = containers.Map('KeyType','char', 'ValueType','any');
mp_cl_mt_xyz_of_s('cl_mt_x_of_s') = {mt_x_of_s(:), zeros(1)};
mp_cl_mt_xyz_of_s('cl_mt_y_of_s') = {mt_y_of_s(:), zeros(1)};
mp_cl_mt_xyz_of_s('cl_mt_z_of_s') = {mt_z_of_s(:), zeros(1)};
mp_cl_mt_xyz_of_s('ar_st_y_name') = ["cl_mt_x_of_s", "cl_mt_y_of_s", "cl_mt_z_of_s"];
% Call Function
mp_cl_mt_xyz_of_s_out = ff_simu_stats(mt_f_of_s(:), mp_cl_mt_xyz_of_s);

xxx tb_outcomes: all stats xxx
     OriginalVariableNames     cl_mt_x_of_s    cl_mt_y_of_s    cl_mt_z_of_s
    _______________________    ____________    ____________    ____________

    {'mean'               }        2.0763          1.9323          2.0668  
    {'sd'                 }        0.9071          5.2239          0.9042  
    {'coefofvar'          }       0.43688          2.7034         0.43749  
    {'min'                }             1             -10               1  
    {'max'                }             4               9               4  
    {'pYis0'              }             0               0               0  
    {'pYls0'              }             0         0.20441               0  
    {'pYgr0'              }             1         0.79559               1  
    {'pYisMINY'           }       0.28039         0.10917         0.14247  
    {'pYisMAXY'           }      0.044922         0.19422        0.044922  
    {'p1'                 }             1             -10               1  
    {'p10'                }             1             -10               1  
    {'p25'                }             1             1.1             1.1  
    {'p50'                }             2               2               2  
    {'p75'                }             3               5             2.5  
    {'p90'                }             3               9             3.3  
    {'p99'                }             4               9               4  
    {'fl_cov_cl_mt_x_of_s'}       0.82282           1.589         0.78646  
    {'fl_cor_cl_mt_x_of_s'}             1         0.33534         0.95887  
    {'fl_cov_cl_mt_y_of_s'}         1.589          27.289          1.8353  
    {'fl_cor_cl_mt_y_of_s'}       0.33534               1         0.38856  
    {'fl_cov_cl_mt_z_of_s'}       0.78646          1.8353         0.81758  
    {'fl_cor_cl_mt_z_of_s'}       0.95887         0.38856               1  
    {'fracByP1'           }       0.13504        -0.56498        0.068934  
    {'fracByP10'          }       0.13504        -0.56498        0.068934  
    {'fracByP25'          }       0.13504        -0.53456         0.14234  
    {'fracByP50'          }       0.42991        -0.39181         0.43856  
    {'fracByP75'          }       0.91346        0.095425         0.60296  
    {'fracByP90'          }       0.91346               1         0.91306  
    {'fracByP99'          }             1               1               1  
\end{verbatim}

\hypertarget{test-ff_simu_stats-print-many-details}{%
\subsection{Test FF\_SIMU\_STATS Print Many Details}\label{test-ff_simu_stats-print-many-details}}

The Same As before, but now control which percentiles and other details
to display.

\begin{verbatim}
% Array Inputs
mp_cl_ar_xyz_of_s = containers.Map('KeyType','char', 'ValueType','any');
mp_cl_ar_xyz_of_s('cl_ar_x_of_s') = {mt_x_of_s(:), zeros(1)};
mp_cl_ar_xyz_of_s('cl_ar_z_of_s') = {mt_z_of_s(:), zeros(1)};
mp_cl_ar_xyz_of_s('ar_st_y_name') = ["cl_ar_x_of_s", "cl_ar_z_of_s"];

% controls
mp_support = containers.Map('KeyType','char', 'ValueType','any');
mp_support('bl_display_detail') = false;
mp_support('bl_display_final') = true;
mp_support('bl_display_drvm2outcomes') = false;
mp_support('ar_fl_percentiles') = [25 50 75];
mp_support('bl_display_drvstats') = true;
mp_support('bl_display_drvm2covcor') = false;

% Call Function
mp_cl_mt_xyz_of_s_out = ff_simu_stats(mt_f_of_s(:), mp_cl_ar_xyz_of_s, mp_support);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_ar_x_of_s
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    2.0763

fl_choice_sd
    0.9071

fl_choice_coefofvar
    0.4369

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
     1

fl_choice_prob_max
    0.0449

tb_disc_cumu
    cl_ar_x_of_sDiscreteVal    cl_ar_x_of_sDiscreteValProbMass     CDF      cumsumFrac
    _______________________    _______________________________    ______    __________

                1                          0.28039                28.039     0.13504  
              1.5                          0.13561                  41.6     0.23301  
                2                          0.20441                62.041     0.42991  
                3                          0.33466                95.508     0.91346  
                4                         0.044922                   100           1  

    cl_ar_x_of_sDiscreteVal    cl_ar_x_of_sDiscreteValProbMass     CDF      cumsumFrac
    _______________________    _______________________________    ______    __________

                1                          0.28039                28.039     0.13504  
              1.5                          0.13561                  41.6     0.23301  
                2                          0.20441                62.041     0.42991  
                3                          0.33466                95.508     0.91346  
                4                         0.044922                   100           1  

tb_prob_drv
    percentiles    cl_ar_x_of_sDiscreteValPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    _______________________________________    ________________________________

        25                            1                                   0.13504             
        50                            2                                   0.42991             
        75                            3                                   0.91346             

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_ar_z_of_s
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    2.0668

fl_choice_sd
    0.9042

fl_choice_coefofvar
    0.4375

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
     1

fl_choice_prob_max
    0.0449

tb_disc_cumu
    cl_ar_z_of_sDiscreteVal    cl_ar_z_of_sDiscreteValProbMass     CDF      cumsumFrac
    _______________________    _______________________________    ______    __________

                1                          0.14247                14.247     0.068934 
              1.1                          0.13792                28.039      0.14234 
              1.5                          0.13561                  41.6      0.24076 
                2                          0.20441                62.041      0.43856 
              2.3                         0.056663                67.708      0.50162 
              2.5                         0.083786                76.086      0.60296 
              3.3                          0.19422                95.508      0.91306 
                4                         0.044922                   100            1 

    cl_ar_z_of_sDiscreteVal    cl_ar_z_of_sDiscreteValProbMass     CDF      cumsumFrac
    _______________________    _______________________________    ______    __________

                1                          0.14247                14.247     0.068934 
              1.1                          0.13792                28.039      0.14234 
              1.5                          0.13561                  41.6      0.24076 
                2                          0.20441                62.041      0.43856 
              2.3                         0.056663                67.708      0.50162 
              2.5                         0.083786                76.086      0.60296 
              3.3                          0.19422                95.508      0.91306 
                4                         0.044922                   100            1 

tb_prob_drv
    percentiles    cl_ar_z_of_sDiscreteValPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    _______________________________________    ________________________________

        25                           1.1                                  0.14234             
        50                             2                                  0.43856             
        75                           2.5                                  0.60296             

xxx tb_outcomes: all stats xxx
     OriginalVariableNames     cl_ar_x_of_s    cl_ar_z_of_s
    _______________________    ____________    ____________

    {'mean'               }        2.0763          2.0668  
    {'sd'                 }        0.9071          0.9042  
    {'coefofvar'          }       0.43688         0.43749  
    {'min'                }             1               1  
    {'max'                }             4               4  
    {'pYis0'              }             0               0  
    {'pYls0'              }             0               0  
    {'pYgr0'              }             1               1  
    {'pYisMINY'           }       0.28039         0.14247  
    {'pYisMAXY'           }      0.044922        0.044922  
    {'p25'                }             1             1.1  
    {'p50'                }             2               2  
    {'p75'                }             3             2.5  
    {'fl_cov_cl_ar_x_of_s'}       0.82282         0.78646  
    {'fl_cor_cl_ar_x_of_s'}             1         0.95887  
    {'fl_cov_cl_ar_z_of_s'}       0.78646         0.81758  
    {'fl_cor_cl_ar_z_of_s'}       0.95887               1  
    {'fracByP25'          }       0.13504         0.14234  
    {'fracByP50'          }       0.42991         0.43856  
    {'fracByP75'          }       0.91346         0.60296
\end{verbatim}

\hypertarget{ff_disc_rand_var_stats-examples}{%
\section{FF\_DISC\_RAND\_VAR\_STATS Examples}\label{ff_disc_rand_var_stats-examples}}

\begin{quote}
Go back to \href{http://fanwangecon.github.io/}{fan}'s \href{https://fanwangecon.github.io/MEconTools/}{MEconTools} Toolbox (\href{https://fanwangecon.github.io/MEconTools/bookdown}{bookdown}), \href{https://fanwangecon.github.io/M4Econ/}{Matlab Code Examples} Repository (\href{https://fanwangecon.github.io/M4Econ/bookdown}{bookdown}), or \href{https://fanwangecon.github.io/Math4Econ/}{Math for Econ with Matlab} Repository (\href{https://fanwangecon.github.io/Math4Econ/bookdown}{bookdown}).
\end{quote}

This is the example vignette for function:
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/stats/ff_disc_rand_var_stats.m}{\textbf{ff\_disc\_rand\_var\_stats}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} This function
summarizes statistics of matrixes stored in a container map, as well as
scalar, string, function and other values stored in container maps.

\hypertarget{test-ff_disc_rand_var_stats-defaults}{%
\subsection{Test FF\_DISC\_RAND\_VAR\_STATS Defaults}\label{test-ff_disc_rand_var_stats-defaults}}

Call the function with defaults.

\begin{verbatim}
ff_disc_rand_var_stats();

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: binom
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
   -1.0000

fl_choice_sd
    2.5100

fl_choice_coefofvar
   -2.5100

fl_choice_prob_zero
    0.1416

fl_choice_prob_below_zero
    0.5888

fl_choice_prob_above_zero
    0.2696

fl_choice_prob_max
   2.0589e-16

tb_disc_cumu
    binomDiscreteVal    binomDiscreteValProbMass       CDF       cumsumFrac
    ________________    ________________________    _________    __________

          -10                  2.2539e-05           0.0022539    0.00022539
           -9                  0.00028979            0.031233     0.0028335
           -8                   0.0018008             0.21132       0.01724
           -7                   0.0072034             0.93166      0.067664
           -6                    0.020838              3.0155       0.19269
           -5                     0.04644              7.6595       0.42489
           -4                    0.082928              15.952       0.75661
           -3                     0.12185              28.138        1.1222
           -2                     0.15014              43.152        1.4224
           -1                     0.15729              58.881        1.5797

    binomDiscreteVal    binomDiscreteValProbMass    CDF    cumsumFrac
    ________________    ________________________    ___    __________

           11                  6.0392e-06           100        1     
           12                  1.0588e-06           100        1     
           13                  1.5784e-07           100        1     
           14                   1.973e-08           100        1     
           15                  2.0293e-09           100        1     
           16                  1.6725e-10           100        1     
           17                  1.0619e-11           100        1     
           18                  4.8762e-13           100        1     
           19                  1.4412e-14           100        1     
           20                  2.0589e-16           100        1     

tb_prob_drv
    percentiles    binomDiscreteValPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ________________________________    ________________________________

        0.1                       -8                               0.01724             
          1                       -6                               0.19269             
          5                       -5                               0.42489             
         10                       -4                               0.75661             
         15                       -4                               0.75661             
         20                       -3                                1.1222             
         25                       -3                                1.1222             
         35                       -2                                1.4224             
         50                       -1                                1.5797             
         65                        0                                1.5797             
         75                        1                                1.4694             
         80                        1                                1.4694             
         85                        2                                1.3197             
         90                        2                                1.3197             
         95                        3                                1.1865             
         99                        5                                1.0412             
       99.9                        7                                1.0052             
\end{verbatim}

\hypertarget{test-ff_disc_rand_var_stats-0-and-1-random-variable}{%
\subsection{Test FF\_DISC\_RAND\_VAR\_STATS 0 and 1 Random Variable}\label{test-ff_disc_rand_var_stats-0-and-1-random-variable}}

The simplest discrete random variable has two values, zero or one. The
probability of zero is 30 percent, and 70 percent is the probability of
one.

\begin{verbatim}
% Parameters
% 1. specify the random variable
st_var_name = 'bernoulli';
ar_choice_unique_sorted = [0, 1];
ar_choice_prob = [0.3, 0.7];
% 2. percentiles of interest
ar_fl_percentiles = [0.1 5 25 50 75 95 99.9];
% 3. print resutls
bl_display_drvstats = true;
% Call Function
[ds_stats_map] = ff_disc_rand_var_stats(st_var_name, ...
    ar_choice_unique_sorted, ar_choice_prob, ...
    ar_fl_percentiles, bl_display_drvstats);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: bernoulli
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    0.7000

fl_choice_sd
    0.4583

fl_choice_coefofvar
    0.6547

fl_choice_prob_zero
    0.3000

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
    0.7000

fl_choice_prob_max
    0.7000

tb_disc_cumu
    bernoulliDiscreteVal    bernoulliDiscreteValProbMass    CDF    cumsumFrac
    ____________________    ____________________________    ___    __________

             0                          0.3                  30        0     
             1                          0.7                 100        1     

    bernoulliDiscreteVal    bernoulliDiscreteValProbMass    CDF    cumsumFrac
    ____________________    ____________________________    ___    __________

             0                          0.3                  30        0     
             1                          0.7                 100        1     

tb_prob_drv
    percentiles    bernoulliDiscreteValPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ____________________________________    ________________________________

        0.1                         0                                     0                
          5                         0                                     0                
         25                         0                                     0                
         50                         1                                     1                
         75                         1                                     1                
         95                         1                                     1                
       99.9                         1                                     1                
\end{verbatim}

\hypertarget{test-ff_disc_rand_var_stats-with-poisson}{%
\subsection{Test FF\_DISC\_RAND\_VAR\_STATS with Poisson}\label{test-ff_disc_rand_var_stats-with-poisson}}

\href{https://fanwangecon.github.io/Stat4Econ/probability_discrete/htmlpdfr/poisson.html}{Poisson random
variable},
with mean equals to ten, summarize over umsymmetric percentiles. Note
that the poisson random variable has no upper bound.

\begin{verbatim}
% Parameters
% 1. specify the random variable
st_var_name = 'poisson';
mu = 10;
ar_choice_unique_sorted = 0:1:50;
ar_choice_prob = poisspdf(ar_choice_unique_sorted, mu);
% 2. percentiles of interest, unsymmetric
ar_fl_percentiles = [0.1 5 10 25 50 90 95 99 99.9 99.99 99.999 99.9999];
% 3. print resutls
bl_display_drvstats = true;
% Call Function
[ds_stats_map] = ff_disc_rand_var_stats(st_var_name, ...
    ar_choice_unique_sorted, ar_choice_prob, ...
    ar_fl_percentiles, bl_display_drvstats);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: poisson
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    10

fl_choice_sd
    3.1623

fl_choice_coefofvar
    0.3162

fl_choice_prob_zero
   4.5400e-05

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
    1.0000

fl_choice_prob_max
   1.4927e-19

tb_disc_cumu
    poissonDiscreteVal    poissonDiscreteValProbMass      CDF      cumsumFrac
    __________________    __________________________    _______    __________

            0                      4.54e-05             0.00454            0 
            1                      0.000454             0.04994     4.54e-05 
            2                       0.00227             0.27694    0.0004994 
            3                     0.0075667              1.0336    0.0027694 
            4                      0.018917              2.9253     0.010336 
            5                      0.037833              6.7086     0.029253 
            6                      0.063055              13.014     0.067086 
            7                      0.090079              22.022      0.13014 
            8                        0.1126              33.282      0.22022 
            9                       0.12511              45.793      0.33282 

    poissonDiscreteVal    poissonDiscreteValProbMass    CDF    cumsumFrac
    __________________    __________________________    ___    __________

            41                    1.3571e-13            100        1     
            42                    3.2313e-14            100        1     
            43                    7.5146e-15            100        1     
            44                    1.7079e-15            100        1     
            45                    3.7953e-16            100        1     
            46                    8.2506e-17            100        1     
            47                    1.7554e-17            100        1     
            48                    3.6572e-18            100        1     
            49                    7.4636e-19            100        1     
            50                    1.4927e-19            100        1     

tb_prob_drv
    percentiles    poissonDiscreteValPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    __________________________________    ________________________________

         0.1                        2                               0.0004994            
           5                        5                                0.029253            
          10                        6                                0.067086            
          25                        8                                 0.22022            
          50                       10                                 0.45793            
          90                       14                                 0.86446            
          95                       15                                 0.91654            
          99                       18                                 0.98572            
        99.9                       21                                 0.99841            
       99.99                       24                                 0.99988            
      99.999                       26                                 0.99998            
         100                       28                                       1            

% Print out full Stored Matrix
% Note that the outputs are single row arrays.
ff_container_map_display(ds_stats_map, 100, 100)

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: ds_stats_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                               i    idx    ndim    numel    rowN    colN     mean       std      coefvari       min       max
                               _    ___    ____    _____    ____    ____    _______    ______    ________    _________    ___

    ar_choice_perc_fracheld    1     1      2       12       1       12     0.62833     0.435    0.69231     0.0004994      1
    ar_choice_percentiles      2     2      2       12       1       12       14.75    8.7399    0.59254             2     28
    ar_fl_percentiles          3     3      2       12       1       12      64.499    42.887    0.66492           0.1    100

xxx TABLE:ar_choice_perc_fracheld xxxxxxxxxxxxxxxxxx
             c1           c2          c3         c4         c5         c6         c7         c8         c9         c10        c11      c12
          _________    ________    ________    _______    _______    _______    _______    _______    _______    _______    _______    ___

    r1    0.0004994    0.029253    0.067086    0.22022    0.45793    0.86446    0.91654    0.98572    0.99841    0.99988    0.99998     1 

xxx TABLE:ar_choice_percentiles xxxxxxxxxxxxxxxxxx
          c1    c2    c3    c4    c5    c6    c7    c8    c9    c10    c11    c12
          __    __    __    __    __    __    __    __    __    ___    ___    ___

    r1    2     5     6     8     10    14    15    18    21    24     26     28 

xxx TABLE:ar_fl_percentiles xxxxxxxxxxxxxxxxxx
          c1     c2    c3    c4    c5    c6    c7    c8     c9      c10      c11      c12
          ___    __    __    __    __    __    __    __    ____    _____    ______    ___

    r1    0.1    5     10    25    50    90    95    99    99.9    99.99    99.999    100

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: ds_stats_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                                 i     idx      value   
                                 __    ___    __________

    fl_choice_coefofvar           1     4        0.31623
    fl_choice_max                 2     5             50
    fl_choice_mean                3     6             10
    fl_choice_min                 4     7              0
    fl_choice_prob_above_zero     5     8        0.99995
    fl_choice_prob_below_zero     6     9              0
    fl_choice_prob_max            7    10     1.4927e-19
    fl_choice_prob_min            8    11       4.54e-05
    fl_choice_prob_zero           9    12       4.54e-05
    fl_choice_sd                 10    13         3.1623
\end{verbatim}

\hypertarget{ff_disc_rand_var_mass2outcomes-examples}{%
\section{FF\_DISC\_RAND\_VAR\_MASS2OUTCOMES Examples}\label{ff_disc_rand_var_mass2outcomes-examples}}

\begin{quote}
Go back to \href{http://fanwangecon.github.io/}{fan}'s \href{https://fanwangecon.github.io/MEconTools/}{MEconTools} Toolbox (\href{https://fanwangecon.github.io/MEconTools/bookdown}{bookdown}), \href{https://fanwangecon.github.io/M4Econ/}{Matlab Code Examples} Repository (\href{https://fanwangecon.github.io/M4Econ/bookdown}{bookdown}), or \href{https://fanwangecon.github.io/Math4Econ/}{Math for Econ with Matlab} Repository (\href{https://fanwangecon.github.io/Math4Econ/bookdown}{bookdown}).
\end{quote}

This is the example vignette for function:
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/stats/ff_disc_rand_var_mass2outcomes.m}{\textbf{ff\_disc\_rand\_var\_mass2outcomes}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} This function
generates sorted discrete random variable from state-space joint
distribution.

\hypertarget{test-ff_disc_rand_var_mass2outcomes-defaults}{%
\subsection{Test FF\_DISC\_RAND\_VAR\_MASS2OUTCOMES Defaults}\label{test-ff_disc_rand_var_mass2outcomes-defaults}}

Call the function with defaults.

\begin{verbatim}
ff_disc_rand_var_mass2outcomes();

INPUT f(a,z): mt_dist_bystates
    0.0289    0.0465    0.0228    0.0036    0.0001
    0.0241    0.0930    0.0857    0.0241    0.0015
    0.0080    0.0744    0.1285    0.0643    0.0074
    0.0013    0.0297    0.0964    0.0857    0.0186
    0.0001    0.0059    0.0361    0.0571    0.0232
    0.0000    0.0005    0.0054    0.0152    0.0116

INPUT y(a,z): mt_choice_bystates
    -5    -4    -5    -4    -4
    -3    -2    -3    -2    -3
    -1    -1    -1     0     0
     1     1     2     3     1
     4     3     3     4     3
     5     6     5     6     6

OUTPUT f(y): ar_choice_prob_byY
    0.0518
    0.0502
    0.1113
    0.1171
    0.2109
    0.0717
    0.0497
    0.0964
    0.1510
    0.0572
    0.0054
    0.0273

OUTPUT f(y,z): mt_choice_prob_byYZ
    0.0289         0    0.0228         0         0
         0    0.0465         0    0.0036    0.0001
    0.0241         0    0.0857         0    0.0015
         0    0.0930         0    0.0241         0
    0.0080    0.0744    0.1285         0         0
         0         0         0    0.0643    0.0074
    0.0013    0.0297         0         0    0.0186
         0         0    0.0964         0         0
         0    0.0059    0.0361    0.0857    0.0232
    0.0001         0         0    0.0571         0
    0.0000         0    0.0054         0         0
         0    0.0005         0    0.0152    0.0116

OUTPUT f(y,a): mt_choice_prob_byYA
    0.0518         0         0         0         0         0
    0.0502         0         0         0         0         0
         0    0.1113         0         0         0         0
         0    0.1171         0         0         0         0
         0         0    0.2109         0         0         0
         0         0    0.0717         0         0         0
         0         0         0    0.0497         0         0
         0         0         0    0.0964         0         0
         0         0         0    0.0857    0.0653         0
         0         0         0         0    0.0572         0
         0         0         0         0         0    0.0054
         0         0         0         0         0    0.0273

OUTPUT f(y) and y in table: tb_choice_drv_cur_byY
    binomtestOutcomes    probMassFunction
    _________________    ________________

           -5                0.051764    
           -4                0.050217    
           -3                 0.11126    
           -2                 0.11706    
           -1                 0.21092    
            0                0.071696    
            1                0.049682    
            2                0.096388    
            3                 0.15102    
            4                0.057231    
            5               0.0054256    
            6                0.027329    
\end{verbatim}

\hypertarget{test-ff_disc_rand_var_mass2outcomes-four-states-points}{%
\subsection{Test FF\_DISC\_RAND\_VAR\_MASS2OUTCOMES Four States-Points}\label{test-ff_disc_rand_var_mass2outcomes-four-states-points}}

Over some (a,z) states that is 2 by 2, matrix or vectorized inputs
identical results.

\begin{verbatim}
% Set Parameters
st_y_name = 'consumption';
% consumption matrix: c(a,z)
mt_c_of_s = [1,2;3,1];
% stationary mass over assets adn shocks: f(a,z)
mt_f_of_s = rand(size(mt_c_of_s));
mt_f_of_s = mt_f_of_s/sum(mt_f_of_s, 'all');
% Call Function
[ar_f_of_y, ar_y_unique_sorted] = ...
    ff_disc_rand_var_mass2outcomes(st_y_name, mt_c_of_s, mt_f_of_s);
% print
disp([ar_f_of_y ar_y_unique_sorted]);

    0.4039    1.0000
    0.2971    2.0000
    0.2990    3.0000
\end{verbatim}

Same as before, but now inputs are single column:

\begin{verbatim}
% Call Function
[ar_f_of_y, ar_y_unique_sorted] = ...
    ff_disc_rand_var_mass2outcomes(st_y_name, mt_c_of_s(:), mt_f_of_s);
disp([ar_f_of_y ar_y_unique_sorted]);

    0.4039    1.0000
    0.2971    2.0000
    0.2990    3.0000
\end{verbatim}

\hypertarget{test-ff_disc_rand_var_mass2outcomes-conditional-mass-outputs}{%
\subsection{Test FF\_DISC\_RAND\_VAR\_MASS2OUTCOMES Conditional Mass Outputs}\label{test-ff_disc_rand_var_mass2outcomes-conditional-mass-outputs}}

Same inputs as before, but now, also output additional conditional
statistis, f(y, a), where a is the row state variable for f(a,z). For
conditional statistics, must provide matrix based inputs.

\begin{verbatim}
% Set Parameters
st_y_name = 'consumption';
% consumption matrix: c(a,z)
mt_c_of_s = [1,2,0.5;
             3,1,2.0];
% stationary mass over assets adn shocks: f(a,z)
mt_f_of_s = rand(size(mt_c_of_s));
mt_f_of_s = mt_f_of_s/sum(mt_f_of_s, 'all');
% Call Function
[ar_f_of_y, ar_y_unique_sorted, mt_f_of_y_srow, mt_f_of_y_scol] = ...
    ff_disc_rand_var_mass2outcomes(st_y_name, mt_c_of_s, mt_f_of_s);
% print
disp([ar_f_of_y ar_y_unique_sorted]);

    0.2695    0.5000
    0.3765    1.0000
    0.2649    2.0000
    0.0891    3.0000

disp(mt_f_of_y_srow);

    0.2695         0
    0.1215    0.2550
    0.1217    0.1432
         0    0.0891

disp(mt_f_of_y_scol);

         0         0    0.2695
    0.1215    0.2550         0
         0    0.1217    0.1432
    0.0891         0         0
\end{verbatim}

\hypertarget{ff_disc_rand_var_mass2covcor-examples}{%
\section{FF\_DISC\_RAND\_VAR\_MASS2COVCOR Examples}\label{ff_disc_rand_var_mass2covcor-examples}}

\begin{quote}
Go back to \href{http://fanwangecon.github.io/}{fan}'s \href{https://fanwangecon.github.io/MEconTools/}{MEconTools} Toolbox (\href{https://fanwangecon.github.io/MEconTools/bookdown}{bookdown}), \href{https://fanwangecon.github.io/M4Econ/}{Matlab Code Examples} Repository (\href{https://fanwangecon.github.io/M4Econ/bookdown}{bookdown}), or \href{https://fanwangecon.github.io/Math4Econ/}{Math for Econ with Matlab} Repository (\href{https://fanwangecon.github.io/Math4Econ/bookdown}{bookdown}).
\end{quote}

This is the example vignette for function:
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/stats/ff_disc_rand_var_mass2covcor.m}{\textbf{ff\_disc\_rand\_var\_mass2covcor}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} This function
calculates covariance and correlation based for two discrete random
variables.

\hypertarget{test-ff_disc_rand_var_mass2covcor-defaults}{%
\subsection{Test FF\_DISC\_RAND\_VAR\_MASS2COVCOR Defaults}\label{test-ff_disc_rand_var_mass2covcor-defaults}}

Call the function with defaults.

\begin{verbatim}
ff_disc_rand_var_mass2covcor();

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: covvar_input_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                 i    idx    ndim    numel    rowN    colN      mean        std       coefvari       min          max  
                 _    ___    ____    _____    ____    ____    ________    ________    ________    __________    _______

    mt_f_of_s    1     5      2       30       6       5      0.033333    0.035743     1.0723     3.7187e-06    0.12852
    mt_x_of_s    2     6      2       30       6       5       0.83333      5.3051     6.3661             -7          9
    mt_y_of_s    3     7      2       30       6       5        8.3259      7.1913    0.86373        -6.3772     21.786

xxx TABLE:mt_f_of_s xxxxxxxxxxxxxxxxxx
              c1            c2           c3           c4           c5    
          __________    __________    _________    _________    _________

    r1      0.028917      0.046484     0.022848    0.0036146     0.000119
    r2      0.024097      0.092967     0.085679     0.024097    0.0014875
    r3     0.0080324      0.074374      0.12852     0.064259    0.0074374
    r4     0.0013387       0.02975     0.096388     0.085679     0.018593
    r5    0.00011156     0.0059499     0.036146     0.057119     0.023242
    r6    3.7187e-06    0.00047599    0.0054218     0.015232     0.011621

xxx TABLE:mt_x_of_s xxxxxxxxxxxxxxxxxx
          c1    c2    c3    c4    c5
          __    __    __    __    __

    r1    -7    -6    -7    -6    -6
    r2    -5    -3    -5    -3    -4
    r3    -2    -1    -1     0    -1
    r4     2     2     3     4     2
    r5     6     5     5     6     5
    r6     8     9     7     9     9

xxx TABLE:mt_y_of_s xxxxxxxxxxxxxxxxxx
            c1         c2         c3        c4         c5   
          ______    ________    ______    _______    _______

    r1    13.231      21.786    18.136      19.35     13.901
    r2     9.946      16.887    9.6914      15.71     8.6906
    r3    16.255      6.2166    13.799     5.2138     11.641
    r4    12.628      2.7525    6.5321    0.27238     13.357
    r5    5.8844      4.0352      6.05    0.14102    0.50318
    r6    3.5617    -0.72091    5.1855    -6.3772    -4.4805

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: covvar_input_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                 i    idx     value  
                 _    ___    ________

    fl_x_mean    1     1     -0.11081
    fl_x_sd      2     2       4.1239
    fl_y_mean    3     3       8.8423
    fl_y_sd      4     4       6.5845

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: covvar_output_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                                 i    idx    ndim    numel    rowN    colN      mean       std      coefvari      min        max  
                                 _    ___    ____    _____    ____    ____    ________    ______    ________    _______    _______

    mt_cov_component_weighted    1     1      2       30       6       5      -0.73612    1.0404    -1.4134     -3.5432    0.17717
    mt_x_devi_from_mean          2     2      2       30       6       5       0.94415    5.3051     5.6189     -6.8892     9.1108
    mt_x_y_multiply              3     3      2       30       6       5       -31.321    36.564    -1.1674     -138.66     9.5287
    mt_y_devi_from_mean          4     4      2       30       6       5      -0.51644    7.1913    -13.925      -15.22     12.943

xxx TABLE:mt_cov_component_weighted xxxxxxxxxxxxxxxxxx
              c1            c2           c3          c4            c5    
          ___________    _________    ________    _________    __________

    r1       -0.87434      -3.5432     -1.4628     -0.22368    -0.0035451
    r2       -0.13003      -2.1607    -0.35565     -0.47814    0.00087767
    r3       -0.11248      0.17365    -0.56642    -0.025838     -0.018507
    r4       0.010697     -0.38241    -0.69273      -3.0184       0.17717
    r5     -0.0020165     -0.14618    -0.51584      -3.0371      -0.99056
    r6    -0.00015927    -0.041473    -0.14098      -2.1121       -1.4106

xxx TABLE:mt_x_devi_from_mean xxxxxxxxxxxxxxxxxx
            c1          c2          c3         c4          c5   
          _______    ________    ________    _______    ________

    r1    -6.8892     -5.8892     -6.8892    -5.8892     -5.8892
    r2    -4.8892     -2.8892     -4.8892    -2.8892     -3.8892
    r3    -1.8892    -0.88919    -0.88919    0.11081    -0.88919
    r4     2.1108      2.1108      3.1108     4.1108      2.1108
    r5     6.1108      5.1108      5.1108     6.1108      5.1108
    r6     8.1108      9.1108      7.1108     9.1108      9.1108

xxx TABLE:mt_x_y_multiply xxxxxxxxxxxxxxxxxx
            c1         c2         c3          c4         c5   
          _______    _______    _______    ________    _______

    r1    -30.237    -76.225    -64.023     -61.882    -29.792
    r2     -5.396    -23.242     -4.151     -19.842    0.59004
    r3    -14.003     2.3348    -4.4073    -0.40209    -2.4884
    r4     7.9905    -12.854    -7.1868      -35.23     9.5287
    r5    -18.075    -24.568    -14.271     -53.172     -42.62
    r6     -42.83    -87.129    -26.003     -138.66    -121.38

xxx TABLE:mt_y_devi_from_mean xxxxxxxxxxxxxxxxxx
            c1         c2         c3         c4          c5   
          _______    _______    _______    _______    ________

    r1      4.389     12.943     9.2933     10.508      5.0587
    r2     1.1037     8.0444    0.84902     6.8677    -0.15171
    r3     7.4123    -2.6258     4.9566    -3.6286      2.7985
    r4     3.7855    -6.0898    -2.3103      -8.57      4.5142
    r5    -2.9579    -4.8071    -2.7924    -8.7013     -8.3392
    r6    -5.2806    -9.5633    -3.6568     -15.22     -13.323

fl_cov
  -22.0835

fl_cor
   -0.8133
\end{verbatim}

\hypertarget{test-ff_disc_rand_var_mass2covcor-four-states-points}{%
\subsection{Test FF\_DISC\_RAND\_VAR\_MASS2COVCOR Four States-Points}\label{test-ff_disc_rand_var_mass2covcor-four-states-points}}

Over some (a,z) states that is 2 by 2, c matrix, and y matrix, find
correlation. Positively related.

\begin{verbatim}
% Set Parameters
mt_c_of_s = [1,2;3,1];
mt_y_of_s = [2,10;5,1.1];
rng(123);
mt_f_of_s = rand(size(mt_c_of_s));
mt_f_of_s = mt_f_of_s/sum(mt_f_of_s, 'all');
bl_display_drvm2covcor = false;
% Call Function
[fl_cov_xy, fl_cor_xy] = ff_disc_rand_var_mass2covcor(...
    mt_c_of_s, mt_y_of_s, mt_f_of_s, bl_display_drvm2covcor);
display(['cov=' num2str(fl_cov_xy) ',cor=', num2str(fl_cor_xy)]);

cov=1.4446,cor=0.65723
\end{verbatim}

Same as before, but now inputs are single column:

\begin{verbatim}
% Call Function
[fl_cov_xy, fl_cor_xy] = ff_disc_rand_var_mass2covcor(...
    mt_c_of_s(:), mt_y_of_s(:), mt_f_of_s(:), bl_display_drvm2covcor);
display(['cov=' num2str(fl_cov_xy) ',cor=', num2str(fl_cor_xy)]);

cov=1.4446,cor=0.65723
\end{verbatim}

\hypertarget{test-ff_disc_rand_var_mass2covcor-two-random-vectors}{%
\subsection{Test FF\_DISC\_RAND\_VAR\_MASS2COVCOR Two Random Vectors}\label{test-ff_disc_rand_var_mass2covcor-two-random-vectors}}

\href{https://fanwangecon.github.io/Stat4Econ/probability_discrete/htmlpdfr/poisson.html}{G}enerate
two random vectors, with random or even mass, correlation should be
zero:

\begin{verbatim}
% Set Parameters
rng(4567);
mt_c_of_s = rand([20,1])*100;
mt_y_of_s = rand([20,1])*100;
mt_f_of_s = rand(size(mt_c_of_s));
mt_f_of_s = mt_f_of_s/sum(mt_f_of_s, 'all');
bl_display_drvm2covcor = false;
% Call Function
[fl_cov_xy, fl_cor_xy] = ff_disc_rand_var_mass2covcor(...
    mt_c_of_s, mt_y_of_s, mt_f_of_s, bl_display_drvm2covcor);
display(['cov=' num2str(fl_cov_xy) ',cor=', num2str(fl_cor_xy)]);

cov=-57.6533,cor=-0.062023
\end{verbatim}

\hypertarget{test-ff_disc_rand_var_mass2covcor-provide-mean-and-sd}{%
\subsection{Test FF\_DISC\_RAND\_VAR\_MASS2COVCOR Provide Mean and SD}\label{test-ff_disc_rand_var_mass2covcor-provide-mean-and-sd}}

Same as above, but now provide means and sd for x andy directly. The
results are the same as when mean and sd are calculated inside the
function.

\begin{verbatim}
% Set Parameters
rng(4567);
mt_c_of_s = rand([20,1])*100;
mt_y_of_s = rand([20,1])*100;
mt_f_of_s = rand(size(mt_c_of_s));
mt_f_of_s = mt_f_of_s/sum(mt_f_of_s, 'all');
fl_c_mean = sum(mt_f_of_s.*mt_c_of_s);
fl_c_sd = sqrt(sum(mt_f_of_s.*(mt_c_of_s-fl_c_mean).^2));
fl_y_mean = sum(mt_f_of_s.*mt_y_of_s);
fl_y_sd = sqrt(sum(mt_f_of_s.*(mt_y_of_s-fl_y_mean).^2));
bl_display_drvm2covcor = false;
% Call Function
[fl_cov_xy, fl_cor_xy] = ff_disc_rand_var_mass2covcor(...
    mt_c_of_s, mt_y_of_s, mt_f_of_s, ...
    fl_c_mean, fl_c_sd, ...
    fl_y_mean, fl_y_sd, bl_display_drvm2covcor);
display(['cov=' num2str(fl_cov_xy) ',cor=', num2str(fl_cor_xy)]);

cov=-57.6533,cor=-0.062023
\end{verbatim}

\hypertarget{graphs}{%
\chapter{Graphs}\label{graphs}}

\hypertarget{ff_graph_grid-examples-x-y-and-color-line-plots}{%
\section{FF\_GRAPH\_GRID Examples: X, Y and Color Line Plots}\label{ff_graph_grid-examples-x-y-and-color-line-plots}}

\begin{quote}
Go back to \href{http://fanwangecon.github.io/}{fan}'s \href{https://fanwangecon.github.io/MEconTools/}{MEconTools} Toolbox (\href{https://fanwangecon.github.io/MEconTools/bookdown}{bookdown}), \href{https://fanwangecon.github.io/M4Econ/}{Matlab Code Examples} Repository (\href{https://fanwangecon.github.io/M4Econ/bookdown}{bookdown}), or \href{https://fanwangecon.github.io/Math4Econ/}{Math for Econ with Matlab} Repository (\href{https://fanwangecon.github.io/Math4Econ/bookdown}{bookdown}).
\end{quote}

This is the example vignette for function:
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/graph/ff_graph_grid.m}{\textbf{ff\_graph\_grid}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} This function
can graph out value and policy functions given one state vector
(x-axis), conditional on other states (line groups). Can handle a few
lines (scatter + lines), or many groups (jet spectrum).

\hypertarget{test-ff_graph_grid-defaults}{%
\subsection{Test FF\_GRAPH\_GRID Defaults}\label{test-ff_graph_grid-defaults}}

Call the function with defaults.

\begin{verbatim}
ff_graph_grid();
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_graph_grid_images/figure_0.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_graph_grid_images/figure_1.png}

\hypertarget{test-ff_graph_grid-random-matrix-pick-markers-and-colors}{%
\subsection{Test FF\_GRAPH\_GRID Random Matrix Pick Markers and Colors}\label{test-ff_graph_grid-random-matrix-pick-markers-and-colors}}

Call the function with defaults.

\begin{verbatim}
rng(123);
mt_value = [normrnd(50,10,[1, 50]); ...
            normrnd(70,5,[1, 50]);...
            normrnd(90,10,[1, 50])];
ar_row_grid = ["shock low", "zero", "shock high"];
ar_col_grid = 1:50;
mp_support_graph = containers.Map('KeyType', 'char', 'ValueType', 'any');
mp_support_graph('cl_scatter_shapes') = { '.', 's' ,'.' };
mp_support_graph('cl_colors') = {'gray', 'red', 'gray'};
ff_graph_grid(mt_value, ar_row_grid, ar_col_grid, mp_support_graph);
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_graph_grid_images/figure_2.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_graph_grid_images/figure_3.png}

\hypertarget{test-ff_graph_grid-two-random-normal-lines-and-labels}{%
\subsection{Test FF\_GRAPH\_GRID Two Random Normal Lines and Labels}\label{test-ff_graph_grid-two-random-normal-lines-and-labels}}

There are two autoregressive time series, plot out the time two time
series.

\begin{verbatim}
% Generate the two time series
rng(456);
mt_value = normrnd(100,10,[2, 50]);
ar_row_grid = ["individual 1", "individual 2"];
ar_col_grid = 1:50;
mp_support_graph = containers.Map('KeyType', 'char', 'ValueType', 'any');
mp_support_graph('cl_st_graph_title') = {'Time Series Two Individuals'};
mp_support_graph('cl_st_ytitle') = {'Values'};
mp_support_graph('cl_st_xtitle') = {'Periods'};
mp_support_graph('bl_graph_logy') = false; % do not log
ff_graph_grid(mt_value, ar_row_grid, ar_col_grid, mp_support_graph);
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_graph_grid_images/figure_4.png}

\hypertarget{test-ff_graph_grid-6-lines-pick-marker-and-colors}{%
\subsection{Test FF\_GRAPH\_GRID 6 Lines Pick Marker and Colors}\label{test-ff_graph_grid-6-lines-pick-marker-and-colors}}

Plot many lines, with auto legend.

\begin{verbatim}
% Generate some Data
rng(456);
ar_row_grid = linspace(-4, 11, 5);
ar_col_grid = linspace(-1, 1, 20);
rng(123);
mt_value = 0.2*ar_row_grid' + exp(ar_col_grid) + rand([length(ar_row_grid), length(ar_col_grid)]);
% container map settings
mp_support_graph = containers.Map('KeyType', 'char', 'ValueType', 'any');
mp_support_graph('cl_st_graph_title') = {'5 lines, specify marker and color, value(a,z), a=x, z=color'};
mp_support_graph('cl_st_ytitle') = {'value(a,z)'};
mp_support_graph('cl_st_xtitle') = {'Savings States, a'};
mp_support_graph('st_legend_loc') = 'southeast';
mp_support_graph('bl_graph_logy') = false; % do not log
mp_support_graph('st_rowvar_name') = 'z=';
mp_support_graph('it_legend_select') = 3; % how many shock legends to show
mp_support_graph('st_rounding') = '6.2f'; % format shock legend
mp_support_graph('cl_scatter_shapes') = {'s', 's', '*', '*', 'p'};
mp_support_graph('cl_colors') = {'green', 'black', 'green', 'black', 'orange'};
% Call function
ff_graph_grid(mt_value, ar_row_grid, ar_col_grid, mp_support_graph);
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_graph_grid_images/figure_5.png}

\hypertarget{test-ff_graph_grid-many-lines}{%
\subsection{Test FF\_GRAPH\_GRID Many Lines}\label{test-ff_graph_grid-many-lines}}

Plot many lines, with auto legend.

\begin{verbatim}
% Generate some Data
rng(456);
ar_row_grid = linspace(-4, 11, 100);
ar_col_grid = linspace(-1, 1, 1000);
rng(123);
mt_value = 0.2*ar_row_grid' + exp(ar_col_grid) + rand([length(ar_row_grid), length(ar_col_grid)]);
% container map settings
mp_support_graph = containers.Map('KeyType', 'char', 'ValueType', 'any');
mp_support_graph('cl_st_graph_title') = {'value(a,z), a=x, z=color'};
mp_support_graph('cl_st_ytitle') = {'value(a,z)'};
mp_support_graph('cl_st_xtitle') = {'Savings States, a'};
mp_support_graph('st_legend_loc') = 'southeast';
mp_support_graph('bl_graph_logy') = false; % do not log
mp_support_graph('st_rowvar_name') = 'z=';
mp_support_graph('it_legend_select') = 3; % how many shock legends to show
mp_support_graph('st_rounding') = '6.2f'; % format shock legend
mp_support_graph('cl_colors') = 'jet'; % any predefined matlab colormap
% Call function
ff_graph_grid(mt_value, ar_row_grid, ar_col_grid, mp_support_graph);
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_graph_grid_images/figure_6.png}

\hypertarget{test-ff_graph_grid-many-lines-legend-exogenous}{%
\subsection{Test FF\_GRAPH\_GRID Many Lines Legend Exogenous}\label{test-ff_graph_grid-many-lines-legend-exogenous}}

Plot many lines, exogenously set legend

\begin{verbatim}
% Generate the two time series
rng(456);
ar_row_grid = linspace(-4, 11, 15);
ar_col_grid = linspace(-1, 1, 100000);
rng(123);
mt_value = 0.2*ar_row_grid' - exp(ar_col_grid) + rand([length(ar_row_grid), length(ar_col_grid)]);
% setting shock vector name exogenously here
ar_row_grid = string(num2str(ar_row_grid', "shock=%6.2f"));
% container map settings
mp_support_graph = containers.Map('KeyType', 'char', 'ValueType', 'any');
mp_support_graph('cl_st_graph_title') = {'value(a,z), a=x, z=color'};
mp_support_graph('cl_st_ytitle') = {'value(a,z)'};
mp_support_graph('cl_st_xtitle') = {'Savings States, a'};
mp_support_graph('st_legend_loc') = 'eastoutside';
mp_support_graph('bl_graph_logy') = false; % do not log
mp_support_graph('it_legend_select') = 15;
mp_support_graph('cl_colors') = 'winter'; % any predefined matlab colormap
% Call function
ff_graph_grid(mt_value, ar_row_grid, ar_col_grid, mp_support_graph);
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_graph_grid_images/figure_7.png}

\hypertarget{data-structures}{%
\chapter{Data Structures}\label{data-structures}}

\hypertarget{ff_saveborr_grid-example-for-generating-asset-grid}{%
\section{FF\_SAVEBORR\_GRID Example for Generating Asset Grid}\label{ff_saveborr_grid-example-for-generating-asset-grid}}

\begin{quote}
Go back to \href{http://fanwangecon.github.io/}{fan}'s \href{https://fanwangecon.github.io/MEconTools/}{MEconTools} Toolbox (\href{https://fanwangecon.github.io/MEconTools/bookdown}{bookdown}), \href{https://fanwangecon.github.io/M4Econ/}{Matlab Code Examples} Repository (\href{https://fanwangecon.github.io/M4Econ/bookdown}{bookdown}), or \href{https://fanwangecon.github.io/Math4Econ/}{Math for Econ with Matlab} Repository (\href{https://fanwangecon.github.io/Math4Econ/bookdown}{bookdown}).
\end{quote}

This is the example vignette for function:
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/generate/ff_saveborr_grid.m}{\textbf{ff\_saveborr\_grid}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} This function
generates variously spaced savings/borrowing states/choices grid.

\hypertarget{test-ff_saveborr_grid-defaults}{%
\subsection{Test FF\_SAVEBORR\_GRID Defaults}\label{test-ff_saveborr_grid-defaults}}

Call the function with defaults.

\begin{verbatim}
ff_saveborr_grid();

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                      i    idx    ndim    numel    rowN    colN     sum     mean      std      coefvari    min    max
                      _    ___    ____    _____    ____    ____    _____    _____    ______    ________    ___    ___

    ar_fl_saveborr    1     1      2       25       25      1      216.7    8.668    13.363     1.5417      0     50 

xxx TABLE:ar_fl_saveborr xxxxxxxxxxxxxxxxxx
              c1   
           ________

    r1            0
    r2     0.029558
    r3     0.067855
    r4      0.11748
    r5      0.18177
    r6      0.26507
    r7      0.37301
    r8      0.51286
    r9      0.69407
    r10     0.92885
    r11      1.2331
    r12      1.6272
    r13      2.1379
    r14      2.7996
    r15       3.657
    r16      4.7679
    r17      6.2072
    r18      8.0722
    r19      10.489
    r20       13.62
    r21      17.676
    r22      22.932
    r23      29.743
    r24      38.567
    r25          50

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                              i    idx    value
                              _    ___    _____

    grid_evenlog_threshold    1     2        1 
    grid_log10space_x1        2     3      0.3 
    grid_log10space_x2        3     4        3 
    grid_powerspace_power     4     5        3 
\end{verbatim}

\hypertarget{test-ff_saveborr_grid-default-linear-grid-log-grid-power-grid-threshold-grid}{%
\subsection{Test FF\_SAVEBORR\_GRID Default Linear Grid, Log Grid, Power Grid, Threshold Grid}\label{test-ff_saveborr_grid-default-linear-grid-log-grid-power-grid-threshold-grid}}

Call the function with defaults.

\begin{verbatim}
% Same min and max and grid points
[fl_a_min, fl_a_max, it_a_points] = deal(0,50,25);
% Four types of grid points
st_grid_type = 'grid_linspace';
[ar_fl_saveborr_linspace] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type);
st_grid_type = 'grid_log10space';
[ar_fl_saveborr_log10space] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type);
st_grid_type = 'grid_powerspace';
[ar_fl_saveborr_powerspace] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type);
st_grid_type = 'grid_evenlog';
[ar_fl_saveborr_evenlog] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type);
% draw four types of lines jointly
mt_value = [ar_fl_saveborr_linspace'; ar_fl_saveborr_log10space'; ...
    ar_fl_saveborr_powerspace'; ar_fl_saveborr_evenlog'];
ar_row_grid = ["grid linspace", "grid log10space", "grid powerspace", "grid evenlog"];
ar_col_grid = 1:it_a_points;
mp_support_graph = containers.Map('KeyType', 'char', 'ValueType', 'any');
mp_support_graph('cl_st_graph_title') = {'Four Asset Grids with Default Parameters'};
mp_support_graph('cl_st_ytitle') = {'Asset Grid Points'};
mp_support_graph('cl_st_xtitle') = {'Asset Grid Counter'};
mp_support_graph('bl_graph_logy') = true; % do not log
ff_graph_grid(mt_value, ar_row_grid, ar_col_grid, mp_support_graph);
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_saveborr_grid_images/figure_0.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_saveborr_grid_images/figure_1.png}

\hypertarget{test-ff_saveborr_grid-log-grid-changing-parameters}{%
\subsection{Test FF\_SAVEBORR\_GRID Log Grid Changing Parameters}\label{test-ff_saveborr_grid-log-grid-changing-parameters}}

Log grid, same min and max, change log X1 and X2 points

\begin{verbatim}
% Same min and max and grid points
[fl_a_min, fl_a_max, it_a_points] = deal(0,50,25);
st_grid_type = 'grid_log10space';
% Four types of grid points
mp_grid_control = containers.Map('KeyType','char', 'ValueType','any');
mp_grid_control('grid_log10space_x1') = 0.1;
mp_grid_control('grid_log10space_x2') = 1;
[ar_fl_log10space_a] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type, mp_grid_control);
mp_grid_control('grid_log10space_x1') = 0.1/2;
mp_grid_control('grid_log10space_x2') = 1*2;
[ar_fl_log10space_b] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type, mp_grid_control);
mp_grid_control('grid_log10space_x1') = 0.1/4;
mp_grid_control('grid_log10space_x2') = 1*4;
[ar_fl_log10space_c] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type, mp_grid_control);
mp_grid_control('grid_log10space_x1') = 0.1/6;
mp_grid_control('grid_log10space_x2') = 1*6;
[ar_fl_log10space_d] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type, mp_grid_control);
% draw four types of lines jointly
mt_value = [ar_fl_log10space_a'; ar_fl_log10space_b'; ...
    ar_fl_log10space_c'; ar_fl_log10space_d'];
ar_row_grid = [...
    "log10space:x1=0.1/1, x2=1", ...
    "log10space:x1=0.1/2, x2=2", ...
    "log10space:x1=0.1/4, x2=3", ...
    "log10space:x1=0.1/6, x2=4"];
ar_col_grid = 1:it_a_points;
mp_support_graph = containers.Map('KeyType', 'char', 'ValueType', 'any');
mp_support_graph('cl_st_graph_title') = {'Asset Grids with Log 10 Grid Varying Controls'};
mp_support_graph('cl_st_ytitle') = {'Asset Grid Points'};
mp_support_graph('cl_st_xtitle') = {'Asset Grid Counter'};
mp_support_graph('bl_graph_logy') = true; % do not log
ff_graph_grid(mt_value, ar_row_grid, ar_col_grid, mp_support_graph);
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_saveborr_grid_images/figure_2.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_saveborr_grid_images/figure_3.png}

\hypertarget{test-ff_saveborr_grid-power-grid-changing-parameters}{%
\subsection{Test FF\_SAVEBORR\_GRID Power Grid Changing Parameters}\label{test-ff_saveborr_grid-power-grid-changing-parameters}}

Log grid, same min and max, change log X1 and X2 points

\begin{verbatim}
% Same min and max and grid points
[fl_a_min, fl_a_max, it_a_points] = deal(0,50,25);
st_grid_type = 'grid_powerspace';
% Four types of grid points
mp_grid_control = containers.Map('KeyType','char', 'ValueType','any');
mp_grid_control('grid_powerspace_power') = 1;
[ar_fl_powerspace_a] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type, mp_grid_control);
mp_grid_control('grid_powerspace_power') = 2;
[ar_fl_powerspace_b] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type, mp_grid_control);
mp_grid_control('grid_powerspace_power') = 4;
[ar_fl_powerspace_c] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type, mp_grid_control);
mp_grid_control('grid_powerspace_power') = 6;
[ar_fl_powerspace_d] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type, mp_grid_control);
% draw four types of lines jointly
mt_value = [ar_fl_powerspace_a'; ar_fl_powerspace_b'; ...
    ar_fl_powerspace_c'; ar_fl_powerspace_d'];
ar_row_grid = [...
    "powerspace:power=1", ...
    "powerspace:power=2", ...
    "powerspace:power=4", ...
    "powerspace:power=6"];
ar_col_grid = 1:it_a_points;
mp_support_graph = containers.Map('KeyType', 'char', 'ValueType', 'any');
mp_support_graph('cl_st_graph_title') = {'Asset Grids with Power Grid Varying Controls'};
mp_support_graph('cl_st_ytitle') = {'Asset Grid Points'};
mp_support_graph('cl_st_xtitle') = {'Asset Grid Counter'};
mp_support_graph('bl_graph_logy') = true; % do not log
ff_graph_grid(mt_value, ar_row_grid, ar_col_grid, mp_support_graph);
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_saveborr_grid_images/figure_4.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_saveborr_grid_images/figure_5.png}

\hypertarget{test-ff_saveborr_grid-threshold-grid-changing-parameters}{%
\subsection{Test FF\_SAVEBORR\_GRID Threshold Grid Changing Parameters}\label{test-ff_saveborr_grid-threshold-grid-changing-parameters}}

Threshold Grid, Changing Threshold Levels. Initial segments below
threshold are linspace, then logspace.

\begin{verbatim}
% Same min and max and grid points
[fl_a_min, fl_a_max, it_a_points] = deal(0,50,25);
st_grid_type = 'grid_evenlog';
% Four types of grid points
mp_grid_control = containers.Map('KeyType','char', 'ValueType','any');
mp_grid_control('grid_evenlog_threshold') = 0.50;
[ar_fl_evenlog_a] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type, mp_grid_control);
mp_grid_control('grid_evenlog_threshold') = 1.00;
[ar_fl_evenlog_b] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type, mp_grid_control);
mp_grid_control('grid_evenlog_threshold') = 2;
[ar_fl_evenlog_c] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type, mp_grid_control);
mp_grid_control('grid_evenlog_threshold') = 5;
[ar_fl_evenlog_d] = ff_saveborr_grid(fl_a_min, fl_a_max, it_a_points, st_grid_type, mp_grid_control);
% draw four types of lines jointly
mt_value = [ar_fl_evenlog_a'; ar_fl_evenlog_b'; ...
    ar_fl_evenlog_c'; ar_fl_evenlog_d'];
ar_row_grid = [...
    "evenlog:threshold=0.5", ...
    "evenlog:threshold=1.0", ...
    "evenlog:threshold=2.0", ...
    "evenlog:threshold=5.0"];
ar_col_grid = 1:it_a_points;
mp_support_graph = containers.Map('KeyType', 'char', 'ValueType', 'any');
mp_support_graph('cl_st_graph_title') = {'Asset Grids with Threshold Grid Varying Controls'};
mp_support_graph('cl_st_ytitle') = {'Asset Grid Points'};
mp_support_graph('cl_st_xtitle') = {'Asset Grid Counter'};
mp_support_graph('bl_graph_logy') = true; % do not log
ff_graph_grid(mt_value, ar_row_grid, ar_col_grid, mp_support_graph);
\end{verbatim}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_saveborr_grid_images/figure_6.png}

\includegraphics[width=5.20833in,height=\textheight]{img/fx_saveborr_grid_images/figure_7.png}

\hypertarget{common-functions}{%
\chapter{Common Functions}\label{common-functions}}

\hypertarget{ffy_tauchen-ar1-shock-discretization-example}{%
\section{FFY\_TAUCHEN AR1 Shock Discretization Example}\label{ffy_tauchen-ar1-shock-discretization-example}}

\begin{quote}
Go back to \href{http://fanwangecon.github.io/}{fan}'s \href{https://fanwangecon.github.io/MEconTools/}{MEconTools} Toolbox (\href{https://fanwangecon.github.io/MEconTools/bookdown}{bookdown}), \href{https://fanwangecon.github.io/M4Econ/}{Matlab Code Examples} Repository (\href{https://fanwangecon.github.io/M4Econ/bookdown}{bookdown}), or \href{https://fanwangecon.github.io/Math4Econ/}{Math for Econ with Matlab} Repository (\href{https://fanwangecon.github.io/Math4Econ/bookdown}{bookdown}).
\end{quote}

This is the example vignette for function:
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/external/stats/ffy_tauchen.m}{\textbf{ffy\_tauchen}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} : See also
the
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/external/stats/ffy_rouwenhorst.m}{\textbf{ffy\_rouwenhorst}}
function from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} This function
discretize a mean zero AR1 process, uses Tauchen (1986). See \href{https://fanwangecon.github.io/M4Econ/panel/timeseries/htmlpdfm/fs_autoregressive.html}{AR 1
Example}
for some details on how the AR1 process works. And See \href{https://doi.org/10.1016/j.red.2010.02.002}{Kopecky and Suen
(2010)}.

\hypertarget{test-ffy_tauchen-defaults}{%
\subsection{Test FFY\_TAUCHEN Defaults}\label{test-ffy_tauchen-defaults}}

Call the function with defaults. Default sd bounds arer plus and minus
4. This is used in the following examples, unless otherwise specified as
the 5th parameter.

\begin{verbatim}
ffy_tauchen();

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    ndim    numel    rowN    colN    sum    mean      std      coefvari       min         max  
                         _    ___    ____    _____    ____    ____    ___    ____    _______    ________    __________    ______

    ar_disc_ar1          1     1      2        5       5       1       0       0     0.79057        Inf             -1         1
    mt_disc_ar1_trans    2     6      2       25       5       5       5     0.2     0.27623     1.3812     7.3923e-12    0.7887

xxx TABLE:ar_disc_ar1 xxxxxxxxxxxxxxxxxx
           c1 
          ____

    r1      -1
    r2    -0.5
    r3       0
    r4     0.5
    r5       1

xxx TABLE:mt_disc_ar1_trans xxxxxxxxxxxxxxxxxx
              c1            c2           c3           c4            c5    
          __________    __________    ________    __________    __________

    r1       0.22663       0.73331    0.040048    1.0689e-05    7.3923e-12
    r2      0.012224       0.58648     0.39831     0.0029797     7.605e-08
    r3    8.8417e-05       0.10556      0.7887       0.10556    8.8417e-05
    r4     7.605e-08     0.0029797     0.39831       0.58648      0.012224
    r5    7.3923e-12    1.0689e-05    0.040048       0.73331       0.22663

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                          i    idx    value
                          _    ___    _____

    fl_ar1_persistence    1     2      0.6 
    fl_ar1_step           2     3      0.5 
    fl_shk_std            3     4      0.2 
    it_std_bound          4     5        4 
\end{verbatim}

\hypertarget{test-ffy_tauchen-specify-parameters}{%
\subsection{Test FFY\_TAUCHEN Specify Parameters}\label{test-ffy_tauchen-specify-parameters}}

With a grid of 10 points, the sd bounds on Tauchen and Rouwenhorst are
identical. With the not extremely persistent shock process here, the
Tauchen and Rouwenhorst Results are very similar.

\begin{verbatim}
[fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose, it_std_bound] = ...
    deal(0.60, 0.10, 10, true, 3);
ffy_tauchen(fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose, it_std_bound);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    ndim    numel    rowN    colN        sum           mean          std       coefvari         min          max  
                         _    ___    ____    _____    ____    ____    ___________    ___________    _______    ___________    __________    _______

    ar_disc_ar1          1     1      2        10      10       1     -7.2164e-16    -7.2164e-17     0.2523    -3.4962e+15        -0.375      0.375
    mt_disc_ar1_trans    2     6      2       100      10      10              10            0.1    0.11456         1.1456    1.1798e-08    0.32308

xxx TABLE:ar_disc_ar1 xxxxxxxxxxxxxxxxxx
              c1    
           _________

    r1        -0.375
    r2      -0.29167
    r3      -0.20833
    r4        -0.125
    r5     -0.041667
    r6      0.041667
    r7         0.125
    r8       0.20833
    r9       0.29167
    r10        0.375

xxx TABLE:mt_disc_ar1_trans xxxxxxxxxxxxxxxxxx
               c1            c2            c3            c4           c5          c6           c7            c8            c9           c10    
           __________    __________    __________    __________    ________    ________    __________    __________    __________    __________

    r1        0.13933       0.26196       0.31887       0.20154    0.066066    0.011201    0.00097859    4.3874e-05    1.0053e-06    1.1798e-08
    r2       0.056673       0.16995       0.30658       0.28713      0.1396    0.035167     0.0045756    0.00030628    1.0503e-05    1.8543e-07
    r3        0.01861      0.087039       0.23281       0.32308     0.23281    0.087039      0.016841     0.0016806    8.6129e-05    2.2881e-06
    r4      0.0048925      0.035167        0.1396       0.28713     0.30658     0.16995      0.048841     0.0072547    0.00055483    2.2197e-05
    r5      0.0010235      0.011201      0.066066       0.20154     0.31887     0.26196       0.11169       0.02466     0.0028101    0.00016962
    r6     0.00016962     0.0028101       0.02466       0.11169     0.26196     0.31887       0.20154      0.066066      0.011201     0.0010235
    r7     2.2197e-05    0.00055483     0.0072547      0.048841     0.16995     0.30658       0.28713        0.1396      0.035167     0.0048925
    r8     2.2881e-06    8.6129e-05     0.0016806      0.016841    0.087039     0.23281       0.32308       0.23281      0.087039       0.01861
    r9     1.8543e-07    1.0503e-05    0.00030628     0.0045756    0.035167      0.1396       0.28713       0.30658       0.16995      0.056673
    r10    1.1798e-08    1.0053e-06    4.3874e-05    0.00097859    0.011201    0.066066       0.20154       0.31887       0.26196       0.13933

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                          i    idx     value  
                          _    ___    ________

    fl_ar1_persistence    1     2          0.6
    fl_ar1_step           2     3     0.083333
    fl_shk_std            3     4          0.1
    it_std_bound          4     5            3
\end{verbatim}

\hypertarget{test-ffy_tauchen-high-persistence-low-sd}{%
\subsection{Test FFY\_TAUCHEN High Persistence, Low SD}\label{test-ffy_tauchen-high-persistence-low-sd}}

\begin{verbatim}
[fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose] = ...
    deal(0.99, 0.01, 7, true);
ffy_tauchen(fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    ndim    numel    rowN    colN        sum           mean          std       coefvari        min         max  
                         _    ___    ____    _____    ____    ____    ___________    ___________    _______    ___________    ________    _______

    ar_disc_ar1          1     1      2        7       7       1      -5.5511e-17    -7.9302e-18    0.20418    -2.5747e+16    -0.28355    0.28355
    mt_disc_ar1_trans    2     6      2       49       7       7                7        0.14286    0.35355         2.4749           0          1

xxx TABLE:ar_disc_ar1 xxxxxxxxxxxxxxxxxx
              c1     
          ___________

    r1       -0.28355
    r2       -0.18903
    r3      -0.094517
    r4    -2.7756e-17
    r5       0.094517
    r6        0.18903
    r7        0.28355

xxx TABLE:mt_disc_ar1_trans xxxxxxxxxxxxxxxxxx
              c1             c2             c3             c4             c5            c6            c7    
          ___________    ___________    ___________    ___________    __________    __________    __________

    r1              1     4.4497e-06              0              0             0             0             0
    r2     4.4412e-07              1     2.8552e-06              0             0             0             0
    r3      1.632e-46     7.1638e-07              1     1.8164e-06             0             0             0
    r4    9.6185e-124     6.3021e-46     1.1456e-06              1    1.1456e-06             0             0
    r5    6.3206e-239    8.9712e-123     2.4121e-45     1.8164e-06             1    7.1638e-07             0
    r6              0     1.426e-237    8.2932e-122     9.1503e-45    2.8552e-06             1    4.4412e-07
    r7              0              0    3.1885e-236    7.5984e-121    3.4405e-44    4.4497e-06             1

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                          i    idx     value  
                          _    ___    ________

    fl_ar1_persistence    1     2         0.99
    fl_ar1_step           2     3     0.094517
    fl_shk_std            3     4         0.01
    it_std_bound          4     5            4
\end{verbatim}

\hypertarget{test-ffy_tauchen-low-persistence-low-sd}{%
\subsection{Test FFY\_TAUCHEN Low Persistence, Low SD}\label{test-ffy_tauchen-low-persistence-low-sd}}

\begin{verbatim}
[fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose] = ...
    deal(0.01, 0.01, 7, true);
ffy_tauchen(fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    ndim    numel    rowN    colN    sum     mean        std       coefvari       min          max   
                         _    ___    ____    _____    ____    ____    ___    _______    ________    ________    __________    ________

    ar_disc_ar1          1     1      2        7       7       1       0           0    0.028805        Inf      -0.040002    0.040002
    mt_disc_ar1_trans    2     6      2       49       7       7       7     0.14286     0.17448     1.2213     0.00037109     0.49504

xxx TABLE:ar_disc_ar1 xxxxxxxxxxxxxxxxxx
             c1    
          _________

    r1    -0.040002
    r2    -0.026668
    r3    -0.013334
    r4            0
    r5     0.013334
    r6     0.026668
    r7     0.040002

xxx TABLE:mt_disc_ar1_trans xxxxxxxxxxxxxxxxxx
              c1           c2         c3         c4         c5          c6           c7    
          __________    ________    _______    _______    _______    ________    __________

    r1    0.00049475    0.024497    0.24044     0.4947    0.21921    0.020299    0.00037109
    r2    0.00047179    0.023751    0.23685    0.49488     0.2227    0.020954    0.00038948
    r3    0.00044982    0.023024    0.23329      0.495    0.22621    0.021626     0.0004087
    r4     0.0004288    0.022316    0.22974    0.49504    0.22974    0.022316     0.0004288
    r5     0.0004087    0.021626    0.22621      0.495    0.23329    0.023024    0.00044982
    r6    0.00038948    0.020954     0.2227    0.49488    0.23685    0.023751    0.00047179
    r7    0.00037109    0.020299    0.21921     0.4947    0.24044    0.024497    0.00049475

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                          i    idx     value  
                          _    ___    ________

    fl_ar1_persistence    1     2         0.01
    fl_ar1_step           2     3     0.013334
    fl_shk_std            3     4         0.01
    it_std_bound          4     5            4
\end{verbatim}

\hypertarget{test-ffy_tauchen-high-persistence-high-sd}{%
\subsection{Test FFY\_TAUCHEN High Persistence, High SD}\label{test-ffy_tauchen-high-persistence-high-sd}}

\begin{verbatim}
[fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose] = ...
    deal(0.99, 0.99, 7, true);
ffy_tauchen(fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    ndim    numel    rowN    colN        sum           mean          std       coefvari        min       max  
                         _    ___    ____    _____    ____    ____    ___________    ___________    _______    ___________    _______    ______

    ar_disc_ar1          1     1      2        7       7       1      -3.5527e-15    -5.0753e-16     20.214    -3.9828e+16    -28.072    28.072
    mt_disc_ar1_trans    2     6      2       49       7       7                7        0.14286    0.35355         2.4749          0         1

xxx TABLE:ar_disc_ar1 xxxxxxxxxxxxxxxxxx
            c1   
          _______

    r1    -28.072
    r2    -18.714
    r3    -9.3572
    r4          0
    r5     9.3572
    r6     18.714
    r7     28.072

xxx TABLE:mt_disc_ar1_trans xxxxxxxxxxxxxxxxxx
              c1             c2             c3             c4             c5            c6            c7    
          ___________    ___________    ___________    ___________    __________    __________    __________

    r1              1     4.4497e-06              0              0             0             0             0
    r2     4.4412e-07              1     2.8552e-06              0             0             0             0
    r3      1.632e-46     7.1638e-07              1     1.8164e-06             0             0             0
    r4    9.6185e-124     6.3021e-46     1.1456e-06              1    1.1456e-06             0             0
    r5    6.3206e-239    8.9712e-123     2.4121e-45     1.8164e-06             1    7.1638e-07             0
    r6              0     1.426e-237    8.2932e-122     9.1503e-45    2.8552e-06             1    4.4412e-07
    r7              0              0    3.1885e-236    7.5984e-121    3.4405e-44    4.4497e-06             1

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                          i    idx    value 
                          _    ___    ______

    fl_ar1_persistence    1     2       0.99
    fl_ar1_step           2     3     9.3572
    fl_shk_std            3     4       0.99
    it_std_bound          4     5          4
\end{verbatim}

\hypertarget{test-ffy_tauchen-low-persistence-low-sd-1}{%
\subsection{Test FFY\_TAUCHEN Low Persistence, Low SD}\label{test-ffy_tauchen-low-persistence-low-sd-1}}

\begin{verbatim}
[fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose] = ...
    deal(0.01, 0.01, 7, true);
ffy_tauchen(fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    ndim    numel    rowN    colN    sum     mean        std       coefvari       min          max   
                         _    ___    ____    _____    ____    ____    ___    _______    ________    ________    __________    ________

    ar_disc_ar1          1     1      2        7       7       1       0           0    0.028805        Inf      -0.040002    0.040002
    mt_disc_ar1_trans    2     6      2       49       7       7       7     0.14286     0.17448     1.2213     0.00037109     0.49504

xxx TABLE:ar_disc_ar1 xxxxxxxxxxxxxxxxxx
             c1    
          _________

    r1    -0.040002
    r2    -0.026668
    r3    -0.013334
    r4            0
    r5     0.013334
    r6     0.026668
    r7     0.040002

xxx TABLE:mt_disc_ar1_trans xxxxxxxxxxxxxxxxxx
              c1           c2         c3         c4         c5          c6           c7    
          __________    ________    _______    _______    _______    ________    __________

    r1    0.00049475    0.024497    0.24044     0.4947    0.21921    0.020299    0.00037109
    r2    0.00047179    0.023751    0.23685    0.49488     0.2227    0.020954    0.00038948
    r3    0.00044982    0.023024    0.23329      0.495    0.22621    0.021626     0.0004087
    r4     0.0004288    0.022316    0.22974    0.49504    0.22974    0.022316     0.0004288
    r5     0.0004087    0.021626    0.22621      0.495    0.23329    0.023024    0.00044982
    r6    0.00038948    0.020954     0.2227    0.49488    0.23685    0.023751    0.00047179
    r7    0.00037109    0.020299    0.21921     0.4947    0.24044    0.024497    0.00049475

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                          i    idx     value  
                          _    ___    ________

    fl_ar1_persistence    1     2         0.01
    fl_ar1_step           2     3     0.013334
    fl_shk_std            3     4         0.01
    it_std_bound          4     5            4
\end{verbatim}

\hypertarget{ffy_rouwenhorst-ar1-shock-discretization-example}{%
\section{FFY\_ROUWENHORST AR1 Shock Discretization Example}\label{ffy_rouwenhorst-ar1-shock-discretization-example}}

\begin{quote}
Go back to \href{http://fanwangecon.github.io/}{fan}'s \href{https://fanwangecon.github.io/MEconTools/}{MEconTools} Toolbox (\href{https://fanwangecon.github.io/MEconTools/bookdown}{bookdown}), \href{https://fanwangecon.github.io/M4Econ/}{Matlab Code Examples} Repository (\href{https://fanwangecon.github.io/M4Econ/bookdown}{bookdown}), or \href{https://fanwangecon.github.io/Math4Econ/}{Math for Econ with Matlab} Repository (\href{https://fanwangecon.github.io/Math4Econ/bookdown}{bookdown}).
\end{quote}

This is the example vignette for function:
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/external/stats/ffy_rouwenhorst.m}{\textbf{ffy\_rouwenhorst}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} See also
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/external/stats/ffy_tauchen.m}{\textbf{ffy\_tauchen}}
function from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} This function
discretize a mean zero AR1 process, uses Rouwenhorst (1995). See \href{https://fanwangecon.github.io/M4Econ/panel/timeseries/htmlpdfm/fs_autoregressive.html}{AR 1
Example}
for some details on how the AR1 process works. And See \href{https://doi.org/10.1016/j.red.2010.02.002}{Kopecky and Suen
(2010)}.

\hypertarget{test-ffy_rouwenhorst-defaults}{%
\subsection{Test FFY\_ROUWENHORST Defaults}\label{test-ffy_rouwenhorst-defaults}}

Call the function with defaults.

\begin{verbatim}
ffy_rouwenhorst();

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    ndim    numel    rowN    colN    sum    mean      std      coefvari     min       max  
                         _    ___    ____    _____    ____    ____    ___    ____    _______    ________    ______    ______

    ar_disc_ar1          1     1      2        5       5       1       0       0     0.39528        Inf       -0.5       0.5
    mt_disc_ar1_trans    2    11      2       25       5       5       5     0.2     0.18246    0.91229     0.0016    0.5136

xxx TABLE:ar_disc_ar1 xxxxxxxxxxxxxxxxxx
           c1  
          _____

    r1     -0.5
    r2    -0.25
    r3        0
    r4     0.25
    r5      0.5

xxx TABLE:mt_disc_ar1_trans xxxxxxxxxxxxxxxxxx
            c1        c2        c3        c4        c5  
          ______    ______    ______    ______    ______

    r1    0.4096    0.4096    0.1536    0.0256    0.0016
    r2    0.1024    0.4864    0.3264    0.0784    0.0064
    r3    0.0256    0.2176    0.5136    0.2176    0.0256
    r4    0.0064    0.0784    0.3264    0.4864    0.1024
    r5    0.0016    0.0256    0.1536    0.4096    0.4096

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                          i    idx    value
                          _    ___    _____

    fl_ar1_beg            1     2     -0.5 
    fl_ar1_end            2     3      0.5 
    fl_ar1_persistence    3     4      0.6 
    fl_ar1_step           4     5     0.25 
    fl_p0                 5     6      0.8 
    fl_q0                 6     7      0.8 
    fl_shk_std            7     8      0.2 
    fl_sig_ar1            8     9     0.25 
    it_std_bound          9    10        0 
\end{verbatim}

\hypertarget{test-ffy_rouwenhorst-specify-parameters}{%
\subsection{Test FFY\_ROUWENHORST Specify Parameters}\label{test-ffy_rouwenhorst-specify-parameters}}

With a grid of 10 points, the Rwouenhorst bounds on standard deviations
are equall to Tauchen bounds of 3. With the not extremely persistent
shock process here, the Tauchen and Rouwenhorst Results are very
similar.

\begin{verbatim}
[fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose] = ...
    deal(0.60, 0.10, 10, true);
ffy_rouwenhorst(fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    ndim    numel    rowN    colN       sum           mean         std       coefvari       min         max  
                         _    ___    ____    _____    ____    ____    __________    __________    _______    __________    ________    _______

    ar_disc_ar1          1     1      2        10      10       1     5.5511e-17    5.5511e-18     0.2523    4.5451e+16      -0.375      0.375
    mt_disc_ar1_trans    2    11      2       100      10      10             10           0.1    0.11724        1.1724    5.12e-07    0.33477

xxx TABLE:ar_disc_ar1 xxxxxxxxxxxxxxxxxx
              c1    
           _________

    r1        -0.375
    r2      -0.29167
    r3      -0.20833
    r4        -0.125
    r5     -0.041667
    r6      0.041667
    r7         0.125
    r8       0.20833
    r9       0.29167
    r10        0.375

xxx TABLE:mt_disc_ar1_trans xxxxxxxxxxxxxxxxxx
               c1            c2            c3           c4           c5          c6          c7            c8            c9           c10    
           __________    __________    __________    _________    ________    ________    _________    __________    __________    __________

    r1        0.13422       0.30199       0.30199      0.17616     0.06606    0.016515    0.0027525    0.00029491    1.8432e-05      5.12e-07
    r2       0.033554       0.20133       0.32716      0.26424     0.12662    0.038535    0.0075694    0.00093389    6.6048e-05     2.048e-06
    r3      0.0083886      0.081789       0.26267      0.32755     0.21401    0.082747     0.019741     0.0028677    0.00023347     8.192e-06
    r4      0.0020972      0.028312       0.14038      0.30946     0.30369     0.15877     0.047989     0.0084603    0.00081101    3.2768e-05
    r5     0.00052429      0.009044      0.061145      0.20246     0.33477     0.25969      0.10585      0.023642     0.0027525    0.00013107
    r6     0.00013107     0.0027525      0.023642      0.10585     0.25969     0.33477      0.20246      0.061145      0.009044    0.00052429
    r7     3.2768e-05    0.00081101     0.0084603     0.047989     0.15877     0.30369      0.30946       0.14038      0.028312     0.0020972
    r8      8.192e-06    0.00023347     0.0028677     0.019741    0.082747     0.21401      0.32755       0.26267      0.081789     0.0083886
    r9      2.048e-06    6.6048e-05    0.00093389    0.0075694    0.038535     0.12662      0.26424       0.32716       0.20133      0.033554
    r10      5.12e-07    1.8432e-05    0.00029491    0.0027525    0.016515     0.06606      0.17616       0.30199       0.30199       0.13422

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                          i    idx     value  
                          _    ___    ________

    fl_ar1_beg            1     2       -0.375
    fl_ar1_end            2     3        0.375
    fl_ar1_persistence    3     4          0.6
    fl_ar1_step           4     5     0.083333
    fl_p0                 5     6          0.8
    fl_q0                 6     7          0.8
    fl_shk_std            7     8          0.1
    fl_sig_ar1            8     9        0.125
    it_std_bound          9    10            0
\end{verbatim}

\hypertarget{test-ffy_rouwenhorst-high-persistence-low-sd}{%
\subsection{Test FFY\_ROUWENHORST High Persistence, Low SD}\label{test-ffy_rouwenhorst-high-persistence-low-sd}}

\begin{verbatim}
[fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose] = ...
    deal(0.99, 0.01, 7, true);
ffy_rouwenhorst(fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    ndim    numel    rowN    colN    sum     mean        std      coefvari       min          max  
                         _    ___    ____    _____    ____    ____    ___    _______    _______    ________    __________    _______

    ar_disc_ar1          1     1      2        7       7       1       0           0    0.12503        Inf       -0.17364    0.17364
    mt_disc_ar1_trans    2    11      2       49       7       7       7     0.14286    0.34148     2.3904     1.5625e-14    0.97059

xxx TABLE:ar_disc_ar1 xxxxxxxxxxxxxxxxxx
             c1   
          ________

    r1    -0.17364
    r2    -0.11576
    r3    -0.05788
    r4           0
    r5     0.05788
    r6     0.11576
    r7     0.17364

xxx TABLE:mt_disc_ar1_trans xxxxxxxxxxxxxxxxxx
              c1            c2            c3            c4            c5            c6            c7    
          __________    __________    __________    __________    __________    __________    __________

    r1       0.97037      0.029257    0.00036756    2.4627e-06    9.2815e-09    1.8656e-11    1.5625e-14
    r2     0.0048762        0.9705      0.024382    0.00024504    1.2314e-06    3.0938e-09    3.1094e-12
    r3    2.4504e-05      0.009753       0.97057      0.019506    0.00014703    4.9254e-07    6.1877e-10
    r4    1.2313e-07    7.3513e-05       0.01463       0.97059       0.01463    7.3513e-05    1.2313e-07
    r5    6.1877e-10    4.9254e-07    0.00014703      0.019506       0.97057      0.009753    2.4504e-05
    r6    3.1094e-12    3.0938e-09    1.2314e-06    0.00024504      0.024382        0.9705     0.0048762
    r7    1.5625e-14    1.8656e-11    9.2815e-09    2.4627e-06    0.00036756      0.029257       0.97037

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                          i    idx     value  
                          _    ___    ________

    fl_ar1_beg            1     2     -0.17364
    fl_ar1_end            2     3      0.17364
    fl_ar1_persistence    3     4         0.99
    fl_ar1_step           4     5      0.05788
    fl_p0                 5     6        0.995
    fl_q0                 6     7        0.995
    fl_shk_std            7     8         0.01
    fl_sig_ar1            8     9     0.070888
    it_std_bound          9    10            0
\end{verbatim}

\hypertarget{test-ffy_rouwenhorst-low-persistence-low-sd}{%
\subsection{Test FFY\_ROUWENHORST Low Persistence, Low SD}\label{test-ffy_rouwenhorst-low-persistence-low-sd}}

\begin{verbatim}
[fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose] = ...
    deal(0.01, 0.01, 7, true);
ffy_rouwenhorst(fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    ndim    numel    rowN    colN    sum     mean        std       coefvari       min         max   
                         _    ___    ____    _____    ____    ____    ___    _______    ________    ________    _________    ________

    ar_disc_ar1          1     1      2        7       7       1       0           0    0.017639        Inf     -0.024496    0.024496
    mt_disc_ar1_trans    2    11      2       49       7       7       7     0.14286     0.10985    0.76893      0.014711     0.31252

xxx TABLE:ar_disc_ar1 xxxxxxxxxxxxxxxxxx
              c1    
          __________

    r1     -0.024496
    r2     -0.016331
    r3    -0.0081654
    r4             0
    r5     0.0081654
    r6      0.016331
    r7      0.024496

xxx TABLE:mt_disc_ar1_trans xxxxxxxxxxxxxxxxxx
             c1          c2         c3         c4         c5          c6          c7   
          ________    ________    _______    _______    _______    ________    ________

    r1    0.016586    0.097547    0.23904    0.31241    0.22966    0.090047    0.014711
    r2    0.016258    0.096266    0.23749    0.31247    0.23124    0.091266    0.015008
    r3    0.015936    0.094997    0.23594    0.31251    0.23281    0.092497    0.015311
    r4     0.01562    0.093741    0.23438    0.31252    0.23438    0.093741     0.01562
    r5    0.015311    0.092497    0.23281    0.31251    0.23594    0.094997    0.015936
    r6    0.015008    0.091266    0.23124    0.31247    0.23749    0.096266    0.016258
    r7    0.014711    0.090047    0.22966    0.31241    0.23904    0.097547    0.016586

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                          i    idx      value  
                          _    ___    _________

    fl_ar1_beg            1     2     -0.024496
    fl_ar1_end            2     3      0.024496
    fl_ar1_persistence    3     4          0.01
    fl_ar1_step           4     5     0.0081654
    fl_p0                 5     6         0.505
    fl_q0                 6     7         0.505
    fl_shk_std            7     8          0.01
    fl_sig_ar1            8     9      0.010001
    it_std_bound          9    10             0
\end{verbatim}

\hypertarget{test-ffy_rouwenhorst-high-persistence-high-sd}{%
\subsection{Test FFY\_ROUWENHORST High Persistence, High SD}\label{test-ffy_rouwenhorst-high-persistence-high-sd}}

\begin{verbatim}
[fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose] = ...
    deal(0.99, 0.99, 7, true);
ffy_rouwenhorst(fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    ndim    numel    rowN    colN       sum           mean         std      coefvari        min          max  
                         _    ___    ____    _____    ____    ____    __________    __________    _______    _________    __________    _______

    ar_disc_ar1          1     1      2        7       7       1      3.5527e-15    5.0753e-16     12.378    2.439e+16        -17.19      17.19
    mt_disc_ar1_trans    2    11      2       49       7       7               7       0.14286    0.34148       2.3904    1.5625e-14    0.97059

xxx TABLE:ar_disc_ar1 xxxxxxxxxxxxxxxxxx
            c1   
          _______

    r1     -17.19
    r2     -11.46
    r3    -5.7301
    r4          0
    r5     5.7301
    r6      11.46
    r7      17.19

xxx TABLE:mt_disc_ar1_trans xxxxxxxxxxxxxxxxxx
              c1            c2            c3            c4            c5            c6            c7    
          __________    __________    __________    __________    __________    __________    __________

    r1       0.97037      0.029257    0.00036756    2.4627e-06    9.2815e-09    1.8656e-11    1.5625e-14
    r2     0.0048762        0.9705      0.024382    0.00024504    1.2314e-06    3.0938e-09    3.1094e-12
    r3    2.4504e-05      0.009753       0.97057      0.019506    0.00014703    4.9254e-07    6.1877e-10
    r4    1.2313e-07    7.3513e-05       0.01463       0.97059       0.01463    7.3513e-05    1.2313e-07
    r5    6.1877e-10    4.9254e-07    0.00014703      0.019506       0.97057      0.009753    2.4504e-05
    r6    3.1094e-12    3.0938e-09    1.2314e-06    0.00024504      0.024382        0.9705     0.0048762
    r7    1.5625e-14    1.8656e-11    9.2815e-09    2.4627e-06    0.00036756      0.029257       0.97037

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                          i    idx    value 
                          _    ___    ______

    fl_ar1_beg            1     2     -17.19
    fl_ar1_end            2     3      17.19
    fl_ar1_persistence    3     4       0.99
    fl_ar1_step           4     5     5.7301
    fl_p0                 5     6      0.995
    fl_q0                 6     7      0.995
    fl_shk_std            7     8       0.99
    fl_sig_ar1            8     9     7.0179
    it_std_bound          9    10          0
\end{verbatim}

\hypertarget{test-ffy_rouwenhorst-low-persistence-low-sd-1}{%
\subsection{Test FFY\_ROUWENHORST Low Persistence, Low SD}\label{test-ffy_rouwenhorst-low-persistence-low-sd-1}}

\begin{verbatim}
[fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose] = ...
    deal(0.01, 0.01, 7, true);
ffy_rouwenhorst(fl_ar1_persistence, fl_shk_std, it_disc_points, bl_verbose);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    ndim    numel    rowN    colN    sum     mean        std       coefvari       min         max   
                         _    ___    ____    _____    ____    ____    ___    _______    ________    ________    _________    ________

    ar_disc_ar1          1     1      2        7       7       1       0           0    0.017639        Inf     -0.024496    0.024496
    mt_disc_ar1_trans    2    11      2       49       7       7       7     0.14286     0.10985    0.76893      0.014711     0.31252

xxx TABLE:ar_disc_ar1 xxxxxxxxxxxxxxxxxx
              c1    
          __________

    r1     -0.024496
    r2     -0.016331
    r3    -0.0081654
    r4             0
    r5     0.0081654
    r6      0.016331
    r7      0.024496

xxx TABLE:mt_disc_ar1_trans xxxxxxxxxxxxxxxxxx
             c1          c2         c3         c4         c5          c6          c7   
          ________    ________    _______    _______    _______    ________    ________

    r1    0.016586    0.097547    0.23904    0.31241    0.22966    0.090047    0.014711
    r2    0.016258    0.096266    0.23749    0.31247    0.23124    0.091266    0.015008
    r3    0.015936    0.094997    0.23594    0.31251    0.23281    0.092497    0.015311
    r4     0.01562    0.093741    0.23438    0.31252    0.23438    0.093741     0.01562
    r5    0.015311    0.092497    0.23281    0.31251    0.23594    0.094997    0.015936
    r6    0.015008    0.091266    0.23124    0.31247    0.23749    0.096266    0.016258
    r7    0.014711    0.090047    0.22966    0.31241    0.23904    0.097547    0.016586

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                          i    idx      value  
                          _    ___    _________

    fl_ar1_beg            1     2     -0.024496
    fl_ar1_end            2     3      0.024496
    fl_ar1_persistence    3     4          0.01
    fl_ar1_step           4     5     0.0081654
    fl_p0                 5     6         0.505
    fl_q0                 6     7         0.505
    fl_shk_std            7     8          0.01
    fl_sig_ar1            8     9      0.010001
    it_std_bound          9    10             0
\end{verbatim}

\hypertarget{support-tools}{%
\chapter{Support Tools}\label{support-tools}}

\hypertarget{ff_container_map_display-examples}{%
\section{FF\_CONTAINER\_MAP\_DISPLAY Examples}\label{ff_container_map_display-examples}}

\begin{quote}
Go back to \href{http://fanwangecon.github.io/}{fan}'s \href{https://fanwangecon.github.io/MEconTools/}{MEconTools} Toolbox (\href{https://fanwangecon.github.io/MEconTools/bookdown}{bookdown}), \href{https://fanwangecon.github.io/M4Econ/}{Matlab Code Examples} Repository (\href{https://fanwangecon.github.io/M4Econ/bookdown}{bookdown}), or \href{https://fanwangecon.github.io/Math4Econ/}{Math for Econ with Matlab} Repository (\href{https://fanwangecon.github.io/Math4Econ/bookdown}{bookdown}).
\end{quote}

This is the example vignette for function:
\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/tools/ff_container_map_display.m}{\textbf{ff\_container\_map\_display}}
from the \href{https://fanwangecon.github.io/MEconTools/}{\textbf{MEconTools
Package}}\textbf{.} This function
summarizes statistics of matrixes stored in a container map, as well as
scalar, string, function and other values stored in container maps.

\hypertarget{test-ff_container_map_display-defaults}{%
\subsection{Test FF\_CONTAINER\_MAP\_DISPLAY Defaults}\label{test-ff_container_map_display-defaults}}

Call the function with defaults.

\begin{verbatim}
ff_container_map_display();

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
 ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                      i     idx    ndim    numel    rowN    colN     sum       mean        std      coefvari       min          max  
                      __    ___    ____    _____    ____    ____    ______    _______    _______    ________    __________    _______

    mat_1              1     7      2        12       3       4     6.5142    0.54285     0.2232    0.41115        0.22685    0.98076
    mat_2              2     8      2      2650      50      53     1313.3    0.49559    0.29232    0.58985     6.7838e-05    0.99964
    mat_2_boolean      3     9      2      2650      50      53       1361    0.51358    0.49991    0.97337              0          1
    mat_3              4    10      2         4       2       2     1.8111    0.45277    0.45111    0.99635     0.00012471    0.88615
    tensor_1           5    15      3        16       2       8     7.3043    0.45652    0.27787    0.60867       0.018091     0.8345
    tensor_2           6    16      3        75       3      25     40.195    0.53593    0.29044    0.54194      0.0024293    0.99731
    tensor_3           7    17      2         4       1       4     1.6926    0.42315    0.37389    0.88359         0.1219    0.91553
    tesseract_1        8    18      4        72       3      24     34.321    0.47669    0.26374    0.55327       0.010239    0.96435
    tesseract_2        9    19      4        20       2      10     8.4191    0.42096    0.28981    0.68846       0.043114    0.97146
    tesseract_bl_3    10    20      4        10       1      10          3        0.3    0.48305     1.6102              0          1

xxx TABLE:mat_1 xxxxxxxxxxxxxxxxxx
            c1         c2         c3         c4   
          _______    _______    _______    _______

    r1    0.69647    0.55131    0.98076    0.39212
    r2    0.28614    0.71947    0.68483    0.34318
    r3    0.22685    0.42311    0.48093    0.72905

xxx TABLE:mat_2 xxxxxxxxxxxxxxxxxx
              c1          c2         c3          c4         c50         c51         c52         c53   
           ________    ________    _______    ________    ________    ________    ________    ________

    r1      0.43857      0.6249    0.17108     0.56564    0.072152     0.67855     0.61667     0.54002
    r2     0.059678     0.67469    0.82911    0.084904     0.63289     0.27236     0.32528     0.24957
    r3      0.39804     0.84234    0.33867     0.58267    0.046367     0.44513    0.075047      0.7839
    r4        0.738    0.083195    0.55237     0.81484     0.50561     0.11117     0.59532     0.35603
    r5      0.18249     0.76368    0.57855     0.33707     0.10653    0.028681      0.7435     0.91869
    r46      0.6813     0.55326    0.88786     0.69983     0.83758     0.16382     0.74191    0.065638
    r47     0.87546     0.85445    0.69631     0.66117     0.97069     0.79092     0.42466     0.78725
    r48     0.51042     0.38484    0.44033    0.049097    0.017768     0.33302     0.24401     0.97956
    r49     0.66931     0.31679    0.43821      0.7923     0.12979     0.75311     0.79466    0.079086
    r50     0.58594     0.35426     0.7651     0.51872     0.86415     0.58281     0.84795      0.4579

xxx TABLE:mat_2_boolean xxxxxxxxxxxxxxxxxx
            c1       c2       c3       c4       c50      c51      c52      c53 
           _____    _____    _____    _____    _____    _____    _____    _____

    r1     true     false    false    true     true     false    true     true 
    r2     true     false    true     true     false    false    true     true 
    r3     false    true     false    true     false    true     false    true 
    r4     false    true     false    false    false    true     true     true 
    r5     true     true     true     false    true     false    false    true 
    r46    false    true     true     false    true     true     true     true 
    r47    true     true     true     true     true     true     false    false
    r48    true     false    false    false    true     true     false    true 
    r49    true     true     false    true     true     true     false    false
    r50    false    false    false    false    false    false    false    false

xxx TABLE:mat_3 xxxxxxxxxxxxxxxxxx
              c1          c2   
          __________    _______

    r1    0.00012471    0.13253
    r2       0.88615    0.79226

xxx TABLE:tensor_1 xxxxxxxxxxxxxxxxxx
             c1         c2         c3         c4         c5         c6         c7        c8   
          ________    _______    _______    _______    _______    _______    ______    _______

    r1    0.019363    0.34271    0.52167    0.53703    0.75756    0.68839    0.8345    0.26597
    r2    0.018091    0.33355    0.11738    0.77857    0.81933    0.28644    0.6157      0.368

xxx TABLE:tensor_2 xxxxxxxxxxxxxxxxxx
             c1         c2         c3         c4         c22        c23         c24         c25  
          ________    _______    _______    _______    _______    _______    _________    _______

    r1     0.51866    0.40495    0.48278    0.99731    0.46584    0.62976     0.035924    0.10505
    r2    0.028692    0.37408    0.24149    0.35201    0.66054    0.87243    0.0024293    0.81088
    r3     0.87339    0.19457    0.83212    0.15315    0.77859    0.96663       0.2501     0.8056

xxx TABLE:tensor_3 xxxxxxxxxxxxxxxxxx
            c1        c2        c3         c4   
          ______    ______    _______    _______

    r1    0.1219    0.5119    0.91553    0.14329

xxx TABLE:tesseract_1 xxxxxxxxxxxxxxxxxx
            c1         c2         c3          c4         c21        c22        c23        c24  
          _______    _______    _______    ________    _______    _______    _______    _______

    r1    0.64531    0.59299    0.32115     0.67653    0.90328    0.56911    0.52562    0.12014
    r2    0.74558     0.5007    0.46142     0.21384    0.35564    0.13732      0.155    0.23786
    r3    0.91137    0.46403    0.18118    0.049919    0.46246    0.46842    0.75348    0.64547

xxx TABLE:tesseract_2 xxxxxxxxxxxxxxxxxx
             c1         c2         c3         c4         c7         c8          c9         c10  
          ________    _______    _______    _______    _______    _______    ________    _______

    r1     0.28898    0.48211    0.44359    0.97146    0.61782    0.65121     0.80715    0.11605
    r2    0.094493    0.34941    0.17595    0.14192    0.16754    0.57097    0.043114    0.70518

xxx TABLE:tesseract_bl_3 xxxxxxxxxxxxxxxxxx
           c1       c2       c3       c4       c7       c8       c9       c10 
          _____    _____    _____    _____    _____    _____    _____    _____

    r1    false    false    true     true     false    true     false    false

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
 Scalars
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                      i    idx     value 
                      _    ___    _______

    boolean_1         1     1           1
    empty             2     2         NaN
    mat_4             3    11     0.74898
    string_float_1    4    13      1021.1
    string_int_1      5    14        1021

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
 String
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                      i     idx            string        
                     ___    ____    _____________________

    list_string_1    "1"    "5"     "col1;col2;col3;col4"
    list_string_2    "2"    "6"     "row1;row2;row3;row4"
    string_1         "3"    "12"    "Table Name"         

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
 Functions
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
              i     idx      functionString   
             ___    ___    ___________________

    func1    "1"    "3"    "@(x)1+2+x"        
    func2    "2"    "4"    "@(x,y)x*1+sqrt(y)"
\end{verbatim}

\hypertarget{test-ff_container_map_display-summarize-matrix-only}{%
\subsection{Test FF\_CONTAINER\_MAP\_DISPLAY summarize Matrix Only}\label{test-ff_container_map_display-summarize-matrix-only}}

Three large matrixes, show summaries

\begin{verbatim}
% Create Container
mp_container_map = containers.Map('KeyType','char', 'ValueType','any');
rng(123);
mp_container_map('mat_1') = rand(100,100);
mp_container_map('mat_2') = rand(100,100)*2 + 1;
mp_container_map('mat_2_boolean') = (rand(100,100) > 0.5);
% Will only print 
ff_container_map_display(mp_container_map);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                     i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari       min          max  
                     _    ___    ____    _____    ____    ____    ______    _______    _______    ________    __________    _______

    mat_1            1     1      2      10000    100     100     4982.3    0.49823    0.28829    0.57863     6.7838e-05    0.99989
    mat_2            2     2      2      10000    100     100      20029     2.0029    0.57632    0.28774         1.0003     2.9993
    mat_2_boolean    3     3      2      10000    100     100       4995     0.4995    0.50002     1.0011              0          1
\end{verbatim}

\hypertarget{test-ff_container_map_display-show-matrix-subset}{%
\subsection{Test FF\_CONTAINER\_MAP\_DISPLAY Show Matrix Subset}\label{test-ff_container_map_display-show-matrix-subset}}

A container map with three small matrixes, print only only 2 rows and 3
columns.

\begin{verbatim}
% Create Container
mp_container_map = containers.Map('KeyType','char', 'ValueType','any');
rng(789);
mp_container_map('mat_1') = rand(3,4);
mp_container_map('mat_2') = rand(50,53);
mp_container_map('mat_2_boolean') = (rand(50,53) > 0.5);
% Will only print 
ff_container_map_display(mp_container_map, 2, 3);

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_container_map ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                     i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari       min          max  
                     _    ___    ____    _____    ____    ____    ______    _______    _______    ________    __________    _______

    mat_1            1     1      2        12       3       4     4.9876    0.41564    0.33586    0.80805        0.01062    0.97541
    mat_2            2     2      2      2650      50      53     1324.3    0.49973    0.28834    0.57699     0.00046692    0.99985
    mat_2_boolean    3     3      2      2650      50      53       1350    0.50943    0.50001    0.98149              0          1

xxx TABLE:mat_1 xxxxxxxxxxxxxxxxxx
            c1         c2         c3         c4   
          _______    _______    _______    _______

    r1    0.32333    0.62442    0.01062    0.53815
    r3    0.79378    0.75889    0.11104    0.55157

xxx TABLE:mat_2 xxxxxxxxxxxxxxxxxx
             c1         c2         c52        c53  
           _______    _______    _______    _______

    r1     0.72837    0.20976    0.74583    0.22321
    r50    0.52812      0.545    0.49521    0.29826

xxx TABLE:mat_2_boolean xxxxxxxxxxxxxxxxxx
            c1       c2       c52      c53 
           _____    _____    _____    _____

    r1     false    true     true     true 
    r50    true     false    false    true
\end{verbatim}

\hypertarget{appendix-appendix}{%
\appendix}


\hypertarget{index-and-code-links}{%
\chapter{Index and Code Links}\label{index-and-code-links}}

\hypertarget{savings-dynamic-programming-links}{%
\section{Savings Dynamic Programming links}\label{savings-dynamic-programming-links}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_loop.html}{Looped Grid Infinite Horizon Dynamic Savings Problem}: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/vfi/fx_vfi_az_loop.mlx}{\textbf{mlx}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_loop.m}{\textbf{m}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_loop.pdf}{\textbf{pdf}} \textbar{} \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_loop.html}{\textbf{html}}

  \begin{itemize}
  \tightlist
  \item
    Common grid looped solution
  \item
    Slow, but easy to modify, useful for developing new models
  \item
    Given preferences, some AR(1) shock process, solve the infinite horizon household savings dynamic programming problem. The state-space and choice-space share the same asset grid.
  \item
    \textbf{MEconTools}: \emph{\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_loop.m}{ff\_vfi\_az\_loop()}}
  \end{itemize}
\item
  \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_vec.html}{Vectorized Grid Infinite Horizon Dynamic Savings Problem}: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/vfi/fx_vfi_az_vec.mlx}{\textbf{mlx}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_vec.m}{\textbf{m}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_vec.pdf}{\textbf{pdf}} \textbar{} \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_vec.html}{\textbf{html}}

  \begin{itemize}
  \tightlist
  \item
    Common grid vectorized solution
  \item
    Fast, sufficiently approximate value(a,z), but c(a,z) not precise
  \item
    Given preferences, some AR(1) shock process, solve the infinite horizon household savings dynamic programming problem. The state-space and choice-space share the same asset grid.
  \item
    \textbf{MEconTools}: \emph{\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_vec.m}{ff\_vfi\_az\_vec()}}
  \end{itemize}
\item
  \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_bisec_loop.html}{Looped Grid Infinite Horizon Dynamic Savings Problem}: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/vfi/fx_vfi_az_bisec_loop.mlx}{\textbf{mlx}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_bisec_loop.m}{\textbf{m}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_bisec_loop.pdf}{\textbf{pdf}} \textbar{} \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_bisec_loop.html}{\textbf{html}}

  \begin{itemize}
  \tightlist
  \item
    Exact choice looped solution
  \item
    Slow, but high precision at low grid size (given value grid, accurate up to 0.001525878 percent of individual-specific cash-on-hand)
  \item
    Given preferences, some AR(1) shock process, solve the infinite horizon household savings dynamic programming problem. The state-space is on a grid. The choice space are continuous percentages of cash-on-hand.
  \item
    \textbf{MEconTools}: \emph{\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_loop.m}{ff\_vfi\_az\_bisec\_loop()}}
  \end{itemize}
\item
  \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_bisec_vec.html}{Vectorized Grid Infinite Horizon Dynamic Savings Problem}: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/vfi/fx_vfi_az_bisec_vec.mlx}{\textbf{mlx}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_bisec_vec.m}{\textbf{m}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_bisec_vec.pdf}{\textbf{pdf}} \textbar{} \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/vfi/htmlpdfm/fx_vfi_az_bisec_vec.html}{\textbf{html}}

  \begin{itemize}
  \tightlist
  \item
    Exact choice vectorized solution
  \item
    Fast, approximates choices with higher precision (given value grid, accurate up to 0.001525878 percent of individual-specific cash-on-hand)
  \item
    Given preferences, some AR(1) shock process, solve the infinite horizon household savings dynamic programming problem. The state-space is on a grid. The choice space are continuous percentages of cash-on-hand.
  \item
    \textbf{MEconTools}: \emph{\href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_vec.m}{ff\_vfi\_az\_bisec\_vec()}}
  \end{itemize}
\end{enumerate}

\hypertarget{summarize-policy-and-value-links}{%
\section{Summarize Policy and Value links}\label{summarize-policy-and-value-links}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/summ/htmlpdfm/fx_summ_nd_array.html}{Summarize ND Array Policy and Value Functions}: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/summ/fx_summ_nd_array.mlx}{\textbf{mlx}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/summ/htmlpdfm/fx_summ_nd_array.m}{\textbf{m}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/summ/htmlpdfm/fx_summ_nd_array.pdf}{\textbf{pdf}} \textbar{} \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/summ/htmlpdfm/fx_summ_nd_array.html}{\textbf{html}}

  \begin{itemize}
  \tightlist
  \item
    Given an NDarray matrix with N1, N2, \ldots, ND dimensions. Generate average and standard deviation for the 3rd dimension, grouping by the other dimensions.
  \item
    For example, show the 5th dimension as the column groups, and the other variables generate combinations shown as rows.
  \item
    The resulting summary statistics table contains mean and standard deviation among other statistics over the policy or value contained in the ND array.
  \item
    \textbf{MEconTools}: \emph{ff\_summ\_nd\_array()}
  \end{itemize}
\end{enumerate}

\hypertarget{distributional-analysis-links}{%
\section{Distributional Analysis links}\label{distributional-analysis-links}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/stats/htmlpdfm/fx_simu_stats.html}{Gateway Joint Probability Mass Statistics}: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/stats/fx_simu_stats.mlx}{\textbf{mlx}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/stats/htmlpdfm/fx_simu_stats.m}{\textbf{m}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/stats/htmlpdfm/fx_simu_stats.pdf}{\textbf{pdf}} \textbar{} \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/stats/htmlpdfm/fx_simu_stats.html}{\textbf{html}}

  \begin{itemize}
  \tightlist
  \item
    Given probability mass function f(s), and information y(s), x(s), z(s) at each element of the state-space, compute statistics for each variable, y, x, z, which are all discrete random variables.
  \item
    Compute their correlation and covariance.
  \item
    \textbf{MEconTools}: \emph{ff\_simu\_stats()}
  \end{itemize}
\item
  \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/stats/htmlpdfm/fx_disc_rand_var_stats.html}{Discrete Random Variable Distributional Statistics}: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/stats/fx_disc_rand_var_stats.mlx}{\textbf{mlx}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/stats/htmlpdfm/fx_disc_rand_var_stats.m}{\textbf{m}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/stats/htmlpdfm/fx_disc_rand_var_stats.pdf}{\textbf{pdf}} \textbar{} \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/stats/htmlpdfm/fx_disc_rand_var_stats.html}{\textbf{html}}

  \begin{itemize}
  \tightlist
  \item
    Model simulation generates discrete random variables, calculate mean, standard deviation, min, max, percentiles, and proportion of outcomes held by x percentiles, etc.
  \item
    \textbf{MEconTools}: \emph{ff\_disc\_rand\_var\_stats()}
  \end{itemize}
\item
  \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/stats/htmlpdfm/fx_disc_rand_var_mass2outcomes.html}{Generate Discrete Random Variable}: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/stats/fx_disc_rand_var_mass2outcomes.mlx}{\textbf{mlx}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/stats/htmlpdfm/fx_disc_rand_var_mass2outcomes.m}{\textbf{m}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/stats/htmlpdfm/fx_disc_rand_var_mass2outcomes.pdf}{\textbf{pdf}} \textbar{} \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/stats/htmlpdfm/fx_disc_rand_var_mass2outcomes.html}{\textbf{html}}

  \begin{itemize}
  \tightlist
  \item
    Given mass at state space points, and y, c, a, z and other outcomes or other information at each corresponding state space points, generate discrete random variable, with unique sorted values, and mass for each unique sorted values.
  \item
    Generate additional joint distributions: if initial distribution is over f(a,z), generate joint distribution of f(y,a) or f(y,z).
  \item
    \textbf{MEconTools}: \emph{ff\_disc\_rand\_var\_mass2outcomes()}
  \end{itemize}
\item
  \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/stats/htmlpdfm/fx_disc_rand_var_mass2covcor.html}{Discrete Random Variable Correlation and Covariance}: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/stats/fx_disc_rand_var_mass2covcor.mlx}{\textbf{mlx}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/stats/htmlpdfm/fx_disc_rand_var_mass2covcor.m}{\textbf{m}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/stats/htmlpdfm/fx_disc_rand_var_mass2covcor.pdf}{\textbf{pdf}} \textbar{} \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/stats/htmlpdfm/fx_disc_rand_var_mass2covcor.html}{\textbf{html}}

  \begin{itemize}
  \tightlist
  \item
    Given probability mass function f(s), X(s), and Y(s), compute the covariance and correlation betwen X and Y.
  \item
    \textbf{MEconTools}: \emph{ff\_disc\_rand\_var\_mass2covcor()}
  \end{itemize}
\end{enumerate}

\hypertarget{graphs-links}{%
\section{Graphs links}\label{graphs-links}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/graph/htmlpdfm/fx_graph_grid.html}{Multiple Line Graph Function}: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/graph/fx_graph_grid.mlx}{\textbf{mlx}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/graph/htmlpdfm/fx_graph_grid.m}{\textbf{m}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/graph/htmlpdfm/fx_graph_grid.pdf}{\textbf{pdf}} \textbar{} \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/graph/htmlpdfm/fx_graph_grid.html}{\textbf{html}}

  \begin{itemize}
  \tightlist
  \item
    Grid based Graph, x-axis one param, color another param, over outcomes.
  \item
    \textbf{MEconTools}: \emph{ff\_graph\_grid()}
  \end{itemize}
\end{enumerate}

\hypertarget{data-structures-links}{%
\section{Data Structures links}\label{data-structures-links}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/generate/htmlpdfm/fx_saveborr_grid.html}{Log and Power Spaced Asset and Choice Grids}: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/generate/fx_saveborr_grid.mlx}{\textbf{mlx}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/generate/htmlpdfm/fx_saveborr_grid.m}{\textbf{m}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/generate/htmlpdfm/fx_saveborr_grid.pdf}{\textbf{pdf}} \textbar{} \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/generate/htmlpdfm/fx_saveborr_grid.html}{\textbf{html}}

  \begin{itemize}
  \tightlist
  \item
    Generate linear, log-space, power-space, or threshold-cut asset or choice grids.
  \item
    \textbf{MEconTools}: \emph{ff\_saveborr\_grid()}
  \end{itemize}
\end{enumerate}

\hypertarget{common-functions-links}{%
\section{Common Functions links}\label{common-functions-links}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/external/htmlpdfm/fxy_tauchen.html}{Discretize AR1 Normal Shock Tauchen (1986)}: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/external/fxy_tauchen.mlx}{\textbf{mlx}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/external/htmlpdfm/fxy_tauchen.m}{\textbf{m}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/external/htmlpdfm/fxy_tauchen.pdf}{\textbf{pdf}} \textbar{} \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/external/htmlpdfm/fxy_tauchen.html}{\textbf{html}}

  \begin{itemize}
  \tightlist
  \item
    Mean zero AR(1) shock discretize following Tauchen (1986).
  \item
    \textbf{MEconTools}: \emph{ffy\_tauchen()}
  \end{itemize}
\item
  \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/external/htmlpdfm/fxy_rouwenhorst.html}{Discretize AR1 Normal Shock Rouwenhorst (1995)}: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/external/fxy_rouwenhorst.mlx}{\textbf{mlx}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/external/htmlpdfm/fxy_rouwenhorst.m}{\textbf{m}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/external/htmlpdfm/fxy_rouwenhorst.pdf}{\textbf{pdf}} \textbar{} \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/external/htmlpdfm/fxy_rouwenhorst.html}{\textbf{html}}

  \begin{itemize}
  \tightlist
  \item
    Mean zero AR(1) shock discretize following Rouwenhorst (1995).
  \item
    \textbf{MEconTools}: \emph{ffy\_rouwenhorst()}
  \end{itemize}
\end{enumerate}

\hypertarget{support-tools-links}{%
\section{Support Tools links}\label{support-tools-links}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/tools/htmlpdfm/fx_container_map_display.html}{Organizes and Prints Container Map Key and Values}: \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/tools/fx_container_map_display.mlx}{\textbf{mlx}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/tools/htmlpdfm/fx_container_map_display.m}{\textbf{m}} \textbar{} \href{https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/doc/tools/htmlpdfm/fx_container_map_display.pdf}{\textbf{pdf}} \textbar{} \href{https://fanwangecon.github.io/MEconTools/MEconTools/doc/tools/htmlpdfm/fx_container_map_display.html}{\textbf{html}}

  \begin{itemize}
  \tightlist
  \item
    Summarizes the contents of a map container by data types. Includes, scalar, array, matrix, string, functions, tensors (3-tuples), tesseracts (4-tuples).
  \item
    \textbf{MEconTools}: \emph{ff\_container\_map\_display()}
  \end{itemize}
\end{enumerate}

  \bibliography{book.bib,packages.bib}

\end{document}
