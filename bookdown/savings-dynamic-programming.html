<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Savings Dynamic Programming | Matlab Toolbox Heterogeneous Agents Dynamic Programming</title>
  <meta name="description" content="Chapter 1 Savings Dynamic Programming | Matlab Toolbox Heterogeneous Agents Dynamic Programming" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Savings Dynamic Programming | Matlab Toolbox Heterogeneous Agents Dynamic Programming" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 1 Savings Dynamic Programming | Matlab Toolbox Heterogeneous Agents Dynamic Programming" />
  <meta name="github-repo" content="fanwangecon/MEconTools" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Savings Dynamic Programming | Matlab Toolbox Heterogeneous Agents Dynamic Programming" />
  
  <meta name="twitter:description" content="Chapter 1 Savings Dynamic Programming | Matlab Toolbox Heterogeneous Agents Dynamic Programming" />
  

<meta name="author" content="Fan Wang" />


<meta name="date" content="2020-07-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="summarize-policy-and-value.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92953468-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-92953468-6');
</script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Matlab Toolbox Heterogeneous Agents Dynamic Programming</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html"><i class="fa fa-check"></i><b>1</b> Savings Dynamic Programming</a><ul>
<li class="chapter" data-level="1.1" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#ff_vfi_az_loop-dynamic-savings-problem-loop-common-grid"><i class="fa fa-check"></i><b>1.1</b> FF_VFI_AZ_LOOP Dynamic Savings Problem Loop Common Grid</a><ul>
<li class="chapter" data-level="1.1.1" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_loop-defaults"><i class="fa fa-check"></i><b>1.1.1</b> Test FF_VFI_AZ_LOOP Defaults</a></li>
<li class="chapter" data-level="1.1.2" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_loop-speed-tests"><i class="fa fa-check"></i><b>1.1.2</b> Test FF_VFI_AZ_LOOP Speed Tests</a></li>
<li class="chapter" data-level="1.1.3" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_loop-control-outputs"><i class="fa fa-check"></i><b>1.1.3</b> Test FF_VFI_AZ_LOOP Control Outputs</a></li>
<li class="chapter" data-level="1.1.4" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_loop-change-interest-rate-and-discount"><i class="fa fa-check"></i><b>1.1.4</b> Test FF_VFI_AZ_LOOP Change Interest Rate and Discount</a></li>
<li class="chapter" data-level="1.1.5" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_loop-changing-risk-aversion"><i class="fa fa-check"></i><b>1.1.5</b> Test FF_VFI_AZ_LOOP Changing Risk Aversion</a></li>
<li class="chapter" data-level="1.1.6" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_loop-with-higher-uncertainty"><i class="fa fa-check"></i><b>1.1.6</b> Test FF_VFI_AZ_LOOP with Higher Uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#ff_vfi_az_vec-dynamic-savings-problem-vectorized-common-grid"><i class="fa fa-check"></i><b>1.2</b> FF_VFI_AZ_VEC Dynamic Savings Problem Vectorized Common Grid</a><ul>
<li class="chapter" data-level="1.2.1" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_vec-defaults"><i class="fa fa-check"></i><b>1.2.1</b> Test FF_VFI_AZ_VEC Defaults</a></li>
<li class="chapter" data-level="1.2.2" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_bisec_vec-speed-tests"><i class="fa fa-check"></i><b>1.2.2</b> Test FF_VFI_AZ_BISEC_VEC Speed Tests</a></li>
<li class="chapter" data-level="1.2.3" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_vec-control-outputs"><i class="fa fa-check"></i><b>1.2.3</b> Test FF_VFI_AZ_VEC Control Outputs</a></li>
<li class="chapter" data-level="1.2.4" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_vec-change-interest-rate-and-discount"><i class="fa fa-check"></i><b>1.2.4</b> Test FF_VFI_AZ_VEC Change Interest Rate and Discount</a></li>
<li class="chapter" data-level="1.2.5" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_vec-changing-risk-aversion"><i class="fa fa-check"></i><b>1.2.5</b> Test FF_VFI_AZ_VEC Changing Risk Aversion</a></li>
<li class="chapter" data-level="1.2.6" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_vec-with-higher-uncertainty"><i class="fa fa-check"></i><b>1.2.6</b> Test FF_VFI_AZ_VEC with Higher Uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#ff_vfi_az_bisec_loop-dynamic-savings-problem-loop-continuous-choice"><i class="fa fa-check"></i><b>1.3</b> FF_VFI_AZ_BISEC_LOOP Dynamic Savings Problem Loop Continuous Choice</a><ul>
<li class="chapter" data-level="1.3.1" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_bisec_loop-defaults"><i class="fa fa-check"></i><b>1.3.1</b> Test FF_VFI_AZ_BISEC_LOOP Defaults</a></li>
<li class="chapter" data-level="1.3.2" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_bisec_loop-speed-tests"><i class="fa fa-check"></i><b>1.3.2</b> Test FF_VFI_AZ_BISEC_LOOP Speed Tests</a></li>
<li class="chapter" data-level="1.3.3" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_bisec_loop-control-outputs"><i class="fa fa-check"></i><b>1.3.3</b> Test FF_VFI_AZ_BISEC_LOOP Control Outputs</a></li>
<li class="chapter" data-level="1.3.4" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_bisec_loop-change-interest-rate-and-discount"><i class="fa fa-check"></i><b>1.3.4</b> Test FF_VFI_AZ_BISEC_LOOP Change Interest Rate and Discount</a></li>
<li class="chapter" data-level="1.3.5" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_bisec_loop-changing-risk-aversion"><i class="fa fa-check"></i><b>1.3.5</b> Test FF_VFI_AZ_BISEC_LOOP Changing Risk Aversion</a></li>
<li class="chapter" data-level="1.3.6" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_bisec_loop-with-higher-uncertainty"><i class="fa fa-check"></i><b>1.3.6</b> Test FF_VFI_AZ_BISEC_LOOP with Higher Uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#ff_vfi_az_bisec_vec-dynamic-savings-problem-vectorized-continuous-exact"><i class="fa fa-check"></i><b>1.4</b> FF_VFI_AZ_BISEC_VEC Dynamic Savings Problem Vectorized Continuous Exact</a><ul>
<li class="chapter" data-level="1.4.1" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_bisec_vec-defaults"><i class="fa fa-check"></i><b>1.4.1</b> Test FF_VFI_AZ_BISEC_VEC Defaults</a></li>
<li class="chapter" data-level="1.4.2" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_bisec_vec-speed-tests-1"><i class="fa fa-check"></i><b>1.4.2</b> Test FF_VFI_AZ_BISEC_VEC Speed Tests</a></li>
<li class="chapter" data-level="1.4.3" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_bisec_vec-control-outputs"><i class="fa fa-check"></i><b>1.4.3</b> Test FF_VFI_AZ_BISEC_VEC Control Outputs</a></li>
<li class="chapter" data-level="1.4.4" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_bisec_vec-change-interest-rate-and-discount"><i class="fa fa-check"></i><b>1.4.4</b> Test FF_VFI_AZ_BISEC_VEC Change Interest Rate and Discount</a></li>
<li class="chapter" data-level="1.4.5" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_bisec_vec-changing-risk-aversion"><i class="fa fa-check"></i><b>1.4.5</b> Test FF_VFI_AZ_BISEC_VEC Changing Risk Aversion</a></li>
<li class="chapter" data-level="1.4.6" data-path="savings-dynamic-programming.html"><a href="savings-dynamic-programming.html#test-ff_vfi_az_bisec_vec-with-higher-uncertainty"><i class="fa fa-check"></i><b>1.4.6</b> Test FF_VFI_AZ_BISEC_VEC with Higher Uncertainty</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="summarize-policy-and-value.html"><a href="summarize-policy-and-value.html"><i class="fa fa-check"></i><b>2</b> Summarize Policy and Value</a><ul>
<li class="chapter" data-level="2.1" data-path="summarize-policy-and-value.html"><a href="summarize-policy-and-value.html#ff_summ_nd_array-examples"><i class="fa fa-check"></i><b>2.1</b> FF_SUMM_ND_ARRAY Examples</a><ul>
<li class="chapter" data-level="2.1.1" data-path="summarize-policy-and-value.html"><a href="summarize-policy-and-value.html#test-ff_summ_nd_array-defaults"><i class="fa fa-check"></i><b>2.1.1</b> Test FF_SUMM_ND_ARRAY Defaults</a></li>
<li class="chapter" data-level="2.1.2" data-path="summarize-policy-and-value.html"><a href="summarize-policy-and-value.html#test-ff_summ_nd_array-with-random-2-dimensional-matrix"><i class="fa fa-check"></i><b>2.1.2</b> Test FF_SUMM_ND_ARRAY with Random 2 Dimensional Matrix</a></li>
<li class="chapter" data-level="2.1.3" data-path="summarize-policy-and-value.html"><a href="summarize-policy-and-value.html#test-ff_summ_nd_array-with-random-6-dimensional-matrix"><i class="fa fa-check"></i><b>2.1.3</b> Test FF_SUMM_ND_ARRAY with Random 6 Dimensional Matrix</a></li>
<li class="chapter" data-level="2.1.4" data-path="summarize-policy-and-value.html"><a href="summarize-policy-and-value.html#test-ff_summ_nd_array-with-random-7-dimensional-matrix-with-all-parameters"><i class="fa fa-check"></i><b>2.1.4</b> Test FF_SUMM_ND_ARRAY with Random 7 Dimensional Matrix with All Parameters</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="distributional-analysis.html"><a href="distributional-analysis.html"><i class="fa fa-check"></i><b>3</b> Distributional Analysis</a><ul>
<li class="chapter" data-level="3.1" data-path="distributional-analysis.html"><a href="distributional-analysis.html#ff_simu_stats-examples"><i class="fa fa-check"></i><b>3.1</b> FF_SIMU_STATS Examples</a><ul>
<li class="chapter" data-level="3.1.1" data-path="distributional-analysis.html"><a href="distributional-analysis.html#test-ff_simu_stats-defaults"><i class="fa fa-check"></i><b>3.1.1</b> Test FF_SIMU_STATS Defaults</a></li>
<li class="chapter" data-level="3.1.2" data-path="distributional-analysis.html"><a href="distributional-analysis.html#test-ff_simu_stats-four-states-points-matrix"><i class="fa fa-check"></i><b>3.1.2</b> Test FF_SIMU_STATS Four States-Points Matrix</a></li>
<li class="chapter" data-level="3.1.3" data-path="distributional-analysis.html"><a href="distributional-analysis.html#test-ff_simu_stats-four-states-points-matrix-single-column-inputs"><i class="fa fa-check"></i><b>3.1.3</b> Test FF_SIMU_STATS Four States-Points Matrix Single Column Inputs</a></li>
<li class="chapter" data-level="3.1.4" data-path="distributional-analysis.html"><a href="distributional-analysis.html#test-ff_simu_stats-print-many-details"><i class="fa fa-check"></i><b>3.1.4</b> Test FF_SIMU_STATS Print Many Details</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="distributional-analysis.html"><a href="distributional-analysis.html#ff_disc_rand_var_stats-examples"><i class="fa fa-check"></i><b>3.2</b> FF_DISC_RAND_VAR_STATS Examples</a><ul>
<li class="chapter" data-level="3.2.1" data-path="distributional-analysis.html"><a href="distributional-analysis.html#test-ff_disc_rand_var_stats-defaults"><i class="fa fa-check"></i><b>3.2.1</b> Test FF_DISC_RAND_VAR_STATS Defaults</a></li>
<li class="chapter" data-level="3.2.2" data-path="distributional-analysis.html"><a href="distributional-analysis.html#test-ff_disc_rand_var_stats-0-and-1-random-variable"><i class="fa fa-check"></i><b>3.2.2</b> Test FF_DISC_RAND_VAR_STATS 0 and 1 Random Variable</a></li>
<li class="chapter" data-level="3.2.3" data-path="distributional-analysis.html"><a href="distributional-analysis.html#test-ff_disc_rand_var_stats-with-poisson"><i class="fa fa-check"></i><b>3.2.3</b> Test FF_DISC_RAND_VAR_STATS with Poisson</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="distributional-analysis.html"><a href="distributional-analysis.html#ff_disc_rand_var_mass2outcomes-examples"><i class="fa fa-check"></i><b>3.3</b> FF_DISC_RAND_VAR_MASS2OUTCOMES Examples</a><ul>
<li class="chapter" data-level="3.3.1" data-path="distributional-analysis.html"><a href="distributional-analysis.html#test-ff_disc_rand_var_mass2outcomes-defaults"><i class="fa fa-check"></i><b>3.3.1</b> Test FF_DISC_RAND_VAR_MASS2OUTCOMES Defaults</a></li>
<li class="chapter" data-level="3.3.2" data-path="distributional-analysis.html"><a href="distributional-analysis.html#test-ff_disc_rand_var_mass2outcomes-four-states-points"><i class="fa fa-check"></i><b>3.3.2</b> Test FF_DISC_RAND_VAR_MASS2OUTCOMES Four States-Points</a></li>
<li class="chapter" data-level="3.3.3" data-path="distributional-analysis.html"><a href="distributional-analysis.html#test-ff_disc_rand_var_mass2outcomes-conditional-mass-outputs"><i class="fa fa-check"></i><b>3.3.3</b> Test FF_DISC_RAND_VAR_MASS2OUTCOMES Conditional Mass Outputs</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="distributional-analysis.html"><a href="distributional-analysis.html#ff_disc_rand_var_mass2covcor-examples"><i class="fa fa-check"></i><b>3.4</b> FF_DISC_RAND_VAR_MASS2COVCOR Examples</a><ul>
<li class="chapter" data-level="3.4.1" data-path="distributional-analysis.html"><a href="distributional-analysis.html#test-ff_disc_rand_var_mass2covcor-defaults"><i class="fa fa-check"></i><b>3.4.1</b> Test FF_DISC_RAND_VAR_MASS2COVCOR Defaults</a></li>
<li class="chapter" data-level="3.4.2" data-path="distributional-analysis.html"><a href="distributional-analysis.html#test-ff_disc_rand_var_mass2covcor-four-states-points"><i class="fa fa-check"></i><b>3.4.2</b> Test FF_DISC_RAND_VAR_MASS2COVCOR Four States-Points</a></li>
<li class="chapter" data-level="3.4.3" data-path="distributional-analysis.html"><a href="distributional-analysis.html#test-ff_disc_rand_var_mass2covcor-two-random-vectors"><i class="fa fa-check"></i><b>3.4.3</b> Test FF_DISC_RAND_VAR_MASS2COVCOR Two Random Vectors</a></li>
<li class="chapter" data-level="3.4.4" data-path="distributional-analysis.html"><a href="distributional-analysis.html#test-ff_disc_rand_var_mass2covcor-provide-mean-and-sd"><i class="fa fa-check"></i><b>3.4.4</b> Test FF_DISC_RAND_VAR_MASS2COVCOR Provide Mean and SD</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="optimizers.html"><a href="optimizers.html"><i class="fa fa-check"></i><b>4</b> Optimizers</a><ul>
<li class="chapter" data-level="4.1" data-path="optimizers.html"><a href="optimizers.html#ff_optim_bisec_savezrone-derivative-bisection"><i class="fa fa-check"></i><b>4.1</b> FF_OPTIM_BISEC_SAVEZRONE Derivative Bisection</a><ul>
<li class="chapter" data-level="4.1.1" data-path="optimizers.html"><a href="optimizers.html#test-ff_optim_bisec_savezrone-defaults"><i class="fa fa-check"></i><b>4.1.1</b> Test FF_OPTIM_BISEC_SAVEZRONE Defaults</a></li>
<li class="chapter" data-level="4.1.2" data-path="optimizers.html"><a href="optimizers.html#test-ff_optim_bisec_savezrone-one-individual"><i class="fa fa-check"></i><b>4.1.2</b> Test FF_OPTIM_BISEC_SAVEZRONE One Individual</a></li>
<li class="chapter" data-level="4.1.3" data-path="optimizers.html"><a href="optimizers.html#test-ff_optim_bisec_savezrone-six-individual-states"><i class="fa fa-check"></i><b>4.1.3</b> Test FF_OPTIM_BISEC_SAVEZRONE Six Individual States</a></li>
<li class="chapter" data-level="4.1.4" data-path="optimizers.html"><a href="optimizers.html#test-ff_optim_bisec_savezrone-speed"><i class="fa fa-check"></i><b>4.1.4</b> Test FF_OPTIM_BISEC_SAVEZRONE Speed</a></li>
<li class="chapter" data-level="4.1.5" data-path="optimizers.html"><a href="optimizers.html#define-two-period-intertemporal-foc-log-utility-no-shock"><i class="fa fa-check"></i><b>4.1.5</b> Define Two Period Intertemporal FOC Log Utility No Shock</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="optimizers.html"><a href="optimizers.html#ff_optim_mlsec_savezrone-derivative-multisection"><i class="fa fa-check"></i><b>4.2</b> FF_OPTIM_MLSEC_SAVEZRONE Derivative Multisection</a><ul>
<li class="chapter" data-level="4.2.1" data-path="optimizers.html"><a href="optimizers.html#test-ff_optim_mlsec_savezrone-one-individual"><i class="fa fa-check"></i><b>4.2.1</b> Test FF_OPTIM_MLSEC_SAVEZRONE One Individual</a></li>
<li class="chapter" data-level="4.2.2" data-path="optimizers.html"><a href="optimizers.html#test-ff_optim_mlsec_savezrone-5-individuals-5-iterations-5-points-per-iteration"><i class="fa fa-check"></i><b>4.2.2</b> Test FF_OPTIM_MLSEC_SAVEZRONE 5 Individuals 5 Iterations 5 Points Per Iteration</a></li>
<li class="chapter" data-level="4.2.3" data-path="optimizers.html"><a href="optimizers.html#test-ff_optim_mlsec_savezrone-8-individuals-3-iterations-10-points-per-iteration"><i class="fa fa-check"></i><b>4.2.3</b> Test FF_OPTIM_MLSEC_SAVEZRONE 8 Individuals 3 Iterations 10 Points Per Iteration</a></li>
<li class="chapter" data-level="4.2.4" data-path="optimizers.html"><a href="optimizers.html#test-ff_optim_mlsec_savezrone-speed"><i class="fa fa-check"></i><b>4.2.4</b> Test FF_OPTIM_MLSEC_SAVEZRONE Speed</a></li>
<li class="chapter" data-level="4.2.5" data-path="optimizers.html"><a href="optimizers.html#define-two-period-intertemporal-foc-log-utility-no-shock-1"><i class="fa fa-check"></i><b>4.2.5</b> Define Two Period Intertemporal FOC Log Utility No Shock</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="graphs.html"><a href="graphs.html"><i class="fa fa-check"></i><b>5</b> Graphs</a><ul>
<li class="chapter" data-level="5.1" data-path="graphs.html"><a href="graphs.html#ff_graph_grid-examples-x-y-and-color-line-plots"><i class="fa fa-check"></i><b>5.1</b> FF_GRAPH_GRID Examples: X, Y and Color Line Plots</a><ul>
<li class="chapter" data-level="5.1.1" data-path="graphs.html"><a href="graphs.html#test-ff_graph_grid-defaults"><i class="fa fa-check"></i><b>5.1.1</b> Test FF_GRAPH_GRID Defaults</a></li>
<li class="chapter" data-level="5.1.2" data-path="graphs.html"><a href="graphs.html#test-ff_graph_grid-random-matrix-pick-markers-and-colors"><i class="fa fa-check"></i><b>5.1.2</b> Test FF_GRAPH_GRID Random Matrix Pick Markers and Colors</a></li>
<li class="chapter" data-level="5.1.3" data-path="graphs.html"><a href="graphs.html#test-ff_graph_grid-two-random-normal-lines-and-labels"><i class="fa fa-check"></i><b>5.1.3</b> Test FF_GRAPH_GRID Two Random Normal Lines and Labels</a></li>
<li class="chapter" data-level="5.1.4" data-path="graphs.html"><a href="graphs.html#test-ff_graph_grid-6-lines-pick-marker-and-colors"><i class="fa fa-check"></i><b>5.1.4</b> Test FF_GRAPH_GRID 6 Lines Pick Marker and Colors</a></li>
<li class="chapter" data-level="5.1.5" data-path="graphs.html"><a href="graphs.html#test-ff_graph_grid-many-lines"><i class="fa fa-check"></i><b>5.1.5</b> Test FF_GRAPH_GRID Many Lines</a></li>
<li class="chapter" data-level="5.1.6" data-path="graphs.html"><a href="graphs.html#test-ff_graph_grid-many-lines-legend-exogenous"><i class="fa fa-check"></i><b>5.1.6</b> Test FF_GRAPH_GRID Many Lines Legend Exogenous</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="support-tools.html"><a href="support-tools.html"><i class="fa fa-check"></i><b>6</b> Support Tools</a><ul>
<li class="chapter" data-level="6.1" data-path="support-tools.html"><a href="support-tools.html#ff_container_map_display-examples"><i class="fa fa-check"></i><b>6.1</b> FF_CONTAINER_MAP_DISPLAY Examples</a><ul>
<li class="chapter" data-level="6.1.1" data-path="support-tools.html"><a href="support-tools.html#test-ff_container_map_display-defaults"><i class="fa fa-check"></i><b>6.1.1</b> Test FF_CONTAINER_MAP_DISPLAY Defaults</a></li>
<li class="chapter" data-level="6.1.2" data-path="support-tools.html"><a href="support-tools.html#test-ff_container_map_display-summarize-matrix-only"><i class="fa fa-check"></i><b>6.1.2</b> Test FF_CONTAINER_MAP_DISPLAY summarize Matrix Only</a></li>
<li class="chapter" data-level="6.1.3" data-path="support-tools.html"><a href="support-tools.html#test-ff_container_map_display-show-matrix-subset"><i class="fa fa-check"></i><b>6.1.3</b> Test FF_CONTAINER_MAP_DISPLAY Show Matrix Subset</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>7</b> Data Structures</a><ul>
<li class="chapter" data-level="7.1" data-path="data-structures.html"><a href="data-structures.html#ff_saveborr_grid-example-for-generating-asset-grid"><i class="fa fa-check"></i><b>7.1</b> FF_SAVEBORR_GRID Example for Generating Asset Grid</a><ul>
<li class="chapter" data-level="7.1.1" data-path="data-structures.html"><a href="data-structures.html#test-ff_saveborr_grid-defaults"><i class="fa fa-check"></i><b>7.1.1</b> Test FF_SAVEBORR_GRID Defaults</a></li>
<li class="chapter" data-level="7.1.2" data-path="data-structures.html"><a href="data-structures.html#test-ff_saveborr_grid-default-linear-grid-log-grid-power-grid-threshold-grid"><i class="fa fa-check"></i><b>7.1.2</b> Test FF_SAVEBORR_GRID Default Linear Grid, Log Grid, Power Grid, Threshold Grid</a></li>
<li class="chapter" data-level="7.1.3" data-path="data-structures.html"><a href="data-structures.html#test-ff_saveborr_grid-log-grid-changing-parameters"><i class="fa fa-check"></i><b>7.1.3</b> Test FF_SAVEBORR_GRID Log Grid Changing Parameters</a></li>
<li class="chapter" data-level="7.1.4" data-path="data-structures.html"><a href="data-structures.html#test-ff_saveborr_grid-power-grid-changing-parameters"><i class="fa fa-check"></i><b>7.1.4</b> Test FF_SAVEBORR_GRID Power Grid Changing Parameters</a></li>
<li class="chapter" data-level="7.1.5" data-path="data-structures.html"><a href="data-structures.html#test-ff_saveborr_grid-threshold-grid-changing-parameters"><i class="fa fa-check"></i><b>7.1.5</b> Test FF_SAVEBORR_GRID Threshold Grid Changing Parameters</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="common-functions.html"><a href="common-functions.html"><i class="fa fa-check"></i><b>8</b> Common Functions</a><ul>
<li class="chapter" data-level="8.1" data-path="common-functions.html"><a href="common-functions.html#ffy_tauchen-ar1-shock-discretization-example"><i class="fa fa-check"></i><b>8.1</b> FFY_TAUCHEN AR1 Shock Discretization Example</a><ul>
<li class="chapter" data-level="8.1.1" data-path="common-functions.html"><a href="common-functions.html#test-ffy_tauchen-defaults"><i class="fa fa-check"></i><b>8.1.1</b> Test FFY_TAUCHEN Defaults</a></li>
<li class="chapter" data-level="8.1.2" data-path="common-functions.html"><a href="common-functions.html#test-ffy_tauchen-specify-parameters"><i class="fa fa-check"></i><b>8.1.2</b> Test FFY_TAUCHEN Specify Parameters</a></li>
<li class="chapter" data-level="8.1.3" data-path="common-functions.html"><a href="common-functions.html#test-ffy_tauchen-high-persistence-low-sd"><i class="fa fa-check"></i><b>8.1.3</b> Test FFY_TAUCHEN High Persistence, Low SD</a></li>
<li class="chapter" data-level="8.1.4" data-path="common-functions.html"><a href="common-functions.html#test-ffy_tauchen-low-persistence-low-sd"><i class="fa fa-check"></i><b>8.1.4</b> Test FFY_TAUCHEN Low Persistence, Low SD</a></li>
<li class="chapter" data-level="8.1.5" data-path="common-functions.html"><a href="common-functions.html#test-ffy_tauchen-high-persistence-high-sd"><i class="fa fa-check"></i><b>8.1.5</b> Test FFY_TAUCHEN High Persistence, High SD</a></li>
<li class="chapter" data-level="8.1.6" data-path="common-functions.html"><a href="common-functions.html#test-ffy_tauchen-low-persistence-low-sd-1"><i class="fa fa-check"></i><b>8.1.6</b> Test FFY_TAUCHEN Low Persistence, Low SD</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="common-functions.html"><a href="common-functions.html#ffy_rouwenhorst-ar1-shock-discretization-example"><i class="fa fa-check"></i><b>8.2</b> FFY_ROUWENHORST AR1 Shock Discretization Example</a><ul>
<li class="chapter" data-level="8.2.1" data-path="common-functions.html"><a href="common-functions.html#test-ffy_rouwenhorst-defaults"><i class="fa fa-check"></i><b>8.2.1</b> Test FFY_ROUWENHORST Defaults</a></li>
<li class="chapter" data-level="8.2.2" data-path="common-functions.html"><a href="common-functions.html#test-ffy_rouwenhorst-specify-parameters"><i class="fa fa-check"></i><b>8.2.2</b> Test FFY_ROUWENHORST Specify Parameters</a></li>
<li class="chapter" data-level="8.2.3" data-path="common-functions.html"><a href="common-functions.html#test-ffy_rouwenhorst-high-persistence-low-sd"><i class="fa fa-check"></i><b>8.2.3</b> Test FFY_ROUWENHORST High Persistence, Low SD</a></li>
<li class="chapter" data-level="8.2.4" data-path="common-functions.html"><a href="common-functions.html#test-ffy_rouwenhorst-low-persistence-low-sd"><i class="fa fa-check"></i><b>8.2.4</b> Test FFY_ROUWENHORST Low Persistence, Low SD</a></li>
<li class="chapter" data-level="8.2.5" data-path="common-functions.html"><a href="common-functions.html#test-ffy_rouwenhorst-high-persistence-high-sd"><i class="fa fa-check"></i><b>8.2.5</b> Test FFY_ROUWENHORST High Persistence, High SD</a></li>
<li class="chapter" data-level="8.2.6" data-path="common-functions.html"><a href="common-functions.html#test-ffy_rouwenhorst-low-persistence-low-sd-1"><i class="fa fa-check"></i><b>8.2.6</b> Test FFY_ROUWENHORST Low Persistence, Low SD</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="index-and-code-links.html"><a href="index-and-code-links.html"><i class="fa fa-check"></i><b>A</b> Index and Code Links</a><ul>
<li class="chapter" data-level="A.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#savings-dynamic-programming-links"><i class="fa fa-check"></i><b>A.1</b> Savings Dynamic Programming links</a></li>
<li class="chapter" data-level="A.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#summarize-policy-and-value-links"><i class="fa fa-check"></i><b>A.2</b> Summarize Policy and Value links</a></li>
<li class="chapter" data-level="A.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#distributional-analysis-links"><i class="fa fa-check"></i><b>A.3</b> Distributional Analysis links</a></li>
<li class="chapter" data-level="A.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#optimizers-links"><i class="fa fa-check"></i><b>A.4</b> Optimizers links</a></li>
<li class="chapter" data-level="A.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#graphs-links"><i class="fa fa-check"></i><b>A.5</b> Graphs links</a></li>
<li class="chapter" data-level="A.6" data-path="index-and-code-links.html"><a href="index-and-code-links.html#support-tools-links"><i class="fa fa-check"></i><b>A.6</b> Support Tools links</a></li>
<li class="chapter" data-level="A.7" data-path="index-and-code-links.html"><a href="index-and-code-links.html#data-structures-links"><i class="fa fa-check"></i><b>A.7</b> Data Structures links</a></li>
<li class="chapter" data-level="A.8" data-path="index-and-code-links.html"><a href="index-and-code-links.html#common-functions-links"><i class="fa fa-check"></i><b>A.8</b> Common Functions links</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://fanwangecon.github.io/M4Econ/bookdown/index.html" target="blank">M4Econ Bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Matlab Toolbox Heterogeneous Agents Dynamic Programming</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="savings-dynamic-programming" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Savings Dynamic Programming</h1>

<div id="ff_vfi_az_loop-dynamic-savings-problem-loop-common-grid" class="section level2">
<h2><span class="header-section-number">1.1</span> FF_VFI_AZ_LOOP Dynamic Savings Problem Loop Common Grid</h2>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/MEconTools/">MEconTools</a> Toolbox (<a href="https://fanwangecon.github.io/MEconTools/bookdown">bookdown</a>), <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown</a>).</p>
</blockquote>
<p>This is the example vignette for function:
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_loop.m"><strong>ff_vfi_az_loop</strong></a>
from the <a href="https://fanwangecon.github.io/MEconTools/"><strong>MEconTools
Package</strong></a><strong>.</strong> This function
solves the dynamic programming problem for a (a,z) model. Households can
save a, and face AR(1) shock z. The problem is solved over the infinite
horizon. This is the looped code, it is slow for larger state-space
problems. The code uses common grid, with the same state space and
choice space grids.</p>
<p><strong>Links to Four Code:</strong></p>
<p>Four Core Savings/Borrowing Dynamic Programming Solution Functions that
are functions in the <a href="https://fanwangecon.github.io/MEconTools/"><strong>MEconTools
Package</strong></a><strong>.</strong> :</p>
<ul>
<li><p>Common Choice and States Grid :
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_loop.m"><strong>ff_vfi_az_loop</strong></a>,
slow should use for testing new models</p></li>
<li><p>Common Choice and States Grid :
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_vec.m"><strong>ff_vfi_az_vec</strong></a>,
fast good for many purposes</p></li>
<li><p>States Grid + Continuous Exact Savings as Share of Cash-on-Hand :<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_loop.m"><strong>ff_vfi_az_bisec_loop</strong></a>,
high precision even with small grid</p></li>
<li><p>States Grid + Continuous Exact Savings as Share of Cash-on-Hand :
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_vec.m"><strong>ff_vfi_az_bisec_vec</strong></a>,
precision and speed</p></li>
</ul>
<p>The four sample codes are written for the standard dynamic savings
problem with AR(1) shock that is one of the core problems introduced in
first sessions of graduate Economics courses. The code can be easily
adapted to accomand multiple assets, savings and borrowing, discrete and
continuous choice, etc. A large proportion of dynamic economic models
are based on the underlying structure of solving a model with endogenous
states and exogenous shocks, and that is what the (a,z) model does. In
general, one should write looped code first to make sure the economics
is correct, then vectorized code can be adopted to increase speed.</p>
<div id="test-ff_vfi_az_loop-defaults" class="section level3">
<h3><span class="header-section-number">1.1.1</span> Test FF_VFI_AZ_LOOP Defaults</h3>
<p>Call the function with defaults. By default, shows the asset policy
function summary. Model parameters can be changed by the mp_params.</p>
<pre><code>%mp_params
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;fl_crra&#39;) = 1.5;
mp_params(&#39;fl_beta&#39;) = 0.94;
% call function
ff_vfi_az_loop(mp_params);

Elapsed time is 1.291175 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
          i    idx    ndim    numel    rowN    colN     sum      mean      std     coefvari    min    max
          _    ___    ____    _____    ____    ____    _____    ______    _____    ________    ___    ___

    ap    1     1      2       700     100      7      16864    24.091    14.08    0.58446      0     50 

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7  
            _______    _______    _______    _______    _______    _______    ______

    r1            0          0          0          0          0    0.50505    2.0202
    r2            0          0          0    0.50505    0.50505     1.0101    2.5253
    r3      0.50505    0.50505    0.50505    0.50505     1.0101     1.5152    3.0303
    r4       1.0101     1.0101     1.0101     1.0101     1.5152     2.0202    3.5354
    r5       1.5152     1.5152     1.5152     1.5152     2.0202     2.5253    4.0404
    r96      45.455     45.455      45.96      45.96      45.96      46.97    48.485
    r97       45.96      45.96      45.96     46.465     46.465     47.475     48.99
    r98      46.465     46.465     46.465      46.97      46.97      47.98     48.99
    r99       46.97      46.97      46.97     47.475     47.475     48.485    49.495
    r100     47.475     47.475     47.475      47.98      47.98      48.99        50</code></pre>
</div>
<div id="test-ff_vfi_az_loop-speed-tests" class="section level3">
<h3><span class="header-section-number">1.1.2</span> Test FF_VFI_AZ_LOOP Speed Tests</h3>
<p>Call the function with different a and z grid size, print out speed:</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_timer&#39;) = true;
mp_support(&#39;ls_ffcmd&#39;) = {};</code></pre>
<p>A grid 50, shock grid 5:</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 50;
mp_params(&#39;it_z_n&#39;) = 5;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.223217 seconds.</code></pre>
<p>A grid 100, shock grid 7:</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 100;
mp_params(&#39;it_z_n&#39;) = 7;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 1.284511 seconds.</code></pre>
<p>A grid 200, shock grid 9:</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 200;
mp_params(&#39;it_z_n&#39;) = 9;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 6.325330 seconds.</code></pre>
</div>
<div id="test-ff_vfi_az_loop-control-outputs" class="section level3">
<h3><span class="header-section-number">1.1.3</span> Test FF_VFI_AZ_LOOP Control Outputs</h3>
<p>Run the function first without any outputs;</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 50;
mp_params(&#39;it_z_n&#39;) = 5;
mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_timer&#39;) = false;
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;</code></pre>
<p>Run the function and show policy function for savings choice. For
ls_ffcmd, ls_ffsna, ls_ffgrh, can include these: ‘v’, ‘ap’, ‘c’, ‘y’,
‘coh’, ‘savefraccoh’. These are value, aprime savings choice,
consumption, income, cash on hand, and savings fraction as cash-on-hand.</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
% ls_ffcmd: summary print which outcomes
mp_support(&#39;ls_ffcmd&#39;) = {};
% ls_ffsna: detail print which outcomes
mp_support(&#39;ls_ffsna&#39;) = {&#39;ap&#39;};
% ls_ffgrh: graphical print which outcomes
mp_support(&#39;ls_ffgrh&#39;) = {&#39;ap&#39;};
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.313830 seconds.
xxx  ff_vfi_az_vec, outcome=ap  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group      a       mean_z_0_54195    mean_z_0_66401    mean_z_0_88162    mean_z_1_3095    mean_z_2_2745
    _____    ______    ______________    ______________    ______________    _____________    _____________

      1           0             0                 0                 0                0           1.0204    
      2      1.0204             0                 0            1.0204           1.0204           2.0408    
      3      2.0408        1.0204            1.0204            2.0408           2.0408           3.0612    
      4      3.0612        2.0408            2.0408            2.0408           3.0612           4.0816    
      5      4.0816        3.0612            3.0612            3.0612           4.0816            5.102    
      6       5.102        4.0816            4.0816            4.0816            5.102           6.1224    
      7      6.1224         5.102             5.102             5.102           6.1224           7.1429    
      8      7.1429        6.1224            6.1224            6.1224           7.1429           8.1633    
      9      8.1633        7.1429            7.1429            7.1429           8.1633           9.1837    
     10      9.1837        8.1633            8.1633            8.1633           9.1837           10.204    
     11      10.204        9.1837            9.1837            9.1837           10.204           11.224    
     12      11.224        10.204            10.204            10.204           11.224           12.245    
     13      12.245        11.224            11.224            11.224           12.245           13.265    
     14      13.265        12.245            12.245            12.245           12.245           14.286    
     15      14.286        13.265            13.265            13.265           13.265           15.306    
     16      15.306        14.286            14.286            14.286           14.286           15.306    
     17      16.327        15.306            15.306            15.306           15.306           16.327    
     18      17.347        16.327            16.327            16.327           16.327           17.347    
     19      18.367        17.347            17.347            17.347           17.347           18.367    
     20      19.388        18.367            18.367            18.367           18.367           19.388    
     21      20.408        19.388            19.388            19.388           19.388           20.408    
     22      21.429        19.388            20.408            20.408           20.408           21.429    
     23      22.449        20.408            21.429            21.429           21.429           22.449    
     24      23.469        21.429            22.449            22.449           22.449           23.469    
     25       24.49        22.449            22.449            23.469           23.469            24.49    
     26       25.51        23.469            23.469             24.49            24.49            25.51    
     27      26.531         24.49             24.49             25.51            25.51           26.531    
     28      27.551         25.51             25.51            26.531           26.531           27.551    
     29      28.571        26.531            26.531            27.551           27.551           28.571    
     30      29.592        27.551            27.551            28.571           28.571           29.592    
     31      30.612        28.571            28.571            28.571           29.592           30.612    
     32      31.633        29.592            29.592            29.592           30.612           31.633    
     33      32.653        30.612            30.612            30.612           31.633           32.653    
     34      33.673        31.633            31.633            31.633           32.653           33.673    
     35      34.694        32.653            32.653            32.653           33.673           34.694    
     36      35.714        33.673            33.673            33.673           34.694           35.714    
     37      36.735        34.694            34.694            34.694           35.714           36.735    
     38      37.755        35.714            35.714            35.714           36.735           37.755    
     39      38.776        36.735            36.735            36.735           37.755           38.776    
     40      39.796        37.755            37.755            37.755           38.776           39.796    
     41      40.816        38.776            38.776            38.776           39.796           40.816    
     42      41.837        39.796            39.796            39.796           40.816           41.837    
     43      42.857        40.816            40.816            40.816           41.837           42.857    
     44      43.878        41.837            41.837            41.837           41.837           42.857    
     45      44.898        42.857            42.857            42.857           42.857           43.878    
     46      45.918        43.878            43.878            43.878           43.878           44.898    
     47      46.939        44.898            44.898            44.898           44.898           45.918    
     48      47.959        45.918            45.918            45.918           45.918           46.939    
     49       48.98        46.939            46.939            46.939           46.939           47.959    
     50          50        47.959            47.959            47.959           47.959            48.98    </code></pre>
<p><img src="img/fx_vfi_az_loop_images/figure_0.png" width="500" /></p>
<p><img src="img/fx_vfi_az_loop_images/figure_1.png" width="500" /></p>
<p>Run the function and show summaries for savings and fraction of coh
saved:</p>
<pre><code>mp_params(&#39;it_a_n&#39;) = 100;
mp_params(&#39;it_z_n&#39;) = 9;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;ap&#39;, &#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {};
mp_support(&#39;bl_vfi_store_all&#39;) = true; % store c(a,z), y(a,z)
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 1.867278 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    ap             1     1      2       900     100      9       21825      24.25     14.089      0.581      0          50
    savefraccoh    2     2      2       900     100      9      752.38    0.83597    0.13497    0.16145      0     0.91812

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7         c8        c9  
            _______    _______    _______    _______    _______    _______    _______    ______    ______

    r1            0          0          0          0          0          0    0.50505    1.5152    3.0303
    r2            0          0          0          0    0.50505    0.50505     1.0101    1.5152    3.5354
    r3      0.50505    0.50505    0.50505    0.50505    0.50505     1.0101     1.5152    2.0202    4.0404
    r4       1.0101     1.0101     1.0101     1.0101     1.0101     1.5152     2.0202    2.5253    4.5455
    r5       1.5152     1.5152     1.5152     1.5152     1.5152     2.0202     2.5253    3.0303    5.0505
    r96      45.455     45.455     45.455      45.96      45.96      45.96     46.465    47.475    49.495
    r97       45.96      45.96      45.96     46.465     46.465     46.465      46.97     47.98    49.495
    r98      46.465     46.465     46.465     46.465      46.97      46.97     47.475    48.485        50
    r99       46.97      46.97      46.97      46.97     47.475     47.475      47.98     48.99        50
    r100     47.475     47.475     47.475     47.475      47.98      47.98     48.485    49.495        50

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7         c8         c9   
            _______    _______    _______    _______    _______    _______    _______    _______    _______

    r1            0          0          0          0          0          0    0.24587    0.48182    0.56208
    r2            0          0          0          0     0.3075    0.25444    0.39276    0.41371    0.59831
    r3      0.30679    0.29486    0.27938    0.25939     0.2338    0.40362    0.49043     0.4833     0.6287
    r4       0.4668    0.45285    0.43438    0.40981    0.37721    0.50166    0.56006    0.53755    0.65456
    r5      0.56502    0.55132    0.53293    0.50802    0.47415    0.57101    0.61221    0.58103    0.67683
    r96     0.91292     0.9117    0.90997    0.91752    0.91364    0.90746    0.90692    0.90732    0.90699
    r97     0.91357    0.91236    0.91064    0.91812    0.91427    0.90815    0.90761    0.90799    0.89847
    r98      0.9142      0.913     0.9113    0.90882    0.91489    0.90882    0.90828    0.90865    0.89919
    r99     0.91482    0.91363    0.91195    0.90949    0.91549    0.90949    0.90894    0.90929    0.89089
    r100    0.91543    0.91425    0.91258    0.91014    0.91609    0.91013    0.90959    0.90992    0.88275</code></pre>
</div>
<div id="test-ff_vfi_az_loop-change-interest-rate-and-discount" class="section level3">
<h3><span class="header-section-number">1.1.4</span> Test FF_VFI_AZ_LOOP Change Interest Rate and Discount</h3>
<p>Show only save fraction of cash on hand:</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {};
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 50;
mp_params(&#39;it_z_n&#39;) = 5;
mp_params(&#39;fl_a_max&#39;) = 50;
mp_params(&#39;st_grid_type&#39;) = &#39;grid_powerspace&#39;;</code></pre>
<p>Solve the model with several different interest rates and discount
factor:</p>
<pre><code>% Lower Savings Incentives
mp_params(&#39;fl_beta&#39;) = 0.80;
mp_params(&#39;fl_r&#39;) = 0.01;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.113265 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean       std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    ______    ________    ___    _______

    savefraccoh    1     1      2       250      50      5      118.68    0.47472    0.2843    0.59887      0     0.80805

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
             c1         c2         c3         c4         c5   
           _______    _______    _______    _______    _______

    r1           0          0          0          0    0.10642
    r2           0          0          0          0     0.1064
    r3           0          0          0          0    0.10629
    r4           0          0          0          0      0.106
    r5           0          0          0          0    0.10543
    r46    0.79096    0.78787    0.78241    0.77191    0.74922
    r47    0.79553    0.79262    0.78747    0.77755    0.75606
    r48     0.7999    0.79715    0.79229     0.7829    0.76254
    r49    0.80407    0.80147    0.79687    0.78799    0.76868
    r50    0.80805    0.80559    0.80125    0.79284     0.7745

% Higher Savings Incentives
mp_params(&#39;fl_beta&#39;) = 0.95;
mp_params(&#39;fl_r&#39;) = 0.04;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.327279 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       250      50      5      160.99    0.64394    0.29947    0.46506      0     0.94888

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
             c1         c2          c3         c4         c5   
           _______    _______    ________    _______    _______

    r1           0          0    0.024103    0.18484    0.40057
    r2           0          0    0.024094     0.1848    0.40051
    r3           0          0    0.024028    0.18446    0.40008
    r4           0          0    0.046583    0.18354    0.39894
    r5           0          0    0.045925    0.24935    0.39672
    r46    0.94526    0.94167     0.93533    0.92312    0.89672
    r47    0.94628    0.94291     0.93696    0.92548    0.90059
    r48    0.94722    0.94405     0.93846    0.92766    0.90418
    r49    0.94808    0.94511     0.93984    0.92966    0.90749
    r50    0.94888    0.94608     0.94111    0.93151    0.91056</code></pre>
</div>
<div id="test-ff_vfi_az_loop-changing-risk-aversion" class="section level3">
<h3><span class="header-section-number">1.1.5</span> Test FF_VFI_AZ_LOOP Changing Risk Aversion</h3>
<p>Here, again, show fraction of coh saved in summary tabular form, but
also show it graphically.</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {&#39;savefraccoh&#39;};
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 100;
mp_params(&#39;it_z_n&#39;) = 5;
mp_params(&#39;fl_a_max&#39;) = 50;
mp_params(&#39;st_grid_type&#39;) = &#39;grid_powerspace&#39;;</code></pre>
<p>Solve the model with different risk aversion levels, higher preferences
for risk:</p>
<pre><code>% Lower Risk Aversion
mp_params(&#39;fl_crra&#39;) = 0.5;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.581794 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       500     100      5      268.82    0.53764    0.29852    0.55524      0     0.86141

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3          c4         c5   
            _______    _______    _______    ________    _______

    r1            0          0          0    0.015741    0.18847
    r2            0          0          0     0.01574    0.18847
    r3            0          0          0    0.015737    0.18844
    r4            0          0          0    0.015728    0.18838
    r5            0          0          0    0.022367    0.18825
    r96     0.84455    0.84169    0.83664     0.85445    0.83255
    r97     0.84611    0.84333    0.83842     0.85626    0.83496
    r98     0.84763    0.84493    0.84016     0.85803    0.83729
    r99     0.84911    0.84648    0.84185     0.85974    0.83956
    r100    0.85055      0.848    0.84349     0.86141    0.84176</code></pre>
<p><img src="img/fx_vfi_az_loop_images/figure_2.png" width="500" /></p>
<p><img src="img/fx_vfi_az_loop_images/figure_3.png" width="500" /></p>
<p>When risk aversion increases, at every state-space point, the household
wants to save more.</p>
<pre><code>% Higher Risk Aversion
mp_params(&#39;fl_crra&#39;) = 5;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.937495 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min     max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    ______

    savefraccoh    1     1      2       500     100      5      335.64    0.67129    0.28688    0.42735      0     0.9488

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2          c3         c4         c5   
            _______    _______    ________    _______    _______

    r1            0          0    0.078907    0.28472    0.52731
    r2            0          0    0.078904    0.28471     0.5273
    r3            0          0    0.078878    0.28465    0.52723
    r4            0          0    0.078808    0.28448    0.52705
    r5            0          0    0.078672    0.28415    0.52669
    r96     0.93086    0.92771     0.92215    0.94079    0.94593
    r97     0.93161    0.92855     0.92315    0.94183    0.94739
    r98     0.93233    0.92936     0.92411    0.94283     0.9488
    r99     0.93303    0.93015     0.92505    0.94379    0.92164
    r100    0.93371    0.93091     0.92595    0.94471    0.92317</code></pre>
<p><img src="img/fx_vfi_az_loop_images/figure_4.png" width="500" /></p>
<p><img src="img/fx_vfi_az_loop_images/figure_5.png" width="500" /></p>
</div>
<div id="test-ff_vfi_az_loop-with-higher-uncertainty" class="section level3">
<h3><span class="header-section-number">1.1.6</span> Test FF_VFI_AZ_LOOP with Higher Uncertainty</h3>
<p>Increase the standard deviation of the Shock.</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {};
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 100;
mp_params(&#39;it_z_n&#39;) = 5;
mp_params(&#39;fl_a_max&#39;) = 50;
mp_params(&#39;st_grid_type&#39;) = &#39;grid_powerspace&#39;;</code></pre>
<p>Lower standard deviation of shock:</p>
<pre><code>% Lower Risk Aversion
mp_params(&#39;fl_shk_std&#39;) = 0.10;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.957457 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum      mean       std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    _____    ______    _______    ________    ___    _______

    savefraccoh    1     1      2       500     100      5      294.1    0.5882    0.32083    0.54544      0     0.92392

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3          c4         c5   
            _______    _______    _______    ________    _______

    r1            0          0          0    0.034556    0.11424
    r2            0          0          0    0.034555    0.11424
    r3            0          0          0    0.034546    0.11422
    r4            0          0          0    0.034523    0.11416
    r5            0          0          0    0.034478    0.11404
    r96     0.89673    0.89421    0.91986     0.91499    0.90808
    r97     0.89789    0.89545    0.92093      0.9162    0.90948
    r98     0.89903    0.89665    0.92196     0.91737    0.91084
    r99     0.90013    0.89782    0.92295      0.9185    0.91215
    r100    0.90119    0.89896    0.92392     0.91959    0.91342</code></pre>
<p>Higher shock standard deviation: low shock high asset save more, high
shock more asset save less, high shock low asset save more:</p>
<pre><code>% Higher Risk Aversion
mp_params(&#39;fl_shk_std&#39;) = 0.40;
ff_vfi_az_loop(mp_params, mp_support);

Elapsed time is 0.923630 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       500     100      5      350.37    0.70073    0.26741    0.38162      0     0.93257

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2          c3         c4         c5   
            _______    _______    ________    _______    _______

    r1            0          0    0.030722    0.36969    0.77072
    r2            0          0     0.03072    0.36967    0.77071
    r3            0          0      0.0307    0.36958    0.77068
    r4            0          0    0.030646    0.36933     0.7706
    r5            0          0    0.030543    0.36885    0.77044
    r96     0.90975    0.90819      0.9038    0.91513    0.88687
    r97     0.91053    0.90902     0.90476    0.91633    0.89076
    r98     0.91129    0.90982     0.90569     0.9175    0.86794
    r99     0.91204    0.91061      0.9066    0.91862    0.84583
    r100    0.91276    0.91138     0.90748    0.91971    0.82439</code></pre>

</div>
</div>
<div id="ff_vfi_az_vec-dynamic-savings-problem-vectorized-common-grid" class="section level2">
<h2><span class="header-section-number">1.2</span> FF_VFI_AZ_VEC Dynamic Savings Problem Vectorized Common Grid</h2>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/MEconTools/">MEconTools</a> Toolbox (<a href="https://fanwangecon.github.io/MEconTools/bookdown">bookdown</a>), <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown</a>).</p>
</blockquote>
<p>This is the example vignette for function:
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_vec.m"><strong>ff_vfi_az_vec</strong></a>
from the <a href="https://fanwangecon.github.io/MEconTools/"><strong>MEconTools
Package</strong></a><strong>.</strong> This function
solves (vectorized) the dynamic programming problem for a (a,z) model.
Households can save a, and face AR(1) shock z. The problem is solved
over the infinite horizon.</p>
<p>The code uses common grid, with the same state space and choice space
grids.
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_vec.m"><strong>ff_vfi_az_bisec_vec</strong></a>
from the <a href="https://fanwangecon.github.io/MEconTools/"><strong>MEconTools
Package</strong></a> solves the same
problem but using continuous exact percentage asset choices, which is
more precise than the solution here, and perhaps a little bit slower.</p>
<p>This is the vectorized code, its speed is much faster than the looped
code. The function is designed to have small memory footprint and
requires low computing resources, yet is fast.</p>
<p><strong>Links to Four Code:</strong></p>
<p>Four Core Savings/Borrowing Dynamic Programming Solution Functions that
are functions in the <a href="https://fanwangecon.github.io/MEconTools/"><strong>MEconTools
Package</strong></a><strong>.</strong> :</p>
<ul>
<li><p>Common Choice and States Grid :
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_loop.m"><strong>ff_vfi_az_loop</strong></a>,
slow should use for testing new models</p></li>
<li><p>Common Choice and States Grid :
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_vec.m"><strong>ff_vfi_az_vec</strong></a>,
fast good for many purposes</p></li>
<li><p>States Grid + Continuous Exact Savings as Share of Cash-on-Hand :<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_loop.m"><strong>ff_vfi_az_bisec_loop</strong></a>,
high precision even with small grid</p></li>
<li><p>States Grid + Continuous Exact Savings as Share of Cash-on-Hand :
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_vec.m"><strong>ff_vfi_az_bisec_vec</strong></a>,
precision and speed</p></li>
</ul>
<div id="test-ff_vfi_az_vec-defaults" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Test FF_VFI_AZ_VEC Defaults</h3>
<p>Call the function with defaults. By default, shows the asset policy
function summary. Model parameters can be changed by the mp_params.</p>
<pre><code>%mp_params
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;fl_crra&#39;) = 1.5;
mp_params(&#39;fl_beta&#39;) = 0.94;
ff_vfi_az_vec(mp_params);

Elapsed time is 0.128918 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
          i    idx    ndim    numel    rowN    colN     sum      mean      std     coefvari    min    max
          _    ___    ____    _____    ____    ____    _____    ______    _____    ________    ___    ___

    ap    1     1      2       700     100      7      16864    24.091    14.08    0.58446      0     50 

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7  
            _______    _______    _______    _______    _______    _______    ______

    r1            0          0          0          0          0    0.50505    2.0202
    r2            0          0          0    0.50505    0.50505     1.0101    2.5253
    r3      0.50505    0.50505    0.50505    0.50505     1.0101     1.5152    3.0303
    r4       1.0101     1.0101     1.0101     1.0101     1.5152     2.0202    3.5354
    r5       1.5152     1.5152     1.5152     1.5152     2.0202     2.5253    4.0404
    r96      45.455     45.455      45.96      45.96      45.96      46.97    48.485
    r97       45.96      45.96      45.96     46.465     46.465     47.475     48.99
    r98      46.465     46.465     46.465      46.97      46.97      47.98     48.99
    r99       46.97      46.97      46.97     47.475     47.475     48.485    49.495
    r100     47.475     47.475     47.475      47.98      47.98      48.99        50</code></pre>
</div>
<div id="test-ff_vfi_az_bisec_vec-speed-tests" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Test FF_VFI_AZ_BISEC_VEC Speed Tests</h3>
<p>Call the function with different a and z grid size, print out speed:</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_timer&#39;) = true;
mp_support(&#39;ls_ffcmd&#39;) = {};</code></pre>
<p>A grid 200, shock grid 9:</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 200;
mp_params(&#39;it_z_n&#39;) = 9;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 0.220867 seconds.</code></pre>
<p>A grid 750, shock grid 15:</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 750;
mp_params(&#39;it_z_n&#39;) = 15;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 3.573648 seconds.</code></pre>
<p>A grid 600, shock grid 45:</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 600;
mp_params(&#39;it_z_n&#39;) = 45;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 8.398580 seconds.</code></pre>
</div>
<div id="test-ff_vfi_az_vec-control-outputs" class="section level3">
<h3><span class="header-section-number">1.2.3</span> Test FF_VFI_AZ_VEC Control Outputs</h3>
<p>Run the function first without any outputs;</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 50;
mp_params(&#39;it_z_n&#39;) = 5;
mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_timer&#39;) = false;
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;</code></pre>
<p>Run the function and show policy function for savings choice. For
ls_ffcmd, ls_ffsna, ls_ffgrh, can include these: ‘v’, ‘ap’, ‘c’, ‘y’,
‘coh’, ‘savefraccoh’. These are value, aprime savings choice,
consumption, income, cash on hand, and savings fraction as cash-on-hand.</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
% ls_ffcmd: summary print which outcomes
mp_support(&#39;ls_ffcmd&#39;) = {};
% ls_ffsna: detail print which outcomes
mp_support(&#39;ls_ffsna&#39;) = {&#39;savefraccoh&#39;};
% ls_ffgrh: graphical print which outcomes
mp_support(&#39;ls_ffgrh&#39;) = {&#39;savefraccoh&#39;};
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 0.014484 seconds.
xxx  ff_vfi_az_vec, outcome=savefraccoh  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group      a       mean_z_0_54195    mean_z_0_66401    mean_z_0_88162    mean_z_1_3095    mean_z_2_2745
    _____    ______    ______________    ______________    ______________    _____________    _____________

      1           0             0                 0                 0                 0           0.3505   
      2      1.0204             0                 0           0.46928           0.37487          0.51572   
      3      2.0408       0.36632           0.34687           0.63373           0.54163          0.61186   
      4      3.0612       0.53265           0.51178           0.47837           0.63592          0.67476   
      5      4.0816       0.62764           0.60816           0.57627           0.69655          0.71911   
      6       5.102       0.68908           0.67137           0.64196           0.73882          0.75206   
      7      6.1224       0.73208           0.71603           0.68909           0.76996          0.77751   
      8      7.1429       0.76386           0.74926           0.72456           0.79387          0.79776   
      9      8.1633        0.7883           0.77494           0.75221           0.81279          0.81425   
     10      9.1837       0.80769           0.79539           0.77438           0.82815          0.82795   
     11      10.204       0.82343           0.81206           0.79254           0.84086           0.8395   
     12      11.224       0.83648           0.82591            0.8077           0.85155          0.84937   
     13      12.245       0.84747           0.83759           0.82053           0.86067          0.85791   
     14      13.265       0.85685           0.84758           0.83155           0.80173          0.86537   
     15      14.286       0.86495           0.85622            0.8411           0.81288          0.87194   
     16      15.306       0.87201           0.86377           0.84947           0.82268          0.82291   
     17      16.327       0.87823           0.87043           0.85685           0.83137          0.83104   
     18      17.347       0.88374           0.87633           0.86342           0.83912          0.83834   
     19      18.367       0.88866           0.88161            0.8693           0.84608          0.84495   
     20      19.388       0.89309           0.88635            0.8746           0.85237          0.85095   
     21      20.408       0.89708           0.89064           0.87939           0.85807          0.85642   
     22      21.429       0.85567           0.89454           0.88375           0.86327          0.86143   
     23      22.449       0.86096           0.89809           0.88773           0.86803          0.86604   
     24      23.469       0.86581           0.90135           0.89138           0.87241          0.87029   
     25       24.49       0.87026           0.86502           0.89474           0.87644          0.87422   
     26       25.51       0.87436            0.8693           0.89784           0.88017          0.87787   
     27      26.531       0.87816           0.87327           0.90071           0.88362          0.88126   
     28      27.551       0.88168           0.87695           0.90338           0.88684          0.88443   
     29      28.571       0.88496           0.88037           0.90586           0.88984          0.88739   
     30      29.592       0.88802           0.88357           0.90818           0.89264          0.89017   
     31      30.612       0.89087           0.88655           0.87896           0.89527          0.89278   
     32      31.633       0.89355           0.88935           0.88197           0.89773          0.89523   
     33      32.653       0.89606           0.89198            0.8848           0.90005          0.89754   
     34      33.673       0.89843           0.89446           0.88747           0.90223          0.89972   
     35      34.694       0.90065           0.89679           0.88998           0.90429          0.90178   
     36      35.714       0.90275           0.89899           0.89235           0.90624          0.90374   
     37      36.735       0.90474           0.90107            0.8946           0.90809          0.90559   
     38      37.755       0.90662           0.90304           0.89673           0.90984          0.90735   
     39      38.776       0.90841           0.90491           0.89874            0.9115          0.90902   
     40      39.796        0.9101           0.90669           0.90066           0.91308          0.91062   
     41      40.816       0.91171           0.90838           0.90249           0.91458          0.91214   
     42      41.837       0.91325           0.90998           0.90422           0.91601          0.91359   
     43      42.857       0.91471           0.91152           0.90588           0.91738          0.91497   
     44      43.878        0.9161           0.91298           0.90746           0.89681          0.89499   
     45      44.898       0.91743           0.91438           0.90897           0.89854          0.89671   
     46      45.918       0.91871           0.91571           0.91042           0.90019          0.89836   
     47      46.939       0.91993           0.91699           0.91181           0.90178          0.89994   
     48      47.959        0.9211           0.91822           0.91313            0.9033          0.90146   
     49       48.98       0.92222           0.91939           0.91441           0.90475          0.90292   
     50          50       0.92329           0.92052           0.91563           0.90615          0.90433   </code></pre>
<p><img src="img/fx_vfi_az_vec_images/figure_0.png" width="500" /></p>
<p><img src="img/fx_vfi_az_vec_images/figure_1.png" width="500" /></p>
<p>Run the function and show summaries for savings and fraction of coh
saved:</p>
<pre><code>mp_params(&#39;it_a_n&#39;) = 100;
mp_params(&#39;it_z_n&#39;) = 9;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;ap&#39;, &#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {};
mp_support(&#39;bl_vfi_store_all&#39;) = true; % store c(a,z), y(a,z)
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 0.127807 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    ap             1     1      2       900     100      9       21825      24.25     14.089      0.581      0          50
    savefraccoh    2     2      2       900     100      9      752.38    0.83597    0.13497    0.16145      0     0.91812

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7         c8        c9  
            _______    _______    _______    _______    _______    _______    _______    ______    ______

    r1            0          0          0          0          0          0    0.50505    1.5152    3.0303
    r2            0          0          0          0    0.50505    0.50505     1.0101    1.5152    3.5354
    r3      0.50505    0.50505    0.50505    0.50505    0.50505     1.0101     1.5152    2.0202    4.0404
    r4       1.0101     1.0101     1.0101     1.0101     1.0101     1.5152     2.0202    2.5253    4.5455
    r5       1.5152     1.5152     1.5152     1.5152     1.5152     2.0202     2.5253    3.0303    5.0505
    r96      45.455     45.455     45.455      45.96      45.96      45.96     46.465    47.475    49.495
    r97       45.96      45.96      45.96     46.465     46.465     46.465      46.97     47.98    49.495
    r98      46.465     46.465     46.465     46.465      46.97      46.97     47.475    48.485        50
    r99       46.97      46.97      46.97      46.97     47.475     47.475      47.98     48.99        50
    r100     47.475     47.475     47.475     47.475      47.98      47.98     48.485    49.495        50

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7         c8         c9   
            _______    _______    _______    _______    _______    _______    _______    _______    _______

    r1            0          0          0          0          0          0    0.24587    0.48182    0.56208
    r2            0          0          0          0     0.3075    0.25444    0.39276    0.41371    0.59831
    r3      0.30679    0.29486    0.27938    0.25939     0.2338    0.40362    0.49043     0.4833     0.6287
    r4       0.4668    0.45285    0.43438    0.40981    0.37721    0.50166    0.56006    0.53755    0.65456
    r5      0.56502    0.55132    0.53293    0.50802    0.47415    0.57101    0.61221    0.58103    0.67683
    r96     0.91292     0.9117    0.90997    0.91752    0.91364    0.90746    0.90692    0.90732    0.90699
    r97     0.91357    0.91236    0.91064    0.91812    0.91427    0.90815    0.90761    0.90799    0.89847
    r98      0.9142      0.913     0.9113    0.90882    0.91489    0.90882    0.90828    0.90865    0.89919
    r99     0.91482    0.91363    0.91195    0.90949    0.91549    0.90949    0.90894    0.90929    0.89089
    r100    0.91543    0.91425    0.91258    0.91014    0.91609    0.91013    0.90959    0.90992    0.88275</code></pre>
</div>
<div id="test-ff_vfi_az_vec-change-interest-rate-and-discount" class="section level3">
<h3><span class="header-section-number">1.2.4</span> Test FF_VFI_AZ_VEC Change Interest Rate and Discount</h3>
<p>Show only save fraction of cash on hand:</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {};
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 750;
mp_params(&#39;it_z_n&#39;) = 9;
mp_params(&#39;fl_a_max&#39;) = 50;
mp_params(&#39;st_grid_type&#39;) = &#39;grid_powerspace&#39;;</code></pre>
<p>Solve the model with several different interest rates and discount
factor:</p>
<pre><code>% Lower Savings Incentives
mp_params(&#39;fl_beta&#39;) = 0.80;
mp_params(&#39;fl_r&#39;) = 0.01;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 0.771613 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      3318.8    0.49167    0.27768    0.56477      0     0.80542

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6          c7         c8         c9   
            _______    _______    _______    _______    _______    _______    ________    _______    _______

    r1            0          0          0          0          0          0    0.023475    0.13289    0.29755
    r2            0          0          0          0          0          0    0.023475    0.13289    0.29755
    r3            0          0          0          0          0          0    0.023475    0.13289    0.29755
    r4            0          0          0          0          0          0    0.023475    0.13289    0.29755
    r5            0          0          0          0          0          0    0.023475    0.13289    0.29755
    r746     0.8044    0.80333    0.80182    0.79961    0.79626    0.79093      0.7887     0.7824    0.77641
    r747    0.80465    0.80359    0.80209    0.79989    0.79655    0.79124     0.78903    0.78277    0.77686
    r748    0.80491    0.80385    0.80235    0.80016    0.79683    0.79154     0.78936    0.78315    0.77731
    r749    0.80517    0.80411    0.80262    0.80043    0.79712    0.79185     0.78969    0.78352    0.77776
    r750    0.80542    0.80437    0.80288    0.80071     0.7974    0.79215     0.79002    0.78389    0.77821

% Higher Savings Incentives
mp_params(&#39;fl_beta&#39;) = 0.95;
mp_params(&#39;fl_r&#39;) = 0.04;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 2.484993 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      4491.9    0.66547    0.28771    0.43234      0     0.93029

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4          c5         c6         c7         c8         c9   
            _______    _______    _______    _______    ________    _______    _______    _______    _______

    r1            0          0          0          0    0.031818    0.14726    0.31047    0.48484    0.64489
    r2            0          0          0          0    0.031818    0.14726    0.31047    0.48484    0.64489
    r3            0          0          0          0    0.031818    0.14726    0.31047    0.48484    0.64489
    r4            0          0          0          0    0.031818    0.14726    0.31047    0.48484    0.64489
    r5            0          0          0          0    0.031818    0.14726    0.31047    0.48484    0.64489
    r746    0.92742       0.93     0.9283    0.92581     0.92578    0.92349    0.92443    0.91686    0.88398
    r747     0.9275    0.93007    0.92838     0.9259     0.92588    0.92361    0.92457    0.91706    0.88076
    r748    0.92757    0.93014    0.92846    0.92599     0.92598    0.92373    0.92472    0.91359    0.87757
    r749    0.92764    0.93022    0.92854    0.92608     0.92608    0.92384    0.92115    0.91014    0.87438
    r750    0.92772    0.93029    0.92862    0.92617     0.92618    0.92396     0.9213    0.90671    0.87121</code></pre>
</div>
<div id="test-ff_vfi_az_vec-changing-risk-aversion" class="section level3">
<h3><span class="header-section-number">1.2.5</span> Test FF_VFI_AZ_VEC Changing Risk Aversion</h3>
<p>Here, again, show fraction of coh saved in summary tabular form, but
also show it graphically.</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {&#39;savefraccoh&#39;};
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 750;
mp_params(&#39;it_z_n&#39;) = 9;
mp_params(&#39;fl_a_max&#39;) = 50;
mp_params(&#39;st_grid_type&#39;) = &#39;grid_powerspace&#39;;</code></pre>
<p>Solve the model with different risk aversion levels, higher preferences
for risk:</p>
<pre><code>% Lower Risk Aversion
mp_params(&#39;fl_crra&#39;) = 0.5;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 1.991475 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean       std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    ______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      3735.9    0.55347    0.2897    0.52343      0     0.85998

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6          c7         c8         c9   
            _______    _______    _______    _______    _______    _______    ________    _______    _______

    r1            0          0          0          0          0          0    0.075021    0.22812    0.41075
    r2            0          0          0          0          0          0    0.075021    0.22812    0.41075
    r3            0          0          0          0          0          0    0.075021    0.22812    0.41075
    r4            0          0          0          0          0          0    0.075021    0.22812    0.41075
    r5            0          0          0          0          0          0    0.075021    0.22812    0.41075
    r746    0.85928    0.85816    0.85657    0.85425    0.85428     0.8522     0.84972    0.84635    0.84292
    r747    0.85946    0.85834    0.85676    0.85444    0.85449    0.85242     0.84997    0.84665     0.8433
    r748    0.85963    0.85852    0.85694    0.85464    0.85469    0.85264     0.85021    0.84694    0.84368
    r749    0.85981     0.8587    0.85713    0.85483    0.85489    0.85286     0.85046    0.84723    0.84405
    r750    0.85998    0.85888    0.85731    0.85502    0.85509    0.85307      0.8507    0.84752    0.84442</code></pre>
<p><img src="img/fx_vfi_az_vec_images/figure_2.png" width="500" /></p>
<p><img src="img/fx_vfi_az_vec_images/figure_3.png" width="500" /></p>
<p>When risk aversion increases, at every state-space point, the household
wants to save more.</p>
<pre><code>% Higher Risk Aversion
mp_params(&#39;fl_crra&#39;) = 5;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 2.026442 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean       std      coefvari    min     max 
                   _    ___    ____    _____    ____    ____    ______    ______    _______    ________    ___    _____

    savefraccoh    1     1      2      6750     750      9      4639.3    0.6873    0.28204    0.41036      0     0.942

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3          c4           c5         c6         c7         c8         c9   
            _______    _______    _______    _________    ________    _______    _______    _______    _______

    r1            0          0          0     0.008995    0.085095    0.21314    0.37277    0.53628    0.68332
    r2            0          0          0     0.008995    0.085095    0.21314    0.37277    0.53628    0.68332
    r3            0          0          0     0.008995    0.085095    0.21314    0.37277    0.53628    0.68332
    r4            0          0          0     0.008995    0.085095    0.21314    0.37277    0.53628    0.68332
    r5            0          0          0    0.0089949    0.085094    0.21314    0.37277    0.53628    0.68332
    r746    0.94083     0.9396    0.94168      0.93912     0.93904    0.94041    0.93743    0.92949    0.89566
    r747    0.94091    0.93969    0.94176      0.93921     0.93914    0.93674    0.93758    0.92969    0.89241
    r748    0.94098    0.93977    0.94184      0.93931     0.93924    0.93686    0.93772    0.92618    0.88918
    r749    0.94106    0.93985    0.94192       0.9394     0.93934    0.93699    0.93787    0.92269    0.88596
    r750    0.94113    0.93993      0.942      0.93949     0.93944    0.93711    0.93801    0.91921    0.88275</code></pre>
<p><img src="img/fx_vfi_az_vec_images/figure_4.png" width="500" /></p>
<p><img src="img/fx_vfi_az_vec_images/figure_5.png" width="500" /></p>
</div>
<div id="test-ff_vfi_az_vec-with-higher-uncertainty" class="section level3">
<h3><span class="header-section-number">1.2.6</span> Test FF_VFI_AZ_VEC with Higher Uncertainty</h3>
<p>Increase the standard deviation of the Shock.</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {};
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 750;
mp_params(&#39;it_z_n&#39;) = 9;
mp_params(&#39;fl_a_max&#39;) = 50;
mp_params(&#39;st_grid_type&#39;) = &#39;grid_powerspace&#39;;</code></pre>
<p>Lower standard deviation of shock:</p>
<pre><code>% Lower Risk Aversion
mp_params(&#39;fl_shk_std&#39;) = 0.10;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 2.065989 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN    sum      mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ____    _______    _______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      4026    0.59644    0.31533    0.52869      0     0.91423

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5          c6          c7         c8         c9   
            _______    _______    _______    _______    _______    ________    ________    _______    _______

    r1            0          0          0          0          0    0.012569    0.062884    0.13754    0.22274
    r2            0          0          0          0          0    0.012569    0.062884    0.13754    0.22274
    r3            0          0          0          0          0    0.012569    0.062884    0.13754    0.22274
    r4            0          0          0          0          0    0.012569    0.062884    0.13754    0.22274
    r5            0          0          0          0          0    0.012569    0.062884    0.13754    0.22274
    r746    0.91375    0.91251    0.91101    0.91289    0.91057     0.91138     0.91136    0.91021     0.9075
    r747    0.91387    0.91264    0.91114    0.91302    0.91072     0.91153     0.91152    0.91039    0.90769
    r748    0.91399    0.91277    0.91127    0.91315    0.91086     0.91168     0.91168    0.91056    0.90788
    r749    0.91411    0.91289     0.9114    0.91329      0.911     0.91183     0.91183    0.91073    0.90807
    r750    0.91423    0.91302    0.91153    0.91342    0.91114     0.91197     0.91199     0.9109    0.90826</code></pre>
<p>Higher shock standard deviation: low shock high asset save more, high
shock more asset save less, high shock low asset save more:</p>
<pre><code>% Higher Risk Aversion
mp_params(&#39;fl_shk_std&#39;) = 0.40;
ff_vfi_az_vec(mp_params, mp_support);

Elapsed time is 2.184888 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min     max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    ______

    savefraccoh    1     1      2      6750     750      9      4687.4    0.69442    0.27109    0.39038      0     0.9339

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4          c5         c6         c7         c8         c9   
            _______    _______    _______    _______    ________    _______    _______    _______    _______

    r1            0          0          0          0    0.030619    0.24561    0.55369    0.80189    0.46265
    r2            0          0          0          0    0.030619    0.24561    0.55369    0.80189    0.46265
    r3            0          0          0          0    0.030619     0.2456    0.55369    0.80189    0.46265
    r4            0          0          0          0    0.030619     0.2456    0.55369    0.80189    0.46265
    r5            0          0          0          0    0.030618     0.2456    0.55369    0.80189    0.46265
    r746    0.93365    0.93335     0.9328    0.93173     0.92941    0.92713    0.92079     0.8402    0.31544
    r747    0.93371    0.93341    0.93286     0.9318     0.92949    0.92723    0.92095    0.83734    0.31504
    r748    0.93378    0.93348    0.93293    0.93187     0.92957    0.92733    0.92111    0.83449    0.31463
    r749    0.93384    0.93354      0.933    0.93194     0.92965    0.92743    0.92127    0.83166    0.31423
    r750     0.9339     0.9336    0.93306    0.93201     0.92973    0.92753    0.92143    0.82883    0.31383</code></pre>

</div>
</div>
<div id="ff_vfi_az_bisec_loop-dynamic-savings-problem-loop-continuous-choice" class="section level2">
<h2><span class="header-section-number">1.3</span> FF_VFI_AZ_BISEC_LOOP Dynamic Savings Problem Loop Continuous Choice</h2>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/MEconTools/">MEconTools</a> Toolbox (<a href="https://fanwangecon.github.io/MEconTools/bookdown">bookdown</a>), <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown</a>).</p>
</blockquote>
<p>This is the example vignette for function:<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_loop.m"><strong>ff_vfi_az_bisec_loop</strong></a>from
the <a href="https://fanwangecon.github.io/MEconTools/"><strong>MEconTools
Package</strong></a><strong>.</strong> This function
solves the dynamic programming problem for a (a,z) model. Households can
save a, and face AR(1) shock z. The problem is solved over the infinite
horizon. This is the looped code, it is slow for larger state-space
problems. The code uses continuous choices, solved with bisection. The
state-space is on a grid, but choice grids are in terms of percentage of
resources to save and solved exactly.</p>
<p><strong>Links to Four Code:</strong></p>
<p>Four Core Savings/Borrowing Dynamic Programming Solution Functions that
are functions in the <a href="https://fanwangecon.github.io/MEconTools/"><strong>MEconTools
Package</strong></a><strong>.</strong> :</p>
<ul>
<li><p>Common Choice and States Grid :
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_loop.m"><strong>ff_vfi_az_loop</strong></a>,
slow should use for testing new models</p></li>
<li><p>Common Choice and States Grid :
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_vec.m"><strong>ff_vfi_az_vec</strong></a>,
fast good for many purposes</p></li>
<li><p>States Grid + Continuous Exact Savings as Share of Cash-on-Hand :<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_loop.m"><strong>ff_vfi_az_bisec_loop</strong></a>,
high precision even with small grid</p></li>
<li><p>States Grid + Continuous Exact Savings as Share of Cash-on-Hand :
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_vec.m"><strong>ff_vfi_az_bisec_vec</strong></a>,
precision and speed</p></li>
</ul>
<div id="test-ff_vfi_az_bisec_loop-defaults" class="section level3">
<h3><span class="header-section-number">1.3.1</span> Test FF_VFI_AZ_BISEC_LOOP Defaults</h3>
<p>Call the function with defaults. By default, shows the asset policy
function summary. Model parameters can be changed by the mp_params.</p>
<pre><code>%mp_params
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;fl_crra&#39;) = 1.5;
mp_params(&#39;fl_beta&#39;) = 0.94;
% call function
ff_vfi_az_bisec_loop(mp_params);

Elapsed time is 31.520504 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
          i    idx    ndim    numel    rowN    colN     sum      mean      std      coefvari    min     max  
          _    ___    ____    _____    ____    ____    _____    ______    ______    ________    ___    ______

    ap    1     1      2       700     100      7      16866    24.094    14.071    0.58399      0     50.252

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7  
            _______    _______    _______    _______    _______    _______    ______

    r1            0          0          0          0    0.13188    0.66203    1.9859
    r2      0.25914    0.26426    0.29511    0.39221    0.57697     1.1208    2.4569
    r3      0.65371    0.66543    0.70966    0.82502      1.029      1.582    2.9298
    r4       1.0748     1.0921     1.1447     1.2698     1.5151     2.0481    3.4046
    r5       1.5152     1.5319     1.5903      1.721     2.0011     2.5252    3.8802
    r96      45.561     45.615     45.712     45.887     46.192     46.835    48.252
    r97      46.049     46.104     46.201     46.377     46.681     47.325    48.743
    r98       46.54     46.593      46.69     46.866     47.171     47.815    49.235
    r99      47.029     47.082     47.179     47.356     47.661     48.304    49.734
    r100     47.518     47.572      47.67     47.845      48.15     48.793    50.252</code></pre>
</div>
<div id="test-ff_vfi_az_bisec_loop-speed-tests" class="section level3">
<h3><span class="header-section-number">1.3.2</span> Test FF_VFI_AZ_BISEC_LOOP Speed Tests</h3>
<p>Call the function with different a and z grid size, print out speed:</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_timer&#39;) = true;
mp_support(&#39;ls_ffcmd&#39;) = {};</code></pre>
<p>A grid 50, shock grid 5:</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 50;
mp_params(&#39;it_z_n&#39;) = 5;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 9.142315 seconds.</code></pre>
<p>A grid 100, shock grid 7:</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 100;
mp_params(&#39;it_z_n&#39;) = 7;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 26.910198 seconds.</code></pre>
<p>A grid 200, shock grid 9:</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 200;
mp_params(&#39;it_z_n&#39;) = 9;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 74.127079 seconds.</code></pre>
</div>
<div id="test-ff_vfi_az_bisec_loop-control-outputs" class="section level3">
<h3><span class="header-section-number">1.3.3</span> Test FF_VFI_AZ_BISEC_LOOP Control Outputs</h3>
<p>Run the function first without any outputs;</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 50;
mp_params(&#39;it_z_n&#39;) = 5;
mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_timer&#39;) = false;
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;</code></pre>
<p>Run the function and show policy function for savings choice. For
ls_ffcmd, ls_ffsna, ls_ffgrh, can include these: ‘v’, ‘ap’, ‘c’, ‘y’,
‘coh’, ‘savefraccoh’. These are value, aprime savings choice,
consumption, income, cash on hand, and savings fraction as cash-on-hand.</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
% ls_ffcmd: summary print which outcomes
mp_support(&#39;ls_ffcmd&#39;) = {};
% ls_ffsna: detail print which outcomes
mp_support(&#39;ls_ffsna&#39;) = {&#39;ap&#39;};
% ls_ffgrh: graphical print which outcomes
mp_support(&#39;ls_ffgrh&#39;) = {&#39;ap&#39;};
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 9.221215 seconds.
xxx  ff_vfi_az_vec, outcome=ap  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group      a       mean_z_0_54195    mean_z_0_66401    mean_z_0_88162    mean_z_1_3095    mean_z_2_2745
    _____    ______    ______________    ______________    ______________    _____________    _____________

      1           0             0                 0                 0           0.17037          1.0635    
      2      1.0204       0.69295           0.72405           0.84423             1.099          2.0409    
      3      2.0408        1.5665            1.6143            1.7589            2.0408          3.0571    
      4      3.0612        2.4757             2.534            2.6903            3.0612          4.0135    
      5      4.0816        3.4036            3.4686            3.6319            4.0274          4.9775    
      6       5.102        4.3431            4.4131            4.5822            4.9848          5.9445    
      7      6.1224        5.2908            5.3648            5.5384            5.9466          6.9138    
      8      7.1429        6.2445            6.3216            6.4989            6.9116          7.8851    
      9      8.1633        7.2029            7.2827             7.463            7.8793          8.8584    
     10      9.1837        8.1651            8.2469            8.4301            8.8495          9.8329    
     11      10.204        9.1837            9.2139            9.3992            9.8212          10.809    
     12      11.224        10.175            10.204             10.37            10.795          11.785    
     13      12.245        11.141            11.225            11.343            11.769          12.763    
     14      13.265        12.109            12.198            12.316            12.745          13.742    
     15      14.286        13.079            13.169            13.291            13.721           14.72    
     16      15.306        14.051            14.142            14.286            14.699            15.7    
     17      16.327        15.026            15.117            15.306            15.677           16.68    
     18      17.347        16.001            16.093            16.289            16.655           17.66    
     19      18.367        16.978            17.069            17.265            17.634          18.641    
     20      19.388        17.955            18.048            18.243            18.614          19.623    
     21      20.408        18.934            19.026            19.223            19.595          20.606    
     22      21.429        19.913            20.006            20.203            20.577          21.589    
     23      22.449        20.894            20.986            21.184            21.559          22.573    
     24      23.469        21.875            21.968            22.166            22.542          23.557    
     25       24.49        22.856             22.95            23.148            23.525          24.542    
     26       25.51        23.838            23.932            24.131            24.509          25.526    
     27      26.531        24.821            24.915            25.114             25.51          26.531    
     28      27.551        25.804            25.899            26.098            26.531          27.551    
     29      28.571        26.788            26.883            27.082            27.524          28.538    
     30      29.592        27.772            27.867            28.067            28.507          29.524    
     31      30.612        28.757            28.852            29.052            29.492          30.509    
     32      31.633        29.742            29.837            30.037            30.477          31.496    
     33      32.653        30.727            30.822            31.023            31.463          32.483    
     34      33.673        31.712            31.808            32.009            32.449           33.47    
     35      34.694        32.698            32.795            32.995            33.435          34.457    
     36      35.714        33.685            33.781            33.982            34.422          35.445    
     37      36.735        34.694            34.768            34.969             35.41          36.432    
     38      37.755        35.714            35.755            35.955            36.397          37.421    
     39      38.776        36.703            36.741            36.942            37.385          38.409    
     40      39.796        37.689            37.755             37.93            38.372          39.397    
     41      40.816        38.676            38.774            38.918            39.361          40.387    
     42      41.837        39.663            39.761            39.906            40.349          41.375    
     43      42.857         40.65            40.749            40.894            41.337          42.365    
     44      43.878        41.637            41.736            41.881            42.326          43.353    
     45      44.898        42.624            42.724             42.87            43.314          44.342    
     46      45.918        43.612            43.711            43.877            44.303          45.331    
     47      46.939          44.6              44.7            44.898            45.293          46.321    
     48      47.959        45.589            45.688            45.893            46.281          47.311    
     49       48.98        46.577            46.676            46.881             47.27            48.3    
     50          50        47.566            47.664             47.87            48.259          49.289    </code></pre>
<p><img src="img/fx_vfi_az_bisec_loop_images/figure_0.png" width="500" /></p>
<p><img src="img/fx_vfi_az_bisec_loop_images/figure_1.png" width="500" /></p>
<p>Run the function and show summaries for savings and fraction of coh
saved:</p>
<pre><code>mp_params(&#39;it_a_n&#39;) = 100;
mp_params(&#39;it_z_n&#39;) = 9;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;ap&#39;, &#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {};
mp_support(&#39;bl_vfi_store_all&#39;) = true; % store c(a,z), y(a,z)
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 35.765637 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean       std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    ______    ________    ___    _______

    ap             1     1      2       900     100      9       21835     24.261    14.095    0.58096      0       51.61
    savefraccoh    2     2      2       900     100      9      754.27    0.83808    0.1259    0.15023      0     0.91596

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5          c6         c7         c8        c9  
            _______    _______    _______    _______    _______    ________    _______    ______    ______

    r1            0          0          0          0          0    0.082559    0.50504    1.2988    3.1416
    r2      0.26067    0.25936    0.26888    0.30308    0.39296     0.52492    0.96211    1.7672    3.6183
    r3      0.65383    0.65589    0.67297    0.71974    0.82473      1.0101     1.4185    2.2377    4.0955
    r4       1.0734     1.0789     1.1015     1.1556     1.2679      1.4909     1.8821    2.7095    4.5736
    r5       1.5151     1.5159     1.5427     1.6019       1.72      1.9489      2.349    3.1825    5.0521
    r96      45.547      45.58     45.636      45.73     45.888      46.134     46.603     47.52     49.54
    r97      46.036     46.069     46.126      46.22     46.377      46.622     47.092    48.009    50.057
    r98      46.525     46.559     46.615      46.71     46.867      47.112     47.583    48.501    50.575
    r99      47.014     47.049     47.104     47.198     47.357      47.601     48.072    48.992    51.092
    r100     47.503     47.537     47.593     47.687     47.845      48.091     48.561    49.495     51.61

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5          c6         c7         c8         c9   
            _______    _______    _______    _______    _______    ________    _______    _______    _______

    r1            0          0          0          0          0    0.056268    0.24587    0.41301    0.58272
    r2      0.23098      0.217    0.20843    0.21203    0.23925     0.26445     0.3741    0.48253    0.61235
    r3      0.39717    0.38292    0.37227    0.36965    0.38179     0.40361    0.45915    0.53532    0.63728
    r4      0.49605    0.48369    0.47368    0.46883    0.47347     0.49364    0.52177    0.57677    0.65861
    r5      0.56502    0.55159    0.54262    0.53709    0.53825     0.55086    0.56947    0.61021    0.67704
    r96     0.91477    0.91422    0.91361    0.91294    0.91221      0.9109    0.90961    0.90818    0.90781
    r97     0.91508    0.91453    0.91395    0.91328    0.91254     0.91123    0.90998    0.90855    0.90867
    r98     0.91538    0.91486    0.91425    0.91361    0.91288     0.91157    0.91035    0.90894    0.90952
    r99     0.91569    0.91517    0.91456    0.91392    0.91322      0.9119    0.91068    0.90934    0.91035
    r100    0.91596    0.91544    0.91486    0.91422    0.91352     0.91224    0.91102    0.90992    0.91117</code></pre>
</div>
<div id="test-ff_vfi_az_bisec_loop-change-interest-rate-and-discount" class="section level3">
<h3><span class="header-section-number">1.3.4</span> Test FF_VFI_AZ_BISEC_LOOP Change Interest Rate and Discount</h3>
<p>Show only save fraction of cash on hand:</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {};
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 50;
mp_params(&#39;it_z_n&#39;) = 5;
mp_params(&#39;fl_a_max&#39;) = 50;
mp_params(&#39;st_grid_type&#39;) = &#39;grid_powerspace&#39;;</code></pre>
<p>Solve the model with several different interest rates and discount
factor:</p>
<pre><code>% Lower Savings Incentives
mp_params(&#39;fl_beta&#39;) = 0.80;
mp_params(&#39;fl_r&#39;) = 0.01;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 2.672239 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       250      50      5      119.77    0.47907    0.28808    0.60133      0     0.80699

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
             c1         c2         c3         c4         c5   
           _______    _______    _______    _______    _______

    r1           0          0          0          0    0.10641
    r2           0          0          0          0    0.10641
    r3           0          0          0          0    0.10629
    r4           0          0          0          0    0.10601
    r5           0          0          0          0    0.10793
    r46    0.79096    0.78788    0.78242    0.77293    0.76768
    r47    0.79554    0.79261    0.78749    0.77754    0.77168
    r48    0.79991    0.79716    0.79228    0.78291     0.7754
    r49    0.80406    0.80146    0.79688      0.788    0.77891
    r50    0.80699    0.80396     0.8003    0.79283    0.78218

% Higher Savings Incentives
mp_params(&#39;fl_beta&#39;) = 0.95;
mp_params(&#39;fl_r&#39;) = 0.04;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 11.445094 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       250      50      5      162.74    0.65097    0.29744    0.45693      0     0.92924

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
             c1         c2          c3         c4         c5   
           _______    _______    ________    _______    _______

    r1           0          0    0.029138    0.21236    0.45384
    r2           0          0    0.029535    0.21258     0.4539
    r3           0          0     0.03219    0.21401    0.45448
    r4           0          0    0.039301    0.21795    0.45607
    r5           0          0    0.045923    0.22542    0.45909
    r46     0.9221    0.92124     0.92029    0.91929    0.91587
    r47    0.92408    0.92329     0.92237    0.92142    0.91816
    r48    0.92591    0.92518     0.92432    0.92344    0.92057
    r49    0.92762    0.92692     0.92612    0.92536    0.92347
    r50    0.92924     0.9286     0.92792    0.92737    0.92783</code></pre>
</div>
<div id="test-ff_vfi_az_bisec_loop-changing-risk-aversion" class="section level3">
<h3><span class="header-section-number">1.3.5</span> Test FF_VFI_AZ_BISEC_LOOP Changing Risk Aversion</h3>
<p>Here, again, show fraction of coh saved in summary tabular form, but
also show it graphically.</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {&#39;savefraccoh&#39;};
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 100;
mp_params(&#39;it_z_n&#39;) = 5;
mp_params(&#39;fl_a_max&#39;) = 50;
mp_params(&#39;st_grid_type&#39;) = &#39;grid_powerspace&#39;;</code></pre>
<p>Solve the model with different risk aversion levels, higher preferences
for risk:</p>
<pre><code>% Lower Risk Aversion
mp_params(&#39;fl_crra&#39;) = 0.5;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 20.016228 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       500     100      5      270.24    0.54048    0.30018     0.5554      0     0.85804

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3          c4         c5   
            _______    _______    _______    ________    _______

    r1            0          0          0    0.016108    0.19552
    r2            0          0          0    0.016138    0.19555
    r3            0          0          0    0.016352    0.19564
    r4            0          0          0    0.016962    0.19591
    r5            0          0          0    0.018091    0.19646
    r96     0.85334    0.85127    0.84879     0.84602    0.84037
    r97     0.85456    0.85255    0.85017     0.84748     0.8419
    r98     0.85578    0.85383    0.85151     0.84889    0.84339
    r99     0.85694    0.85502    0.85279     0.85023    0.84483
    r100    0.85804    0.85621    0.85404     0.85154    0.84623</code></pre>
<p><img src="img/fx_vfi_az_bisec_loop_images/figure_2.png" width="500" /></p>
<p><img src="img/fx_vfi_az_bisec_loop_images/figure_3.png" width="500" /></p>
<p>When risk aversion increases, at every state-space point, the household
wants to save more.</p>
<pre><code>% Higher Risk Aversion
mp_params(&#39;fl_crra&#39;) = 5;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 19.070686 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       500     100      5      337.39    0.67477    0.28798    0.42678      0     0.94089

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2          c3         c4         c5   
            _______    _______    ________    _______    _______

    r1            0          0    0.082635     0.2781     0.5078
    r2            0          0    0.082665    0.27813     0.5078
    r3            0          0     0.08297    0.27828    0.50786
    r4            0          0    0.083794    0.27871    0.50801
    r5            0          0    0.085381    0.27956    0.50835
    r96     0.93751    0.93699     0.93641    0.93586    0.93482
    r97     0.93839     0.9379     0.93732     0.9368    0.93586
    r98     0.93925    0.93876     0.93824    0.93775    0.93702
    r99      0.9401    0.93961     0.93909    0.93867    0.93839
    r100    0.94089    0.94044     0.93998    0.93961    0.94013</code></pre>
<p><img src="img/fx_vfi_az_bisec_loop_images/figure_4.png" width="500" /></p>
<p><img src="img/fx_vfi_az_bisec_loop_images/figure_5.png" width="500" /></p>
</div>
<div id="test-ff_vfi_az_bisec_loop-with-higher-uncertainty" class="section level3">
<h3><span class="header-section-number">1.3.6</span> Test FF_VFI_AZ_BISEC_LOOP with Higher Uncertainty</h3>
<p>Increase the standard deviation of the Shock.</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {};
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 100;
mp_params(&#39;it_z_n&#39;) = 5;
mp_params(&#39;fl_a_max&#39;) = 50;
mp_params(&#39;st_grid_type&#39;) = &#39;grid_powerspace&#39;;</code></pre>
<p>Lower standard deviation of shock:</p>
<pre><code>% Lower Risk Aversion
mp_params(&#39;fl_shk_std&#39;) = 0.10;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 19.744605 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min     max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    ______

    savefraccoh    1     1      2       500     100      5      295.24    0.59048    0.32213    0.54554      0     0.9127

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3          c4         c5   
            _______    _______    _______    ________    _______

    r1            0          0          0    0.030451    0.12142
    r2            0          0          0    0.030481    0.12145
    r3            0          0          0    0.030725    0.12164
    r4            0          0          0    0.031366    0.12209
    r5            0          0          0    0.032648    0.12304
    r96     0.90824    0.90775    0.90726     0.90675    0.90629
    r97     0.90943    0.90894    0.90845     0.90797    0.90751
    r98     0.91056     0.9101    0.90961     0.90916     0.9087
    r99     0.91166     0.9112    0.91074     0.91029    0.90983
    r100     0.9127    0.91227    0.91184     0.91138    0.91096</code></pre>
<p>Higher shock standard deviation: low shock high asset save more, high
shock more asset save less, high shock low asset save more:</p>
<pre><code>% Higher Risk Aversion
mp_params(&#39;fl_shk_std&#39;) = 0.40;
ff_vfi_az_bisec_loop(mp_params, mp_support);

Elapsed time is 17.556461 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2       500     100      5      354.06    0.70811    0.27055    0.38207      0     0.92811

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2          c3         c4         c5   
            _______    _______    ________    _______    _______

    r1            0          0    0.030725    0.36968    0.77064
    r2            0          0    0.030725    0.36968    0.77064
    r3            0          0    0.030695    0.36959    0.77064
    r4            0          0    0.030634    0.36934    0.77061
    r5            0          0    0.030542    0.36885    0.77043
    r96     0.92429    0.92289     0.92091    0.91688    0.92026
    r97     0.92496    0.92362     0.92173    0.91795    0.92231
    r98     0.92564    0.92432     0.92252    0.91898    0.92429
    r99     0.92628    0.92503     0.92332    0.91999    0.92625
    r100    0.92689     0.9257     0.92408    0.92103    0.92811</code></pre>

</div>
</div>
<div id="ff_vfi_az_bisec_vec-dynamic-savings-problem-vectorized-continuous-exact" class="section level2">
<h2><span class="header-section-number">1.4</span> FF_VFI_AZ_BISEC_VEC Dynamic Savings Problem Vectorized Continuous Exact</h2>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/MEconTools/">MEconTools</a> Toolbox (<a href="https://fanwangecon.github.io/MEconTools/bookdown">bookdown</a>), <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown</a>).</p>
</blockquote>
<p>This is the example vignette for function:
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_vec.m"><strong>ff_vfi_az_bisec_vec</strong></a>
from the <a href="https://fanwangecon.github.io/MEconTools/"><strong>MEconTools
Package</strong></a><strong>.</strong> This function
solves the dynamic programming problem for a (a,z) model. Households can
save a, and face AR(1) shock z. The problem is solved over the infinite
horizon. This is a vectorized code, it is much faster for larger
state-space problems then looped code.</p>
<p>The code uses continuous choices, solved with bi(multi)section. The
state-space is on a grid, but choice grids are in terms of percentage of
resources available, which is individual specific, to save and solved
exactly up to ((1/(2)^16)*100=0.001525878) percentage of cash on hand.
THe
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_vec.m"><strong>ff_vfi_az_vec</strong></a>
from the <a href="https://fanwangecon.github.io/MEconTools/"><strong>MEconTools
Package</strong></a> solves the same
problem using vectorized common grid code where the choice set and state
space share the same grid.</p>
<p>This is the vectorized code, its speed is much faster than the looped
code. The function is designed to have small memory footprint and
requires low computing resources, yet is fast.</p>
<p><strong>Links to Four Code:</strong></p>
<p>Four Core Savings/Borrowing Dynamic Programming Solution Functions that
are functions in the <a href="https://fanwangecon.github.io/MEconTools/"><strong>MEconTools
Package</strong></a><strong>.</strong> :</p>
<ul>
<li><p>Common Choice and States Grid :
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_loop.m"><strong>ff_vfi_az_loop</strong></a>,
slow should use for testing new models</p></li>
<li><p>Common Choice and States Grid :
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_vec.m"><strong>ff_vfi_az_vec</strong></a>,
fast good for many purposes</p></li>
<li><p>States Grid + Continuous Exact Savings as Share of Cash-on-Hand :<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_loop.m"><strong>ff_vfi_az_bisec_loop</strong></a>,
high precision even with small grid</p></li>
<li><p>States Grid + Continuous Exact Savings as Share of Cash-on-Hand :
<a href="https://github.com/FanWangEcon/MEconTools/blob/master/MEconTools/vfi/ff_vfi_az_bisec_vec.m"><strong>ff_vfi_az_bisec_vec</strong></a>,
precision and speed</p></li>
</ul>
<div id="test-ff_vfi_az_bisec_vec-defaults" class="section level3">
<h3><span class="header-section-number">1.4.1</span> Test FF_VFI_AZ_BISEC_VEC Defaults</h3>
<p>Call the function with defaults. By default, shows the asset policy
function summary. Model parameters can be changed by the mp_params.</p>
<pre><code>%mp_params
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;fl_crra&#39;) = 1.5;
mp_params(&#39;fl_beta&#39;) = 0.94;
% call function
ff_vfi_az_bisec_vec(mp_params);

Elapsed time is 0.668798 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
          i    idx    ndim    numel    rowN    colN     sum      mean      std      coefvari    min     max  
          _    ___    ____    _____    ____    ____    _____    ______    ______    ________    ___    ______

    ap    1     1      2       700     100      7      16866    24.094    14.071    0.58399      0     50.252

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6         c7  
            _______    _______    _______    _______    _______    _______    ______

    r1            0          0          0          0    0.13188    0.66203    1.9859
    r2      0.25914    0.26426    0.29511    0.39221    0.57697     1.1208    2.4569
    r3      0.65371    0.66543    0.70966    0.82502      1.029      1.582    2.9298
    r4       1.0748     1.0921     1.1447     1.2698     1.5151     2.0481    3.4046
    r5       1.5152     1.5319     1.5903      1.721     2.0011     2.5252    3.8802
    r96      45.561     45.615     45.712     45.887     46.192     46.835    48.252
    r97      46.049     46.104     46.201     46.377     46.681     47.325    48.743
    r98       46.54     46.593      46.69     46.866     47.171     47.815    49.235
    r99      47.029     47.082     47.179     47.356     47.661     48.304    49.734
    r100     47.518     47.572      47.67     47.845      48.15     48.793    50.252</code></pre>
</div>
<div id="test-ff_vfi_az_bisec_vec-speed-tests-1" class="section level3">
<h3><span class="header-section-number">1.4.2</span> Test FF_VFI_AZ_BISEC_VEC Speed Tests</h3>
<p>Call the function with defaults. By default, shows the asset policy
function summary. Model parameters can be changed by the mp_params.</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_timer&#39;) = true;
mp_support(&#39;ls_ffcmd&#39;) = {};</code></pre>
<p>A grid 50, shock grid 5:</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 50;
mp_params(&#39;it_z_n&#39;) = 5;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 0.336083 seconds.</code></pre>
<p>A grid 750, shock grid 15:</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 750;
mp_params(&#39;it_z_n&#39;) = 15;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 23.612756 seconds.</code></pre>
<p>A grid 600, shock grid 45:</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 600;
mp_params(&#39;it_z_n&#39;) = 45;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 46.281741 seconds.</code></pre>
</div>
<div id="test-ff_vfi_az_bisec_vec-control-outputs" class="section level3">
<h3><span class="header-section-number">1.4.3</span> Test FF_VFI_AZ_BISEC_VEC Control Outputs</h3>
<p>Run the function first without any outputs;</p>
<pre><code>mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 50;
mp_params(&#39;it_z_n&#39;) = 5;
mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_timer&#39;) = false;
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;</code></pre>
<p>Run the function and show policy function for savings choice. For
ls_ffcmd, ls_ffsna, ls_ffgrh, can include these: ‘v’, ‘ap’, ‘c’, ‘y’,
‘coh’, ‘savefraccoh’. These are value, aprime savings choice,
consumption, income, cash on hand, and savings fraction as cash-on-hand.</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
% ls_ffcmd: summary print which outcomes
mp_support(&#39;ls_ffcmd&#39;) = {};
% ls_ffsna: detail print which outcomes
mp_support(&#39;ls_ffsna&#39;) = {&#39;savefraccoh&#39;};
% ls_ffgrh: graphical print which outcomes
mp_support(&#39;ls_ffgrh&#39;) = {&#39;savefraccoh&#39;};
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 0.470134 seconds.
xxx  ff_vfi_az_vec, outcome=savefraccoh  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group      a       mean_z_0_54195    mean_z_0_66401    mean_z_0_88162    mean_z_1_3095    mean_z_2_2745
    _____    ______    ______________    ______________    ______________    _____________    _____________

      1           0             0                 0                 0           0.10165          0.36531   
      2      1.0204       0.39833           0.38191           0.38826           0.40373          0.51573   
      3      2.0408       0.56236           0.54875           0.54619           0.54161          0.61104   
      4      3.0612       0.64616           0.63545            0.6306           0.63591          0.66349   
      5      4.0816       0.69783            0.6891            0.6837            0.6873          0.70155   
      6       5.102       0.73323            0.7259           0.72068           0.72184           0.7302   
      7      6.1224       0.75917           0.75291           0.74803           0.74784          0.75257   
      8      7.1429       0.77909           0.77363           0.76911           0.76817          0.77058   
      9      8.1633       0.79493           0.79011           0.78593           0.78452          0.78541   
     10      9.1837       0.80787           0.80354           0.79969           0.79801          0.79783   
     11      10.204       0.82343           0.81474           0.81114            0.8093          0.80839   
     12      11.224       0.83412           0.82591           0.82084           0.81895          0.81748   
     13      12.245       0.84116           0.83759           0.82917           0.82725          0.82542   
     14      13.265       0.84733           0.84434           0.83637           0.83448          0.83241   
     15      14.286       0.85282           0.84998           0.84272           0.84083          0.83857   
     16      15.306        0.8577           0.85508           0.84947           0.84647          0.84406   
     17      16.327       0.86213           0.85966           0.85685           0.85151          0.84901   
     18      17.347       0.86613           0.86378           0.86143             0.856          0.85349   
     19      18.367       0.86976            0.8675           0.86521           0.86008          0.85755   
     20      19.388       0.87305           0.87092           0.86869           0.86384          0.86128   
     21      20.408       0.87608           0.87403            0.8719           0.86726          0.86472   
     22      21.429       0.87885            0.8769           0.87486            0.8704           0.8679   
     23      22.449       0.88145           0.87955            0.8776           0.87333          0.87083   
     24      23.469       0.88383           0.88203           0.88013           0.87601          0.87354   
     25       24.49       0.88602           0.88432           0.88248           0.87852          0.87608   
     26       25.51        0.8881           0.88645           0.88468           0.88087          0.87843   
     27      26.531       0.89002           0.88844           0.88673           0.88361          0.88126   
     28      27.551       0.89185           0.89033           0.88865           0.88685          0.88444   
     29      28.571       0.89353           0.89207           0.89045           0.88895          0.88636   
     30      29.592       0.89515           0.89371           0.89216           0.89063          0.88813   
     31      30.612       0.89664           0.89527           0.89375           0.89225          0.88978   
     32      31.633       0.89808           0.89674           0.89524           0.89378          0.89136   
     33      32.653       0.89942           0.89811           0.89667           0.89521          0.89286   
     34      33.673       0.90067           0.89942           0.89802           0.89658          0.89429   
     35      34.694       0.90189           0.90067            0.8993            0.8979          0.89564   
     36      35.714       0.90305           0.90186           0.90052           0.89915          0.89692   
     37      36.735       0.90473           0.90299           0.90168           0.90034          0.89814   
     38      37.755       0.90662           0.90406           0.90278           0.90147          0.89933   
     39      38.776       0.90763           0.90507           0.90382           0.90256          0.90043   
     40      39.796       0.90852           0.90668           0.90482           0.90357           0.9015   
     41      40.816       0.90937           0.90833            0.9058           0.90458          0.90253   
     42      41.837       0.91019           0.90919           0.90671           0.90552          0.90351   
     43      42.857       0.91099           0.91001            0.9076           0.90641          0.90446   
     44      43.878       0.91172           0.91077           0.90842           0.90729          0.90534   
     45      44.898       0.91245           0.91154           0.90925           0.90812           0.9062   
     46      45.918       0.91315           0.91224           0.91041           0.90891          0.90702   
     47      46.939       0.91383           0.91294           0.91181           0.90971          0.90784   
     48      47.959        0.9145           0.91361           0.91264           0.91044          0.90861   
     49       48.98       0.91511           0.91425           0.91328           0.91114          0.90934   
     50          50       0.91572           0.91486           0.91392           0.91181          0.91004   </code></pre>
<p><img src="img/fx_vfi_az_bisec_vec_images/figure_0.png" width="500" /></p>
<p><img src="img/fx_vfi_az_bisec_vec_images/figure_1.png" width="500" /></p>
<p>Run the function and show summaries for savings and fraction of coh
saved:</p>
<pre><code>mp_params(&#39;it_a_n&#39;) = 100;
mp_params(&#39;it_z_n&#39;) = 9;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;ap&#39;, &#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {};
mp_support(&#39;bl_vfi_store_all&#39;) = true; % store c(a,z), y(a,z)
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 0.716025 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean       std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    ______    ________    ___    _______

    ap             1     1      2       900     100      9       21835     24.261    14.095    0.58096      0       51.61
    savefraccoh    2     2      2       900     100      9      754.27    0.83808    0.1259    0.15023      0     0.91596

xxx TABLE:ap xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5          c6         c7         c8        c9  
            _______    _______    _______    _______    _______    ________    _______    ______    ______

    r1            0          0          0          0          0    0.082559    0.50504    1.2988    3.1416
    r2      0.26067    0.25936    0.26888    0.30308    0.39296     0.52492    0.96211    1.7672    3.6183
    r3      0.65383    0.65589    0.67297    0.71974    0.82473      1.0101     1.4185    2.2377    4.0955
    r4       1.0734     1.0789     1.1015     1.1556     1.2679      1.4909     1.8821    2.7095    4.5736
    r5       1.5151     1.5159     1.5427     1.6019       1.72      1.9489      2.349    3.1825    5.0521
    r96      45.547      45.58     45.636      45.73     45.888      46.134     46.603     47.52     49.54
    r97      46.036     46.069     46.126      46.22     46.377      46.622     47.092    48.009    50.057
    r98      46.525     46.559     46.615      46.71     46.867      47.112     47.583    48.501    50.575
    r99      47.014     47.049     47.104     47.198     47.357      47.601     48.072    48.992    51.092
    r100     47.503     47.537     47.593     47.687     47.845      48.091     48.561    49.495     51.61

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5          c6         c7         c8         c9   
            _______    _______    _______    _______    _______    ________    _______    _______    _______

    r1            0          0          0          0          0    0.056268    0.24587    0.41301    0.58272
    r2      0.23098      0.217    0.20843    0.21203    0.23925     0.26445     0.3741    0.48253    0.61235
    r3      0.39717    0.38292    0.37227    0.36965    0.38179     0.40361    0.45915    0.53532    0.63728
    r4      0.49605    0.48369    0.47368    0.46883    0.47347     0.49364    0.52177    0.57677    0.65861
    r5      0.56502    0.55159    0.54262    0.53709    0.53825     0.55086    0.56947    0.61021    0.67704
    r96     0.91477    0.91422    0.91361    0.91294    0.91221      0.9109    0.90961    0.90818    0.90781
    r97     0.91508    0.91453    0.91395    0.91328    0.91254     0.91123    0.90998    0.90855    0.90867
    r98     0.91538    0.91486    0.91425    0.91361    0.91288     0.91157    0.91035    0.90894    0.90952
    r99     0.91569    0.91517    0.91456    0.91392    0.91322      0.9119    0.91068    0.90934    0.91035
    r100    0.91596    0.91544    0.91486    0.91422    0.91352     0.91224    0.91102    0.90992    0.91117</code></pre>
</div>
<div id="test-ff_vfi_az_bisec_vec-change-interest-rate-and-discount" class="section level3">
<h3><span class="header-section-number">1.4.4</span> Test FF_VFI_AZ_BISEC_VEC Change Interest Rate and Discount</h3>
<p>Show only save fraction of cash on hand:</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {};
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 750;
mp_params(&#39;it_z_n&#39;) = 9;
mp_params(&#39;fl_a_max&#39;) = 50;
mp_params(&#39;st_grid_type&#39;) = &#39;grid_powerspace&#39;;</code></pre>
<p>Solve the model with several different interest rates and discount
factor:</p>
<pre><code>% Lower Savings Incentives
mp_params(&#39;fl_beta&#39;) = 0.80;
mp_params(&#39;fl_r&#39;) = 0.01;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 4.541023 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      3318.4    0.49162    0.27766    0.56478      0     0.80534

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6          c7         c8         c9   
            _______    _______    _______    _______    _______    _______    ________    _______    _______

    r1            0          0          0          0          0          0    0.023584     0.1329    0.29705
    r2            0          0          0          0          0          0    0.023584     0.1329    0.29705
    r3            0          0          0          0          0          0    0.023584     0.1329    0.29705
    r4            0          0          0          0          0          0    0.023584     0.1329    0.29705
    r5            0          0          0          0          0          0    0.023584     0.1329    0.29705
    r746    0.80439    0.80299    0.80094    0.79856    0.79588    0.79222     0.78825    0.78263    0.77647
    r747    0.80467    0.80314     0.8011    0.79875    0.79606     0.7924     0.78846    0.78285    0.77687
    r748    0.80491    0.80329    0.80125     0.7989    0.79621    0.79255     0.78864    0.78315    0.77732
    r749    0.80515    0.80341    0.80137    0.79905     0.7964    0.79273     0.78883    0.78352    0.77769
    r750    0.80534    0.80357    0.80152     0.7992    0.79655    0.79292     0.78904    0.78388     0.7779

% Higher Savings Incentives
mp_params(&#39;fl_beta&#39;) = 0.95;
mp_params(&#39;fl_r&#39;) = 0.04;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 17.994960 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min     max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    ______

    savefraccoh    1     1      2      6750     750      9      4493.5    0.66571    0.28784    0.43238      0     0.9293

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4          c5         c6         c7         c8         c9   
            _______    _______    _______    _______    ________    _______    _______    _______    _______

    r1            0          0          0          0    0.032007    0.15008    0.31087    0.48467    0.64488
    r2            0          0          0          0    0.032007    0.15008    0.31087    0.48467    0.64488
    r3            0          0          0          0    0.032007    0.15008    0.31087    0.48467    0.64488
    r4            0          0          0          0    0.032007    0.15008    0.31087    0.48467    0.64488
    r5            0          0          0          0    0.032007    0.15008    0.31087    0.48467    0.64488
    r746     0.9289     0.9285    0.92805    0.92734     0.92664    0.92594    0.92515    0.92545    0.92777
    r747    0.92902     0.9286    0.92814    0.92747     0.92673    0.92606     0.9253    0.92573    0.92802
    r748    0.92911    0.92869    0.92826    0.92756     0.92686    0.92618    0.92545      0.926    0.92829
    r749    0.92921    0.92881    0.92835    0.92768     0.92698    0.92631    0.92564    0.92631    0.92857
    r750     0.9293     0.9289    0.92844    0.92777     0.92707    0.92643    0.92591    0.92658    0.92881</code></pre>
</div>
<div id="test-ff_vfi_az_bisec_vec-changing-risk-aversion" class="section level3">
<h3><span class="header-section-number">1.4.5</span> Test FF_VFI_AZ_BISEC_VEC Changing Risk Aversion</h3>
<p>Here, again, show fraction of coh saved in summary tabular form, but
also show it graphically.</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {&#39;savefraccoh&#39;};
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 750;
mp_params(&#39;it_z_n&#39;) = 9;
mp_params(&#39;fl_a_max&#39;) = 50;
mp_params(&#39;st_grid_type&#39;) = &#39;grid_powerspace&#39;;</code></pre>
<p>Solve the model with different risk aversion levels, higher preferences
for risk:</p>
<pre><code>% Lower Risk Aversion
mp_params(&#39;fl_crra&#39;) = 0.5;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 13.815578 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      3735.7    0.55343    0.28972     0.5235      0     0.85999

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5         c6          c7         c8         c9   
            _______    _______    _______    _______    _______    _______    ________    _______    _______

    r1            0          0          0          0          0          0    0.074609    0.22661    0.41036
    r2            0          0          0          0          0          0    0.074609    0.22661    0.41036
    r3            0          0          0          0          0          0    0.074609    0.22661    0.41036
    r4            0          0          0          0          0          0    0.074609    0.22661    0.41036
    r5            0          0          0          0          0          0    0.074609    0.22664    0.41039
    r746    0.85941    0.85828    0.85703     0.8556    0.85398    0.85178     0.84907    0.84583    0.84211
    r747    0.85957    0.85844    0.85719    0.85575    0.85413    0.85194     0.84925    0.84602    0.84229
    r748    0.85969    0.85859    0.85734     0.8559    0.85429    0.85212     0.84943     0.8462    0.84248
    r749    0.85984    0.85871    0.85749    0.85606    0.85447    0.85227     0.84962    0.84638    0.84266
    r750    0.85999    0.85889    0.85761    0.85621    0.85462    0.85246     0.84977    0.84657    0.84284</code></pre>
<p><img src="img/fx_vfi_az_bisec_vec_images/figure_2.png" width="500" /></p>
<p><img src="img/fx_vfi_az_bisec_vec_images/figure_3.png" width="500" /></p>
<p>When risk aversion increases, at every state-space point, the household
wants to save more.</p>
<pre><code>% Higher Risk Aversion
mp_params(&#39;fl_crra&#39;) = 5;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 13.688997 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN    sum      mean       std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ____    _______    ______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      4640    0.68741    0.2821    0.41039      0     0.94169

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3          c4           c5         c6         c7         c8         c9   
            _______    _______    _______    _________    ________    _______    _______    _______    _______

    r1            0          0          0    0.0089972    0.085107    0.21343    0.37139    0.53578    0.68562
    r2            0          0          0    0.0089972    0.085107    0.21343    0.37139    0.53578    0.68562
    r3            0          0          0    0.0089972    0.085107    0.21343    0.37139    0.53578    0.68562
    r4            0          0          0    0.0089972    0.085107    0.21343    0.37139    0.53578    0.68562
    r5            0          0          0    0.0089972    0.085107    0.21343    0.37139    0.53578    0.68562
    r746    0.94105    0.94074    0.94041      0.93992     0.93943    0.93897    0.93848    0.93885    0.94083
    r747    0.94114    0.94083    0.94053      0.94004     0.93955    0.93909    0.93864    0.93909    0.94105
    r748    0.94126    0.94095    0.94062      0.94016     0.93964    0.93922    0.93879    0.93931    0.94126
    r749    0.94135    0.94105    0.94074      0.94025     0.93976    0.93934    0.93894    0.93955    0.94147
    r750    0.94144    0.94117    0.94083      0.94038     0.93989    0.93946    0.93915    0.93976    0.94169</code></pre>
<p><img src="img/fx_vfi_az_bisec_vec_images/figure_4.png" width="500" /></p>
<p><img src="img/fx_vfi_az_bisec_vec_images/figure_5.png" width="500" /></p>
</div>
<div id="test-ff_vfi_az_bisec_vec-with-higher-uncertainty" class="section level3">
<h3><span class="header-section-number">1.4.6</span> Test FF_VFI_AZ_BISEC_VEC with Higher Uncertainty</h3>
<p>Increase the standard deviation of the Shock.</p>
<pre><code>mp_support = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_support(&#39;bl_print_params&#39;) = false;
mp_support(&#39;bl_print_iterinfo&#39;) = false;
mp_support(&#39;ls_ffcmd&#39;) = {&#39;savefraccoh&#39;};
mp_support(&#39;ls_ffsna&#39;) = {};
mp_support(&#39;ls_ffgrh&#39;) = {};
mp_params = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
mp_params(&#39;it_a_n&#39;) = 750;
mp_params(&#39;it_z_n&#39;) = 9;
mp_params(&#39;fl_a_max&#39;) = 50;
mp_params(&#39;st_grid_type&#39;) = &#39;grid_powerspace&#39;;</code></pre>
<p>Lower standard deviation of shock:</p>
<pre><code>% Lower Risk Aversion
mp_params(&#39;fl_shk_std&#39;) = 0.10;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 14.533433 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean       std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    ______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      4025.4    0.59636    0.3153     0.5287      0     0.91331

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4         c5          c6          c7         c8         c9   
            _______    _______    _______    _______    _______    ________    ________    _______    _______

    r1            0          0          0          0          0    0.012568    0.063073    0.13604    0.22228
    r2            0          0          0          0          0    0.012568    0.063073    0.13604    0.22228
    r3            0          0          0          0          0    0.012598    0.063073    0.13604    0.22228
    r4            0          0          0          0          0    0.012598    0.063073    0.13604    0.22228
    r5            0          0          0          0          0    0.012598    0.063073    0.13604    0.22228
    r746    0.91276    0.91248    0.91196    0.91163    0.91111     0.91077     0.91025    0.90977    0.90913
    r747    0.91291     0.9126    0.91209    0.91178    0.91126     0.91093     0.91041    0.90992    0.90925
    r748    0.91303    0.91276    0.91224    0.91193    0.91138     0.91108     0.91056    0.91004     0.9094
    r749    0.91318    0.91288    0.91236    0.91206    0.91154      0.9112     0.91068    0.91019    0.90955
    r750    0.91331      0.913    0.91251    0.91221    0.91169     0.91135     0.91083    0.91035    0.90971</code></pre>
<p>Higher shock standard deviation: low shock high asset save more, high
shock more asset save less, high shock low asset save more:</p>
<pre><code>% Higher Risk Aversion
mp_params(&#39;fl_shk_std&#39;) = 0.40;
ff_vfi_az_bisec_vec(mp_params, mp_support);

Elapsed time is 14.829381 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
CONTAINER NAME: mp_ffcmd ND Array (Matrix etc)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    ndim    numel    rowN    colN     sum       mean        std      coefvari    min      max  
                   _    ___    ____    _____    ____    ____    ______    _______    _______    ________    ___    _______

    savefraccoh    1     1      2      6750     750      9      5105.2    0.75633    0.26373     0.3487      0     0.97428

xxx TABLE:savefraccoh xxxxxxxxxxxxxxxxxx
              c1         c2         c3         c4          c5         c6         c7         c8         c9   
            _______    _______    _______    _______    ________    _______    _______    _______    _______

    r1            0          0          0          0    0.031641     0.2456    0.55455    0.80573    0.96207
    r2            0          0          0          0    0.031641     0.2456    0.55455    0.80573    0.96207
    r3            0          0          0          0    0.031641     0.2456    0.55455    0.80573    0.96207
    r4            0          0          0          0    0.031671     0.2456    0.55455    0.80573    0.96207
    r5            0          0          0          0    0.031671     0.2456    0.55455    0.80573    0.96207
    r746    0.93336    0.93287    0.93226    0.93149      0.9303     0.9289    0.92725    0.93293    0.97416
    r747    0.93342    0.93293    0.93232    0.93159      0.9304    0.92899    0.92737    0.93317    0.97419
    r748    0.93348    0.93299    0.93241    0.93165     0.93046    0.92905     0.9275    0.93339    0.97422
    r749    0.93354    0.93305    0.93247    0.93171     0.93055    0.92914    0.92762    0.93363    0.97425
    r750     0.9336    0.93311    0.93253    0.93177     0.93061    0.92924    0.92771    0.93384    0.97428</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="summarize-policy-and-value.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["Matlab-Toolbox-Heterogeneous-Agents-Dynamic-Programming.pdf", "PDF"]],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
