
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>FF_GRAPH_GRID Grid based Graph, x-axis one param, color another param, over outcomes</title><meta name="generator" content="MATLAB 9.7"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2020-06-24"><meta name="DC.source" content="ff_graph_grid.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>FF_GRAPH_GRID Grid based Graph, x-axis one param, color another param, over outcomes</h1><!--introduction--><pre>  FF_GRAPH_GRID() draws matrix values (MT_VALUE) as Y, columns
  (AR_COL_GRID) as X, and rows (AR_ROW_GRID) as separate lines. For
  example columns could be asset points, and rows could be corresponding
  to different shocks, and MT_VALUE are different policy optimal chocies
  given asset and shock points. The AR_ROW_GRID values can be</pre><pre>  * MT_VALUE R by C numeric matrix
  * AR_COL_GRID 1 by C array, numeric array
  * AR_ROW_GRID 1 by R array, numeric or string array (NOT CHAR array)
  * MP_SUPPORT_GRAPH container map</pre><pre>  MP_SUPPORT_GRAPH keys and Example Values:</pre><pre>  MP_SUPPORT_GRAPH = containers.Map('KeyType', 'char', 'ValueType', 'any');
  MP_SUPPORT_GRAPH('cl_st_graph_title') = {'title line main', 'title line 2'};
  MP_SUPPORT_GRAPH('cl_st_ytitle') = {'y title, matrix values', 'y line 2'};
  MP_SUPPORT_GRAPH('cl_st_xtitle') = {'x title, matrix columns', 'x line 2'};
  MP_SUPPORT_GRAPH('st_rowvar_name') = 'category rows';
  MP_SUPPORT_GRAPH('st_legend_loc') = 'northwest';
  MP_SUPPORT_GRAPH('bl_graph_logy') = true;
  MP_SUPPORT_GRAPH('it_legend_select') = 5;
  MP_SUPPORT_GRAPH('st_rounding') = '.2f';
  MP_SUPPORT_GRAPH('cl_scatter_shapes') = {'s', 'x', 'o', 'd'};
  MP_SUPPORT_GRAPH('cl_colors') = {'blue', 'red', 'black', 'green'};</pre><pre>  When the number of rows (shocks) is below six, each line will have
  a scatter point overlay with different scatter patterns.</pre><pre>  Each rows (shocks), will have a different color from a color
  spectrum. In the legend, at most 5 color/shape values will be shown.
  When the number of rows exceeds 5, only five colors will be shown. The
  middle color could be zero shock, the boundary points are highest and
  lowest shock points.</pre><pre>  FF_GRAPH_GRID() draw figure with a testing matrix. f(row, col), 6 row
  values, 10 column values, f are growing splines with different
  x-intercepts and random shocks</pre><pre>  FF_GRAPH_GRID(MT_VALUE) draw a figure with a matrix of values. The
  matrix values will show up as y=axis values. The x-axis will be column
  index. Each row will have a different colored/patterned line. Legend
  indicates row index.</pre><pre>  FF_GRAPH_GRID(MT_VALUE, AR_ROW_GRID, AR_COL_GRID) uses the column grid
  values as x-axis points, and row-grid points as legend labels.</pre><pre>  FF_GRAPH_GRID(MT_VALUE, AR_ROW_GRID, AR_COL_GRID, MP_SUPPORT_GRAPH)
  overrides local default options.</pre><pre>  See also FX_GRAPH_GRID</pre><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#3">Parse Main Inputs and Set Defaults</a></li><li><a href="#4">Set and Update Graph Support Map</a></li><li><a href="#5">Parse Title and Lengends</a></li><li><a href="#6">Parse Graphing Details</a></li><li><a href="#7">Generaet Graph</a></li><li><a href="#9">Plot Initiate</a></li><li><a href="#10">Log Transform</a></li><li><a href="#11">Plot Given Fewer or Many Rows Counts</a></li><li><a href="#13">Plot Many Rows as Jet Lines</a></li><li><a href="#16">Plot Less than 7 Rows as Scatter + Lines</a></li><li><a href="#18">Titling</a></li><li><a href="#19">Legend</a></li><li><a href="#21">Return</a></li></ul></div><pre class="codeinput"><span class="keyword">function</span> varargout = ff_graph_grid(varargin)
</pre><h2 id="3">Parse Main Inputs and Set Defaults</h2><pre class="codeinput"><span class="keyword">if</span> (~isempty(varargin))

    <span class="keyword">if</span> (length(varargin)==1)
        mt_value = varargin{:};
        [it_rows, it_cols] = size(mt_value);
        ar_row_grid = num2str(1:1:it_rows);
        ar_col_grid = 1:1:it_cols;
    <span class="keyword">elseif</span> (length(varargin)==3)
        [mt_value, ar_row_grid, ar_col_grid] = varargin{:};
    <span class="keyword">elseif</span> (length(varargin)==4)
        [mt_value, ar_row_grid, ar_col_grid, mp_support_graph_ext] = varargin{:};
    <span class="keyword">end</span>

<span class="keyword">else</span>

    close <span class="string">all</span>;
    ar_row_grid = linspace(-4, 11, 8);
    ar_col_grid = linspace(-1, 1, 6);
    rng(123);
    mt_value = 0.2*ar_row_grid' + exp(ar_col_grid) + rand([length(ar_row_grid), length(ar_col_grid)]);

<span class="keyword">end</span>
</pre><h2 id="4">Set and Update Graph Support Map</h2><pre class="codeinput">mp_support_graph = containers.Map(<span class="string">'KeyType'</span>, <span class="string">'char'</span>, <span class="string">'ValueType'</span>, <span class="string">'any'</span>);
mp_support_graph(<span class="string">'cl_st_graph_title'</span>) = {<span class="string">'title line main'</span>, <span class="string">'title line 2'</span>};
mp_support_graph(<span class="string">'cl_st_ytitle'</span>) = {<span class="string">'y title, matrix values'</span>, <span class="string">'y line 2'</span>};
mp_support_graph(<span class="string">'cl_st_xtitle'</span>) = {<span class="string">'x title, matrix columns'</span>, <span class="string">'x line 2'</span>};
mp_support_graph(<span class="string">'st_rowvar_name'</span>) = <span class="string">'category rows'</span>;
mp_support_graph(<span class="string">'st_legend_loc'</span>) = <span class="string">'northwest'</span>;
mp_support_graph(<span class="string">'bl_graph_logy'</span>) = true;
mp_support_graph(<span class="string">'it_legend_select'</span>) = 5;
mp_support_graph(<span class="string">'st_rounding'</span>) = <span class="string">'.2f'</span>;
mp_support_graph(<span class="string">'cl_scatter_shapes'</span>) = <span class="keyword">...</span>
    {<span class="string">'o'</span>, <span class="string">'d'</span>, <span class="string">'s'</span>, <span class="string">'p'</span>, <span class="string">'h'</span>, <span class="string">'x'</span>, <span class="string">'*'</span>, <span class="string">'&gt;'</span>, <span class="string">'&lt;'</span>};
mp_support_graph(<span class="string">'cl_colors'</span>) = <span class="keyword">...</span>
    {<span class="string">'blue'</span>, <span class="string">'red'</span>, <span class="string">'black'</span>, <span class="string">'green'</span>, <span class="string">'brown'</span>, <span class="string">'purple'</span>, <span class="string">'gray'</span>, <span class="string">'orange'</span>};

<span class="comment">% override default support_map values</span>
<span class="keyword">if</span> (length(varargin)==4)
    mp_support_graph = [mp_support_graph; mp_support_graph_ext];
<span class="keyword">end</span>
</pre><h2 id="5">Parse Title and Lengends</h2><pre class="codeinput">cl_params = values(mp_support_graph, {<span class="string">'cl_st_graph_title'</span>, <span class="keyword">...</span>
    <span class="string">'cl_st_ytitle'</span>, <span class="string">'cl_st_xtitle'</span>, <span class="string">'st_rowvar_name'</span>});
[cl_st_graph_title, cl_st_ytitle, cl_st_xtitle, st_rowvar_name] = cl_params{:};
cl_params = values(mp_support_graph, {<span class="string">'st_legend_loc'</span>, <span class="string">'bl_graph_logy'</span>, <span class="keyword">...</span>
    <span class="string">'it_legend_select'</span>, <span class="string">'st_rounding'</span>});
[st_legend_loc, bl_graph_logy, it_legend_select, st_rounding] = cl_params{:};
</pre><h2 id="6">Parse Graphing Details</h2><pre class="codeinput">cl_params = values(mp_support_graph, {<span class="string">'cl_scatter_shapes'</span>, <span class="string">'cl_colors'</span>});
[cl_scatter_shapes, cl_colors] = cl_params{:};

mp_colors = containers.Map(<span class="string">'KeyType'</span>, <span class="string">'char'</span>, <span class="string">'ValueType'</span>, <span class="string">'any'</span>);
mp_colors(<span class="string">'blue'</span>)   = [57 106 177]./255;
mp_colors(<span class="string">'red'</span>)    = [204 37 41]./255;
mp_colors(<span class="string">'black'</span>)  = [83 81 84]./255;
mp_colors(<span class="string">'green'</span>)  = [62 150 81]./255;

mp_colors(<span class="string">'brown'</span>)  = [146 36 40]./255;
mp_colors(<span class="string">'purple'</span>) = [107 76 154]./255;
mp_colors(<span class="string">'gray'</span>)   = [128 133 133]./255;
mp_colors(<span class="string">'orange'</span>)   = [255 140 0]./255;

cl_color_values = values(mp_colors, cl_colors);
</pre><h2 id="7">Generaet Graph</h2><pre class="codeinput"><span class="keyword">if</span> (bl_graph_logy)
    ar_it_plot = [1,2];
<span class="keyword">else</span>
    ar_it_plot = [1];
<span class="keyword">end</span>

<span class="keyword">for</span> it_plot = ar_it_plot
</pre><h2 id="9">Plot Initiate</h2><pre class="codeinput">    pl_obj = figure(<span class="string">'PaperPosition'</span>, [0 0 7 4]);
    hold <span class="string">on</span>;

    it_graph_counter = 0;
    cl_legend = [];
</pre><img vspace="5" hspace="5" src="ff_graph_grid_01.png" alt=""> <img vspace="5" hspace="5" src="ff_graph_grid_05.png" alt=""> <h2 id="10">Log Transform</h2><pre class="codeinput">    ar_x = ar_col_grid;
    mt_value_use = mt_value;
    <span class="keyword">if</span> (it_plot == 2)
        <span class="keyword">if</span> (min(min(mt_value))&gt;0)
            mt_value_use = log(mt_value_use + 0.001);
            st_log_func_y = <span class="string">'LOG(Y)'</span>;
        <span class="keyword">else</span>
            fl_y_log_adj = abs(min(min(mt_value)))+0.001;
            mt_value_use = log(mt_value_use + fl_y_log_adj);
            st_log_func_y = <span class="string">'LOG(Y+min(Y))'</span>;
        <span class="keyword">end</span>
        <span class="keyword">if</span> (min(ar_col_grid)&gt;0)
            ar_x = log(ar_x);
            st_log_func_x = <span class="string">'LOG(X)'</span>;
        <span class="keyword">else</span>
            ar_x = log(ar_x-min(ar_col_grid)+0.001);
            st_log_func_x = <span class="string">'LOG(X+min(X))'</span>;
        <span class="keyword">end</span>
    <span class="keyword">end</span>
</pre><h2 id="11">Plot Given Fewer or Many Rows Counts</h2><pre class="codeinput">    <span class="keyword">if</span> (length(ar_row_grid) &gt; length(cl_scatter_shapes))
</pre><h2 id="13">Plot Many Rows as Jet Lines</h2><pre class="codeinput">        chart = plot(mt_value_use');
        clr = jet(numel(chart));
        <span class="keyword">for</span> m = 1:numel(chart)
            set(chart(m),<span class="string">'Color'</span>,clr(m,:))
        <span class="keyword">end</span>
</pre><pre class="codeinput">    <span class="keyword">else</span>
</pre><h2 id="16">Plot Less than 7 Rows as Scatter + Lines</h2><pre class="codeinput">        <span class="keyword">for</span> it_color = 1:length(ar_row_grid)

            florst_row_param = ar_row_grid(it_color);

            it_graph_counter = it_graph_counter + 1;
            ar_color = cl_color_values{it_color};

            <span class="comment">% Access Y Values</span>
            ar_y_use = mt_value_use(it_color,:);

            <span class="comment">% Access X Values</span>
            it_csize = 100;
            st_shape = cl_scatter_shapes{it_color};

            <span class="comment">% scatter draw</span>
            scatter(ar_x', ar_y_use', it_csize, <span class="keyword">...</span>
                ar_color, st_shape, <span class="keyword">...</span>
                <span class="string">'MarkerFaceAlpha'</span>, 1.0, <span class="string">'MarkerEdgeAlpha'</span>, 1.0);

            <span class="comment">% line draw</span>
            line = plot(ar_x, ar_y_use);
            line.Color = ar_color;
            line.LineStyle = <span class="string">'-'</span>;
            line.LineWidth = 2;
            line.HandleVisibility = <span class="string">'off'</span>;

            <span class="comment">% Legend</span>
            <span class="keyword">if</span> (isnumeric(florst_row_param))
                cl_legend{it_graph_counter} = compose(strcat(st_rowvar_name, <span class="string">"%"</span>, st_rounding), florst_row_param);
            <span class="keyword">else</span>
                cl_legend{it_graph_counter} = florst_row_param;
            <span class="keyword">end</span>
        <span class="keyword">end</span>
</pre><img vspace="5" hspace="5" src="ff_graph_grid_02.png" alt=""> <img vspace="5" hspace="5" src="ff_graph_grid_06.png" alt=""> <pre class="codeinput">    <span class="keyword">end</span>
</pre><h2 id="18">Titling</h2><pre class="codeinput">    cl_st_ytitle_use = cl_st_ytitle;
    cl_st_xtitle_use = cl_st_xtitle;
    cl_st_graph_title_use = cl_st_graph_title;
    <span class="keyword">if</span> (it_plot == 2)
        cl_st_ytitle_use{length(cl_st_ytitle_use)+1} = st_log_func_y;
        cl_st_xtitle_use{length(cl_st_xtitle_use)+1} = st_log_func_x;
    <span class="keyword">end</span>
    title(cl_st_graph_title_use);
    ylabel(cl_st_ytitle_use);
    xlabel(cl_st_xtitle_use);
</pre><img vspace="5" hspace="5" src="ff_graph_grid_03.png" alt=""> <img vspace="5" hspace="5" src="ff_graph_grid_07.png" alt=""> <h2 id="19">Legend</h2><pre class="codeinput">    st_legend_loc_use = st_legend_loc;
    <span class="keyword">if</span> (it_plot == 2)
        st_legend_loc_use = <span class="string">'best'</span>;
    <span class="keyword">end</span>

    <span class="keyword">if</span> (length(ar_row_grid)&gt; length(cl_scatter_shapes))
        ar_it_legend_select = fliplr(round(linspace(1, length(ar_row_grid), it_legend_select)));
        <span class="keyword">if</span>(isstring(ar_row_grid))
            cl_legend = ar_row_grid;
        <span class="keyword">else</span>
            cl_legend = cellstr(num2str(ar_row_grid', strcat(st_rowvar_name, <span class="string">'%'</span>, st_rounding)));
        <span class="keyword">end</span>
        legend(chart(ar_it_legend_select), cl_legend(ar_it_legend_select), <span class="string">'Location'</span>, st_legend_loc_use);
    <span class="keyword">else</span>
        legend(cl_legend, <span class="string">'Location'</span>, st_legend_loc_use);
    <span class="keyword">end</span>

    grid <span class="string">on</span>;
    grid <span class="string">minor</span>;
    snapnow;
</pre><img vspace="5" hspace="5" src="ff_graph_grid_04.png" alt=""> <img vspace="5" hspace="5" src="ff_graph_grid_08.png" alt=""> <pre class="codeinput"><span class="keyword">end</span>
</pre><h2 id="21">Return</h2><pre class="codeinput">varargout = cell(nargout,0);
<span class="keyword">for</span> it_k = 1:nargout
    <span class="keyword">if</span> (it_k==1)
        ob_out_cur = pl_obj;
    <span class="keyword">end</span>
    varargout{it_k} = ob_out_cur;
<span class="keyword">end</span>
</pre><pre class="codeinput"><span class="keyword">end</span>
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% FF_GRAPH_GRID Grid based Graph, x-axis one param, color another param, over outcomes
%    FF_GRAPH_GRID() draws matrix values (MT_VALUE) as Y, columns
%    (AR_COL_GRID) as X, and rows (AR_ROW_GRID) as separate lines. For
%    example columns could be asset points, and rows could be corresponding
%    to different shocks, and MT_VALUE are different policy optimal chocies
%    given asset and shock points. The AR_ROW_GRID values can be 
%
%    * MT_VALUE R by C numeric matrix
%    * AR_COL_GRID 1 by C array, numeric array
%    * AR_ROW_GRID 1 by R array, numeric or string array (NOT CHAR array)
%    * MP_SUPPORT_GRAPH container map
%
%    MP_SUPPORT_GRAPH keys and Example Values: 
%
%    MP_SUPPORT_GRAPH = containers.Map('KeyType', 'char', 'ValueType', 'any');
%    MP_SUPPORT_GRAPH('cl_st_graph_title') = {'title line main', 'title line 2'};
%    MP_SUPPORT_GRAPH('cl_st_ytitle') = {'y title, matrix values', 'y line 2'};
%    MP_SUPPORT_GRAPH('cl_st_xtitle') = {'x title, matrix columns', 'x line 2'};
%    MP_SUPPORT_GRAPH('st_rowvar_name') = 'category rows';
%    MP_SUPPORT_GRAPH('st_legend_loc') = 'northwest';
%    MP_SUPPORT_GRAPH('bl_graph_logy') = true;
%    MP_SUPPORT_GRAPH('it_legend_select') = 5;
%    MP_SUPPORT_GRAPH('st_rounding') = '.2f';
%    MP_SUPPORT_GRAPH('cl_scatter_shapes') = {'s', 'x', 'o', 'd'};
%    MP_SUPPORT_GRAPH('cl_colors') = {'blue', 'red', 'black', 'green'};
%
%    When the number of rows (shocks) is below six, each line will have
%    a scatter point overlay with different scatter patterns.
%
%    Each rows (shocks), will have a different color from a color
%    spectrum. In the legend, at most 5 color/shape values will be shown.
%    When the number of rows exceeds 5, only five colors will be shown. The
%    middle color could be zero shock, the boundary points are highest and
%    lowest shock points.
%
%    FF_GRAPH_GRID() draw figure with a testing matrix. f(row, col), 6 row
%    values, 10 column values, f are growing splines with different
%    x-intercepts and random shocks
%
%    FF_GRAPH_GRID(MT_VALUE) draw a figure with a matrix of values. The
%    matrix values will show up as y=axis values. The x-axis will be column
%    index. Each row will have a different colored/patterned line. Legend
%    indicates row index.
%
%    FF_GRAPH_GRID(MT_VALUE, AR_ROW_GRID, AR_COL_GRID) uses the column grid
%    values as x-axis points, and row-grid points as legend labels.
%
%    FF_GRAPH_GRID(MT_VALUE, AR_ROW_GRID, AR_COL_GRID, MP_SUPPORT_GRAPH)
%    overrides local default options.
%
%    See also FX_GRAPH_GRID

%%
function varargout = ff_graph_grid(varargin)

%% Parse Main Inputs and Set Defaults

if (~isempty(varargin))
    
    if (length(varargin)==1)
        mt_value = varargin{:};
        [it_rows, it_cols] = size(mt_value);
        ar_row_grid = num2str(1:1:it_rows);
        ar_col_grid = 1:1:it_cols;
    elseif (length(varargin)==3)
        [mt_value, ar_row_grid, ar_col_grid] = varargin{:};
    elseif (length(varargin)==4)
        [mt_value, ar_row_grid, ar_col_grid, mp_support_graph_ext] = varargin{:};
    end
    
else
    
    close all;
    ar_row_grid = linspace(-4, 11, 8);
    ar_col_grid = linspace(-1, 1, 6);
    rng(123);
    mt_value = 0.2*ar_row_grid' + exp(ar_col_grid) + rand([length(ar_row_grid), length(ar_col_grid)]);
    
end

%% Set and Update Graph Support Map
mp_support_graph = containers.Map('KeyType', 'char', 'ValueType', 'any');
mp_support_graph('cl_st_graph_title') = {'title line main', 'title line 2'};
mp_support_graph('cl_st_ytitle') = {'y title, matrix values', 'y line 2'};
mp_support_graph('cl_st_xtitle') = {'x title, matrix columns', 'x line 2'};
mp_support_graph('st_rowvar_name') = 'category rows';
mp_support_graph('st_legend_loc') = 'northwest';
mp_support_graph('bl_graph_logy') = true;
mp_support_graph('it_legend_select') = 5;
mp_support_graph('st_rounding') = '.2f';
mp_support_graph('cl_scatter_shapes') = ...
    {'o', 'd', 's', 'p', 'h', 'x', '*', '>', '<'};
mp_support_graph('cl_colors') = ...
    {'blue', 'red', 'black', 'green', 'brown', 'purple', 'gray', 'orange'};

% override default support_map values
if (length(varargin)==4)
    mp_support_graph = [mp_support_graph; mp_support_graph_ext];
end

%% Parse Title and Lengends
cl_params = values(mp_support_graph, {'cl_st_graph_title', ...
    'cl_st_ytitle', 'cl_st_xtitle', 'st_rowvar_name'});
[cl_st_graph_title, cl_st_ytitle, cl_st_xtitle, st_rowvar_name] = cl_params{:};
cl_params = values(mp_support_graph, {'st_legend_loc', 'bl_graph_logy', ...
    'it_legend_select', 'st_rounding'});
[st_legend_loc, bl_graph_logy, it_legend_select, st_rounding] = cl_params{:};

%% Parse Graphing Details
cl_params = values(mp_support_graph, {'cl_scatter_shapes', 'cl_colors'});
[cl_scatter_shapes, cl_colors] = cl_params{:};

mp_colors = containers.Map('KeyType', 'char', 'ValueType', 'any');
mp_colors('blue')   = [57 106 177]./255;
mp_colors('red')    = [204 37 41]./255;
mp_colors('black')  = [83 81 84]./255;
mp_colors('green')  = [62 150 81]./255;
				    
mp_colors('brown')  = [146 36 40]./255;
mp_colors('purple') = [107 76 154]./255;
mp_colors('gray')   = [128 133 133]./255;
mp_colors('orange')   = [255 140 0]./255;

cl_color_values = values(mp_colors, cl_colors);

%% Generaet Graph

if (bl_graph_logy)
    ar_it_plot = [1,2];
else
    ar_it_plot = [1];
end

for it_plot = ar_it_plot
    
    %% Plot Initiate
    pl_obj = figure('PaperPosition', [0 0 7 4]);
    hold on;
    
    it_graph_counter = 0;
    cl_legend = [];
    
    %% Log Transform
    ar_x = ar_col_grid;
    mt_value_use = mt_value;
    if (it_plot == 2)
        if (min(min(mt_value))>0)
            mt_value_use = log(mt_value_use + 0.001);
            st_log_func_y = 'LOG(Y)';
        else
            fl_y_log_adj = abs(min(min(mt_value)))+0.001;
            mt_value_use = log(mt_value_use + fl_y_log_adj);
            st_log_func_y = 'LOG(Y+min(Y))';
        end
        if (min(ar_col_grid)>0)
            ar_x = log(ar_x);
            st_log_func_x = 'LOG(X)';
        else
            ar_x = log(ar_x-min(ar_col_grid)+0.001);
            st_log_func_x = 'LOG(X+min(X))';
        end
    end
    
    %% Plot Given Fewer or Many Rows Counts
    if (length(ar_row_grid) > length(cl_scatter_shapes))
        
        %% Plot Many Rows as Jet Lines        
        chart = plot(mt_value_use');
        clr = jet(numel(chart));
        for m = 1:numel(chart)
            set(chart(m),'Color',clr(m,:))
        end
        
    else
        
        %% Plot Less than 7 Rows as Scatter + Lines
        for it_color = 1:length(ar_row_grid)
            
            florst_row_param = ar_row_grid(it_color);
            
            it_graph_counter = it_graph_counter + 1;
            ar_color = cl_color_values{it_color};
            
            % Access Y Values
            ar_y_use = mt_value_use(it_color,:);
            
            % Access X Values
            it_csize = 100;
            st_shape = cl_scatter_shapes{it_color};
            
            % scatter draw
            scatter(ar_x', ar_y_use', it_csize, ...
                ar_color, st_shape, ...
                'MarkerFaceAlpha', 1.0, 'MarkerEdgeAlpha', 1.0);
            
            % line draw
            line = plot(ar_x, ar_y_use);
            line.Color = ar_color;
            line.LineStyle = '-';
            line.LineWidth = 2;
            line.HandleVisibility = 'off';
            
            % Legend
            if (isnumeric(florst_row_param))
                cl_legend{it_graph_counter} = compose(strcat(st_rowvar_name, "%", st_rounding), florst_row_param);
            else
                cl_legend{it_graph_counter} = florst_row_param;
            end
        end
    end
    
    %% Titling
    cl_st_ytitle_use = cl_st_ytitle;
    cl_st_xtitle_use = cl_st_xtitle;
    cl_st_graph_title_use = cl_st_graph_title;
    if (it_plot == 2)
        cl_st_ytitle_use{length(cl_st_ytitle_use)+1} = st_log_func_y;
        cl_st_xtitle_use{length(cl_st_xtitle_use)+1} = st_log_func_x;
    end
    title(cl_st_graph_title_use);
    ylabel(cl_st_ytitle_use);
    xlabel(cl_st_xtitle_use);
    
    %% Legend
    st_legend_loc_use = st_legend_loc;
    if (it_plot == 2)
        st_legend_loc_use = 'best';
    end
    
    if (length(ar_row_grid)> length(cl_scatter_shapes))
        ar_it_legend_select = fliplr(round(linspace(1, length(ar_row_grid), it_legend_select)));
        if(isstring(ar_row_grid))
            cl_legend = ar_row_grid;
        else
            cl_legend = cellstr(num2str(ar_row_grid', strcat(st_rowvar_name, '%', st_rounding)));        
        end        
        legend(chart(ar_it_legend_select), cl_legend(ar_it_legend_select), 'Location', st_legend_loc_use);
    else
        legend(cl_legend, 'Location', st_legend_loc_use);
    end
    
    grid on;
    grid minor;
    snapnow;
    
end

%% Return
varargout = cell(nargout,0);
for it_k = 1:nargout
    if (it_k==1)
        ob_out_cur = pl_obj;
    end
    varargout{it_k} = ob_out_cur;
end


end

##### SOURCE END #####
--></body></html>